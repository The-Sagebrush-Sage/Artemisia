<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artemisia</title>
    <link rel="icon" href="https://i.postimg.cc/zXXhVbHv/11.png" type="image/x-icon">
    <link rel="stylesheet" href="Artist_b.css">

</head>

<body>
    <!-- Header —Å –ø–æ–∏—Å–∫–æ–≤–æ–π —Å—Ç—Ä–æ–∫–æ–π -->
    <header>
        <div class="header-left">
            <div class="menu-icon" id="menuIcon" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <a href="../index.html"> <img src="https://i.postimg.cc/hjBzgfqS/1.png" alt="–õ–æ–≥–æ—Ç–∏–ø" class="logo"> </a>
        </div>

        <div class="header-right">
            <!-- –ü–æ–∏—Å–∫–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ —Ç–µ–ø–µ—Ä—å –≤ –ø—Ä–∞–≤–æ–π —á–∞—Å—Ç–∏ -->
            <div class="search-container" id="searchContainer">
                <div class="search-box">
                    <div class="search-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="#aaa" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3C5.91 3 3 5.91 3 9.5C3 13.09 5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5C5 7.01 7.01 5 9.5 5C11.99 5 14 7.01 14 9.5C14 11.99 11.99 14 9.5 14Z" />
                        </svg>
                    </div>
                    <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ —Ö—É–¥–æ–∂–Ω–∏–∫–æ–≤..." autocomplete="off">
                    <button class="search-btn" onclick="searchArtists()">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="#262626"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3C5.91 3 3 5.91 3 9.5C3 13.09 5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5C5 7.01 7.01 5 9.5 5C11.99 5 14 7.01 14 9.5C14 11.99 11.99 14 9.5 14Z" />
                        </svg>
                    </button>
                </div>
                <div class="search-results" id="searchResults"></div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è –ü–ö -->
            <div class="header-auth">
                <button href="?modal=login" class="auth-btn login-btn" onclick="openLoginModal()">–í–æ–π—Ç–∏</button>
                <button href="?modal=register" class="auth-btn register-btn" onclick="openRegistrationModal()"
                    data-default-text="–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è" data-alternate-text="–í–æ–π—Ç–∏">
                    –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
                </button>
            </div>

            <button class="mobile-search-btn" id="mobileSearchBtn" onclick="toggleSearch()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3C5.91 3 3 5.91 3 9.5C3 13.09 5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5C5 7.01 7.01 5 9.5 5C11.99 5 14 7.01 14 9.5C14 11.99 11.99 14 9.5 14Z" />
                </svg>
            </button>
        </div>
        <div class="search-backdrop" id="searchBackdrop" onclick="toggleSearch()"></div>
    </header>

    <!-- Menu Drawer -->
    <div class="overlay" id="overlay" onclick="toggleMenu()"></div>
    <div class="drawer" id="drawer">
        <!-- –ú–æ–±–∏–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–æ–ª—å–∫–æ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö) -->
        <div class="mobile-user-profile" id="mobileUserProfile">
            <img src="" alt="–ê–≤–∞—Ç–∞—Ä" class="mobile-user-avatar" id="mobileUserAvatar">
            <div class="mobile-user-info">
                <div class="mobile-user-name" id="mobileUserName"></div>
                <div class="mobile-user-telegram" id="mobileUserTelegram"></div>
            </div>
            <div class="mobile-user-actions">
                <button class="mobile-profile-btn" onclick="openPersonalCabinetModal()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                    </svg>
                    –ü—Ä–æ—Ñ–∏–ª—å
                </button>
                <button class="mobile-logout-btn" onclick="logout()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z" />
                    </svg>
                    –í—ã–π—Ç–∏
                </button>
            </div>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö -->
        <div class="mobile-auth" id="mobileAuth">
            <button href="?modal=login" class="auth-btn login-btn" onclick="openLoginModal()">–í–æ–π—Ç–∏</button>
            <button href="?modal=register" class="auth-btn register-btn" onclick="openRegistrationModal()"
                data-default-text="–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è" data-alternate-text="–í–æ–π—Ç–∏">
                –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
            </button>
        </div>

        <ul class="menu">
            <li><a href="../index.html">
                    <img src="https://i.postimg.cc/6p8Gfk0N/home.png" alt="–ì–ª–∞–≤–Ω–∞—è">
                    –ì–ª–∞–≤–Ω–∞—è
                </a>
            </li>

            <li>
                <a href="Prem_Artist_b.html">
                    <img src="https://i.postimg.cc/Z5Y5rqkg/prem-art.png" alt="–•—É–¥–æ–∂–Ω–∏–∫–∏">
                    Prem Artist
                </a>
            </li>

            <li>
                <a href="wer.html">
                    <img src="https://i.postimg.cc/MGRMh1NP/man-14816778.png" alt="–•—É–¥–æ–∂–Ω–∏–∫–∏">
                    –•—É–¥–æ–∂–Ω–∏–∫–∏
                </a>
            </li>

            <li>
                <a href="Design_b.html">
                    <img src="https://i.postimg.cc/t4xNXgTY/free-icon-pen-tablet-4861056.png" alt="–•—É–¥–æ–∂–Ω–∏–∫–∏">
                    –î–∏–∑–∞–π–Ω–µ—Ä—ã
                </a>
            </li>

            <li>
                <a href="#" class="has-submenu" onclick="toggleSubmenu(event)">
                    <img src="https://i.postimg.cc/85mFCN1L/mobile-shopping.png" alt="">
                    –£—Å–ª—É–≥–∏
                </a>

                <ul class="submenu">
                    <li>
                        <a href="../html/Services.html#Commission" class="submenu-link"
                            onclick="openTabByLink('Commission')">
                            COMMISSION ART
                        </a>
                    </li>
                    <li>
                        <a href="../html/Services.html#Yunchy" class="submenu-link" onclick="openTabByLink('Yunchy')">
                            YCH
                        </a>
                    </li>
                    <li>
                        <a href="../html/Services.html#art" class="submenu-link" onclick="openTabByLink('art')">
                            ADOPT
                        </a>
                    </li>
                </ul>
            </li>

            <li><a href="#">
                    <img src="https://i.postimg.cc/bYRbyHJ4/draw.png" alt="">
                    –ö–æ–º–∏–∫—Å—ã
                </a>
            </li>

            <li class="separator-menu"></li>

            <li><a href="../html/AboutUs.html#about-site">
                    –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –æ —Å–∞–π—Ç–µ
                </a>
            </li>

            <li><a href="../html/AboutUs.html#publish-work">
                    –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É
                </a>
            </li>

            <li><a href="../html/AboutUs.html#guarantees">
                    –ì–∞—Ä–∞–Ω—Ç—ã
                </a>
            </li>

            <li class="separator-menu"></li>

            <li>
                <a href="#" class="has-submenu" onclick="toggleSubmenu(event)">
                    <img src="https://i.postimg.cc/sDXB3kbZ/image.png" alt="">
                    –î–æ–∫—É–º–µ–Ω—Ç—ã
                </a>
                <ul class="submenu">
                    <li><a href="../html/Document.html#user-agreement" class="submenu-link">–°–æ–≥–ª–∞—à–µ–Ω–∏–µ</a></li>
                    <li><a href="../html/Document.html#usage-rules" class="submenu-link">–ü—Ä–∞–≤–∏–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</a></li>
                    <li><a href="../html/Document.html#guaranteed-deals" class="submenu-link">–ì–∞—Ä–∞–Ω—Ç–∏–π–Ω—ã–µ —Å–¥–µ–ª–∫–∏</a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>

    <!-- –ë–∞–Ω–Ω–µ—Ä -->
    <section>
        <div class="banner">
            <img src="https://i.postimg.cc/DfSNsVrN/2.png" alt="–ë–∞–Ω–Ω–µ—Ä">
        </div>
        <div class="black-stripe"></div>
    </section>

    <!-- –§–∏–ª—å—Ç—Ä—ã -->
    <section>
        <div class="filters-container">
            <button class="filters-button" onclick="toggleFilters(event)">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                    <path d="M4 21V14" stroke="currentColor" stroke-width="2" />
                    <path d="M4 10V3" stroke="currentColor" stroke-width="2" />
                    <path d="M12 21V12" stroke="currentColor" stroke-width="2" />
                    <path d="M12 8V3" stroke="currentColor" stroke-width="2" />
                    <path d="M20 21V16" stroke="currentColor" stroke-width="2" />
                    <path d="M20 12V3" stroke="currentColor" stroke-width="2" />
                    <path d="M1 14H7" stroke="currentColor" stroke-width="2" />
                    <path d="M9 8H15" stroke="currentColor" stroke-width="2" />
                    <path d="M17 16H23" stroke="currentColor" stroke-width="2" />
                </svg>
                –§–∏–ª—å—Ç—Ä—ã
            </button>
            <div class="filters-dropdown" id="filtersDropdown">
                <a href="#" onclick="applyFilter('all', event)" class="active-filter">–í—Å–µ —Å—Ç–∏–ª–∏</a>
                <a href="#" onclick="applyFilter('prem', event)">Prem Artist</a>
            </div>
        </div>
    </section>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
    <div id="registrationModal" class="registration-modal">
        <div class="registration-modal-content">
            <span class="close-modal" onclick="closeRegistrationModal()">&times;</span>

            <div class="registration-modal-header">
                <h3 class="registration-modal-title">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Artemisia</h3>
                <p class="registration-modal-subtitle">–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å Telegram-–∫–∞–Ω–∞–ª–∞</p>

                <div class="bot-info">
                    <svg class="bot-icon" viewBox="0 0 24 24" fill="#ffcc00">
                        <path
                            d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-12S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z" />
                    </svg>
                    <a href="https://t.me/Artemisia_website" class="bot-link" target="_blank">
                        @Artemisia_website
                    </a>
                </div>
            </div>

            <form class="registration-form" onsubmit="submitRegistration(event)">
                <div class="form-group">
                    <label class="form-label" for="registrationCode">–ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:</label>
                    <input type="text" id="registrationCode" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏–∑ –±–æ—Ç–∞"
                        required maxlength="10" autocomplete="off" inputmode="text">
                </div>

                <button type="submit" class="submit-btn" id="submitBtn">
                    –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∞–Ω–∫–µ—Ç–µ
                </button>

                <div id="message" class="message"></div>
            </form>

            <div class="instructions">
                <h4 class="instructions-title">–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:</h4>
                <ol class="instructions-list">
                    <li>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–∞—à Telegram-–∫–∞–Ω–∞–ª:
                        <a href="https://t.me/Artemisia_website?direct" class="instructions-link" target="_blank">
                            @Artemisia_website
                        </a>
                    </li>
                    <li>–ù–∞–ø–∏—à–∏—Ç–µ –≤ –ø—Ä–µ–¥–ª–æ–∂–∫—É –∫–∞–Ω–∞–ª–∞</li>
                    <li>–í–∞–º –ø—Ä–∏—à–ª—é—Ç –∫–æ–¥ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é</li>
                    <li>–ü–æ—Å–ª–µ –≤–≤–µ–¥–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∫–æ–¥ –≤ –ø–æ–ª–µ –≤—ã—à–µ</li>
                    <li>–ù–∞–∂–º–∏—Ç–µ "–ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∞–Ω–∫–µ—Ç–µ"</li>
                    <li>–°–ª–µ–¥—É–π—Ç–µ –¥–∞–ª—å—à–µ –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</li>
                </ol>
                <p style="color: #ffcc00; margin-top: 12px; font-size: 0.85em; text-align: center;">
                    üí° –ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–ª—É—á–µ–Ω–∏–µ–º –∫–æ–¥–∞, –Ω–∞–ø–∏—à–∏—Ç–µ –≤
                    <a href="https://t.me/Artemisia_website?direct" class="instructions-link" target="_blank"
                        style="color: #4a90e2; font-weight: 600;">
                        —Ç–µ—Ö–Ω–∏—á–µ—Å–∫—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É
                    </a>
                </p>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—Ö–æ–¥–∞ -->
    <div id="loginModal" class="registration-modal">
        <div class="registration-modal-content">
            <span class="close-modal" onclick="closeLoginModal()">&times;</span>

            <div class="registration-modal-header">
                <h3 class="registration-modal-title">–í—Ö–æ–¥ –≤ Artemisia</h3>
                <p class="registration-modal-subtitle">–í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç</p>
            </div>

            <form class="registration-form" onsubmit="submitLogin(event)">
                <div class="form-group">
                    <label class="form-label" for="loginEmail">–í–∞—à Id:</label>
                    <input type="text" id="loginEmail" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à Id" required
                        autocomplete="username">
                </div>

                <div class="form-group">
                    <label class="form-label" for="loginPassword">–ü–∞—Ä–æ–ª—å:</label>
                    <div class="password-input-wrapper">
                        <input type="password" id="loginPassword" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å"
                            required autocomplete="current-password">
                        <button type="button" class="password-toggle" onclick="toggleLoginPasswordVisibility()">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" />
                            </svg>
                        </button>
                    </div>
                </div>

                <button type="submit" class="submit-btn" id="loginBtn">
                    –í–æ–π—Ç–∏
                </button>

                <div id="loginMessage" class="message"></div>
            </form>

            <div class="instructions" style="text-align: center;">
                <h4 class="instructions-title">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞?</h4>
                <p style="color: #e0e0e0; margin-top: 10px; text-align: center;">
                    –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º Artemisia
                </p>
                <button class="submit-btn"
                    style="background: transparent; border: 2px solid #ffcc00; color: #ffcc00; margin-top: 10px; display: block; margin-left: auto; margin-right: auto;"
                    onclick="closeLoginModal(); openRegistrationModal();">
                    –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                </button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è -->
    <div id="profileSetupModal" class="profile-setup-modal">
        <div class="profile-setup-content">
            <span class="close-modal" onclick="closeProfileSetupModal()">&times;</span>

            <div class="profile-setup-header">
                <h3 class="profile-setup-title">–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤–∞—à –ø—Ä–æ—Ñ–∏–ª—å</h3>
                <p class="profile-setup-subtitle">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, —á—Ç–æ–±—ã –¥—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥–ª–∏ –≤–∞—Å –Ω–∞–π—Ç–∏</p>
            </div>

            <form class="profile-setup-form" onsubmit="saveProfile(event)">
                <!-- –°–µ–∫—Ü–∏—è –∞–≤–∞—Ç–∞—Ä–∫–∏ -->
                <div class="form-section" id="avatarSection">
                    <h4 class="section-title">
                        <svg viewBox="0 0 24 24" fill="#ffcc00" width="20" height="20">
                            <path
                                d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 5.5V7H9V5.5L3 7V9L9 10.5V12L3 13.5V15.5L9 14V16L3 17.5V19.5L9 18V22H15V18L21 19.5V17.5L15 16V14L21 15.5V13.5L15 12V10.5L21 9Z" />
                        </svg>
                        –ê–≤–∞—Ç–∞—Ä –ø—Ä–æ—Ñ–∏–ª—è
                    </h4>
                    <div class="avatar-upload-container">
                        <div class="avatar-preview" id="avatarPreview">
                            <div class="avatar-placeholder">–ê–≤–∞—Ç–∞—Ä –Ω–µ –≤—ã–±—Ä–∞–Ω</div>
                        </div>
                        <div class="work-link-input-container">
                            <div class="work-link-input-group">
                                <input type="text" id="avatarLinkInput" class="form-input work-link-input"
                                    placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å —Ö–æ—Å—Ç–∏–Ω–≥–∞">
                                <button type="button" class="add-work-link-btn" onclick="loadAvatarFromLink()">
                                    –ó–∞–≥—Ä—É–∑–∏—Ç—å
                                </button>
                            </div>
                            <div class="work-link-hint">
                                –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è: PostImage, ImgBB, Imgur –∏ –¥—Ä—É–≥–∏–µ —Ö–æ—Å—Ç–∏–Ω–≥–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –°–µ–∫—Ü–∏—è –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ -->
                <div class="form-section" id="mainInfoSection">
                    <h4 class="section-title">
                        <svg viewBox="0 0 24 24" fill="#ffcc00" width="20" height="20">
                            <path
                                d="M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z" />
                        </svg>
                        –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
                    </h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required" for="profileName">–ò–º—è/–ü—Å–µ–≤–¥–æ–Ω–∏–º</label>
                            <input type="text" id="profileName" class="form-input"
                                placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è (–º–∞–∫—Å–∏–º—É–º 20 —Å–∏–º–≤–æ–ª–æ–≤)" required maxlength="20">
                            <div class="char-counter" id="nameCharCounter"
                                style="color: #aaa; font-size: 12px; text-align: right; margin-top: 5px;">
                                –û—Å—Ç–∞–ª–æ—Å—å —Å–∏–º–≤–æ–ª–æ–≤: 20
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label required" for="profileNickname">–Æ–∑–µ—Ä–Ω–µ–π–º –≤ Telegram</label>
                            <input type="text" id="profileNickname" class="form-input" placeholder="@username" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required" for="profileStyle">–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å<label>
                                    <select id="profileStyle" class="form-select" required>
                                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</option>
                                        <option value="–ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –¥–∏–∑–∞–π–Ω">–ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –¥–∏–∑–∞–π–Ω</option>
                                        <option value="–î–∏–∑–∞–π–Ω">–î–∏–∑–∞–π–Ω</option>
                                        <option value="–î—Ä—É–≥–æ–µ">–î—Ä—É–≥–æ–µ</option>
                                    </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label required" for="profileCustomStyle">–î—Ä—É–≥–∞—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</label>
                            <input type="text" id="profileCustomStyle" class="form-input"
                                placeholder="–£–∫–∞–∂–∏—Ç–µ –≤–∞—à—É —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å" disabled required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="profileDescription">–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è</label>
                        <textarea id="profileDescription" class="form-textarea disabled"
                            placeholder="–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–µ–º–∏—É–º-–≤–µ—Ä—Å–∏–∏" disabled></textarea>
                        <div style="color: #ffcc00; font-size: 12px; margin-top: 5px;">
                            ‚≠ê –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ–ø–∏—Å–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è –ø—Ä–∏–æ–±—Ä–µ—Ç–∏—Ç–µ Prem Artist
                        </div>
                    </div>
                </div>

                <div class="password-section" id="passwordSection">
                    <h4 class="section-title">
                        <svg viewBox="0 0 24 24" fill="#ffcc00" width="20" height="20">
                            <path
                                d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM12 17c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM15.1 8H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z" />
                        </svg>
                        –ü–∞—Ä–æ–ª—å –¥–ª—è —Å–∞–π—Ç–∞
                    </h4>
                    <div class="password-container">
                        <div class="password-input-wrapper">
                            <input type="password" id="profilePassword" class="password-input"
                                placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å (6-12 —Å–∏–º–≤–æ–ª–æ–≤)" required minlength="6" maxlength="12"
                                autocomplete="new-password" oninput="validatePassword(this.value)">
                            <button type="button" class="password-toggle hide" onclick="togglePasswordVisibility()"
                                title="–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä–æ–ª—å">
                                <svg viewBox="0 0 24 24" fill="currentColor" class="eye-closed">
                                    <path
                                        d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" />
                                </svg>
                                <svg viewBox="0 0 24 24" fill="currentColor" class="eye-open">
                                    <path
                                        d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z" />
                                </svg>
                            </button>
                        </div>
                        <div class="password-requirements" id="passwordRequirements">
                            <div class="requirement" id="reqLength">
                                <span class="requirement-icon"></span>
                                <span>–û—Ç 6 –¥–æ 12 —Å–∏–º–≤–æ–ª–æ–≤</span>
                            </div>
                            <div class="requirement" id="reqChars">
                                <span class="requirement-icon"></span>
                                <span>–¢–æ–ª—å–∫–æ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –±—É–∫–≤—ã –∏ —Ü–∏—Ñ—Ä—ã</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –°–µ–∫—Ü–∏—è —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π -->
                <div class="form-section" id="socialSection">
                    <h4 class="section-title">
                        <svg viewBox="0 0 24 24" fill="#ffcc00" width="20" height="20">
                            <path
                                d="M18 16.08C17.24 16.08 16.56 16.38 16.04 16.85L8.91 12.7C8.96 12.47 9 12.24 9 12C9 11.76 8.96 11.53 8.91 11.3L15.96 7.19C16.5 7.69 17.21 8 18 8C19.66 8 21 6.66 21 5C21 3.34 19.66 2 18 2C16.34 2 15 3.34 15 5C15 5.24 15.04 5.47 15.09 5.7L8.04 9.81C7.5 9.31 6.79 9 6 9C4.34 9 3 10.34 3 12C3 13.66 4.34 15 6 15C6.79 15 7.5 14.69 8.04 14.19L15.16 18.35C15.11 18.56 15.08 18.78 15.08 19C15.08 20.61 16.39 21.92 18 21.92C19.61 21.92 20.92 20.61 20.92 19C20.92 17.39 19.61 16.08 18 16.08Z" />
                        </svg>
                        –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏ <span style="color: #ff6b6b;">*</span>
                    </h4>

                    <!-- –°—á–µ—Ç—á–∏–∫ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π -->
                    <div class="social-counter" id="socialCounter"
                        style="color: #ff6b6b; font-size: 12px; margin-bottom: 10px; font-weight: bold;">
                        –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ: –º–∏–Ω–∏–º—É–º 1 —Å–æ—Ü—Å–µ—Ç—å | –î–æ–±–∞–≤–ª–µ–Ω–æ: 0/3
                    </div>

                    <div class="social-links-setup" id="socialLinksContainer">
                        <!-- –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>

                    <div class="social-limit-warning" id="socialLimitWarning">
                        ‚úò <strong>–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:</strong> –î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Å–æ—Ü–∏–∞–ª—å–Ω—É—é —Å–µ—Ç—å
                    </div>

                    <button type="button" class="add-social-btn" id="addSocialBtn" onclick="addSocialLink()">
                        + –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ü–∏–∞–ª—å–Ω—É—é —Å–µ—Ç—å
                    </button>
                </div>

                <!-- –°–µ–∫—Ü–∏—è —Ä–∞–±–æ—Ç -->
                <div class="form-section" id="worksSection">
                    <h4 class="section-title">
                        <svg viewBox="0 0 24 24" fill="#ffcc00" width="20" height="20">
                            <path
                                d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM9 17H7V10H9V17ZM13 17H11V7H13V17ZM17 17H15V13H17V17Z" />
                        </svg>
                        –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç
                    </h4>
                    <div class="works-link-container" id="worksContainer">
                        <!-- –†–∞–±–æ—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                    <div class="works-counter minimum-warning" id="worksCounter">
                        –ú–∏–Ω–∏–º—É–º: 5 —Ä–∞–±–æ—Ç | –î–æ–±–∞–≤–ª–µ–Ω–æ: 0/20 —Ä–∞–±–æ—Ç
                    </div>
                    <div class="work-link-input-container">
                        <div class="work-link-input-group">
                            <input type="text" id="workLinkInput" class="form-input work-link-input"
                                placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å —Ö–æ—Å—Ç–∏–Ω–≥–∞">
                            <button type="button" class="add-work-link-btn" id="addWorkLinkBtn"
                                onclick="addWorkFromLink()">
                                –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–±–æ—Ç—É
                            </button>
                        </div>
                        <div class="work-link-hint">
                            –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è: PostImage, ImgBB, Imgur –∏ –¥—Ä—É–≥–∏–µ —Ö–æ—Å—Ç–∏–Ω–≥–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="skip-btn" onclick="skipProfileSetup()">
                        –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å
                    </button>
                    <button type="submit" class="save-btn" id="saveProfileBtn">
                        –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–∞–±–æ—Ç –≤ –ø—Ä–æ—Ñ–∏–ª–µ -->
    <div id="profileWorksModal" class="profile-works-modal">
        <span class="profile-works-modal-close" onclick="closeProfileWorksModal()">&times;</span>
        <div class="profile-works-modal-content">
            <button class="profile-works-modal-nav profile-works-modal-prev"
                onclick="navigateProfileWork(-1)">&#10094;</button>
            <img id="profileWorksModalImg" class="profile-works-modal-img" src="" alt="–†–∞–±–æ—Ç–∞">
            <button class="profile-works-modal-nav profile-works-modal-next"
                onclick="navigateProfileWork(1)">&#10095;</button>
            <div class="profile-works-modal-counter" id="profileWorksModalCounter"></div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∫–æ–¥–æ–º –ø—Ä–æ—Ñ–∏–ª—è -->
    <div id="codeModal" class="code-modal">
        <div class="code-modal-content">
            <span class="close-modal" onclick="closeCodeModal()">&times;</span>

            <div class="code-modal-header">
                <h3 class="code-modal-title">–í–∞—à –∫–æ–¥ –ø—Ä–æ—Ñ–∏–ª—è –≥–æ—Ç–æ–≤!</h3>
                <p class="code-modal-subtitle">–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–≥–æ –≤ –ø—Ä–µ–¥–ª–æ–∂–∫—É –∫–∞–Ω–∞–ª–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏</p>
            </div>

            <div class="code-action-container">
                <div class="code-hidden" id="codeHidden">
                </div>

                <button class="copy-btn" id="copyCodeBtn" onclick="copyProfileCode()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" />
                    </svg>
                    –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
                </button>

                <div class="success-message" id="successMessage">
                    ‚úî –ö–æ–¥ —É—Å–ø–µ—à–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!
                </div>
            </div>

            <div class="instructions-box">
                <h4 class="instructions-title">–ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ:</h4>
                <ol class="instructions-list">
                    <li>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É <strong>"–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥"</strong> –≤—ã—à–µ</li>
                    <li>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø—Ä–µ–¥–ª–æ–∂–∫—É –∫–∞–Ω–∞–ª–∞
                        <a href="https://t.me/Artemisia_website?direct" class="instructions-link" target="_blank">
                            @Artemisia_website
                        </a>
                    </li>
                    <li>–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ </li>
                    <li>–û–∂–∏–¥–∞–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∞—à–µ–π –∞–Ω–∫–µ—Ç—ã –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞–º–∏</li>
                    <li>–ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∞—à –ø—Ä–æ—Ñ–∏–ª—å –ø–æ—è–≤–∏—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ –∏ –≤ –ª–∏—á–Ω–æ–º –ø—Ä–æ—Ñ–∏–ª–µ –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å—Ç–∞—Ç—É—Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
                    </li>
                </ol>
                <p style="color: #ffcc00; margin-top: 15px; font-size: 0.9em; text-align: center;">
                    ‚è≥ –û–±—ã—á–Ω–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç –æ—Ç 1 –¥–æ 3 –¥–Ω–µ–π
                </p>
            </div>
        </div>
    </div>

    <!-- –õ–∏—á–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å -->
    <div id="personalCabinetModal" class="personal-cabinet-modal">
        <div class="personal-cabinet-content">
            <span class="close-modal" onclick="closePersonalCabinetModal()">&times;</span>

            <div class="personal-cabinet-header">
                <h3 class="personal-cabinet-title">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h3>
                <p class="personal-cabinet-subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∞—à–∏–º –ø—Ä–æ—Ñ–∏–ª–µ–º –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏</p>
            </div>

            <div class="cabinet-content">
                <!-- –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
                <div class="cabinet-profile-section">
                    <div class="cabinet-profile-header">
                        <!-- –ê–≤–∞—Ç–∞—Ä–∫–∞ -->
                        <div class="avatar-with-share">
                            <div class="share-link-btn" onclick="copyProfileLink()"
                                title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" />
                                </svg>
                            </div>
                            <img id="cabinetAvatar" src="" alt="–ê–≤–∞—Ç–∞—Ä" class="cabinet-avatar">
                        </div>

                        <div class="cabinet-user-info">
                            <h2 id="cabinetUsername" class="cabinet-username"></h2>
                            <p id="cabinetUserId" class="cabinet-user-id"></p>
                            <a id="cabinetTelegramLink" href="#" target="_blank" class="cabinet-telegram-link">
                                <img src="https://i.postimg.cc/cJXCqTTc/icons8-48.png" alt="Telegram"
                                    class="cabinet-telegram-icon">
                                <span id="cabinetTelegramText"></span>
                            </a>
                        </div>

                        <!-- –°–¢–ê–¢–£–° –ü–£–ë–õ–ò–ö–ê–¶–ò–ò -->
                        <div class="publication-status" id="publicationStatus">
                            <div class="status-text">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-12S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
                                </svg>
                                –ü—Ä–æ—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏ -->
                <div class="cabinet-section">
                    <h3 class="cabinet-section-title">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M18 16.08C17.24 16.08 16.56 16.38 16.04 16.85L8.91 12.7C8.96 12.47 9 12.24 9 12C9 11.76 8.96 11.53 8.91 11.3L15.96 7.19C16.5 7.69 17.21 8 18 8C19.66 8 21 6.66 21 5C21 3.34 19.66 2 18 2C16.34 2 15 3.34 15 5C15 5.24 15.04 5.47 15.09 5.7L8.04 9.81C7.5 9.31 6.79 9 6 9C4.34 9 3 10.34 3 12C3 13.66 4.34 15 6 15C6.79 15 7.5 14.69 8.04 14.19L15.16 18.35C15.11 18.56 15.08 18.78 15.08 19C15.08 20.61 16.39 21.92 18 21.92C19.61 21.92 20.92 20.61 20.92 19C20.92 17.39 19.61 16.08 18 16.08Z" />
                        </svg>
                        –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏
                    </h3>
                    <div id="cabinetSocialLinks" class="cabinet-social-links">
                        <!-- –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>

                <!-- –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è -->
                <div class="cabinet-section">
                    <h3 class="cabinet-section-title">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-12S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z" />
                        </svg>
                        –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
                    </h3>
                    <div id="cabinetDescription" class="cabinet-description">
                        <!-- –û–ø–∏—Å–∞–Ω–∏–µ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>

                <!-- –†–∞–±–æ—Ç—ã -->
                <div class="cabinet-section">
                    <h3 class="cabinet-section-title">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM9 17H7V10H9V17ZM13 17H11V7H13V17ZM17 17H15V13H17V17Z" />
                        </svg>
                        –ú–æ–∏ —Ä–∞–±–æ—Ç—ã
                    </h3>
                    <button class="cabinet-works-btn" onclick="openCabinetWorksModal()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" />
                        </svg>
                        –û–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å —Ä–∞–±–æ—Ç–∞–º–∏
                    </button>
                </div>
            </div>

            <div class="cabinet-actions">
                <button class="cabinet-action-btn" onclick="editProfile()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" />
                    </svg>
                    –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
                </button>
                <button class="cabinet-action-btn secondary" onclick="closePersonalCabinetModal()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
                    </svg>
                    –ó–∞–∫—Ä—ã—Ç—å
                </button>
                <button class="cabinet-action-btn secondary" onclick="logout()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z" />
                    </svg>
                    –í—ã–π—Ç–∏
                </button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ -->
    <div id="cabinetWorksModal" class="cabinet-works-modal">
        <div class="cabinet-works-content">
            <span class="close-modal" onclick="closeCabinetWorksModal()">&times;</span>

            <div class="cabinet-works-header">
                <h3 class="cabinet-works-title">–ú–æ–∏ —Ä–∞–±–æ—Ç—ã</h3>
                <p class="cabinet-works-subtitle">–í—Å–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã</p>
            </div>

            <div id="cabinetWorksGrid" class="cabinet-works-grid">
                <!-- –†–∞–±–æ—Ç—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–∞–±–æ—Ç –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ -->
    <div id="cabinetFullscreenModal" class="cabinet-fullscreen-modal">
        <span class="cabinet-fullscreen-close" onclick="closeCabinetFullscreenModal()">&times;</span>
        <div class="cabinet-fullscreen-content">
            <button class="cabinet-fullscreen-nav cabinet-fullscreen-prev"
                onclick="navigateCabinetWork(-1)">&#10094;</button>
            <img id="cabinetFullscreenImg" class="cabinet-fullscreen-img" src="" alt="–†–∞–±–æ—Ç–∞">
            <button class="cabinet-fullscreen-nav cabinet-fullscreen-next"
                onclick="navigateCabinetWork(1)">&#10095;</button>
            <div class="cabinet-fullscreen-counter" id="cabinetFullscreenCounter"></div>
        </div>
    </div>

    <!-- –î–∏–∑–∞–π–Ω–µ—Ä—ã -->
    <section>

        <!-- –ê–ª–µ–∫—Å–∏—è -->
        <section id="Alexia">
            <section class="profile-section" data-style="–î–∏–∑–∞–π–Ω" data-prem="true"
                style="background-image: linear-gradient(to right, rgba(30, 30, 30, 0.85), rgba(30, 30, 30, 0.9)), url('')">
                <div class="avatar-container">
                    <div class="avatar-border"></div>
                    <img src="https://i.postimg.cc/K81gkwBL/photo-5226705699080367487-x.jpg" alt="–ê–≤–∞—Ç–∞—Ä"
                        class="avatar">

                </div>

                <div class="profile-info">
                    <h1>–ê–ª–µ–∫—Å–∏—è</h1>
                    <a href="https://t.me/Ha0ruka" class="profile-link">
                        <img src="https://i.postimg.cc/cJXCqTTc/icons8-48.png" alt="Telegram" class="profile-link-icon">
                        @Ha0ruka
                    </a>
                    <p>–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å: –î–∏–∑–∞–π–Ω </p>


                    <div class="social-links">
                        <a href="https://t.me/A0lexyaa0" class="social-link" target="_blank" title="Telegram">
                            <img src="https://i.postimg.cc/cJXCqTTc/icons8-48.png" alt="Telegram" class="social-icon">
                        </a>
                    </div>
                </div>
            </section>

            <h2 class="favorite-works">–ü—É–±–ª–∏–∫–∞—Ü–∏–∏ –∞–≤—Ç–æ—Ä–∞</h2>
            <div class="works-carousel" id="artist1Carousel">
                <div class="works-inner" id="artist1Works">
                    <img src="https://i.postimg.cc/DwQtzWBf/photo-5244699232638725577-y.jpg" class="work-thumb-1"
                        alt="">
                    <img src="https://i.postimg.cc/Pf9GVnCH/photo-5244699232638725578-y.jpg" class="work-thumb-1"
                        alt="">
                    <img src="https://i.postimg.cc/NfH3WCXH/photo-5244699232638725579-y.jpg" class="work-thumb-1"
                        alt="">
                    <img src="https://i.postimg.cc/Cxp3YCC6/photo-5244699232638725580-y.jpg" class="work-thumb-1"
                        alt="">
                    <img src="https://i.postimg.cc/xTxzdnJn/photo-5226705699080367474-y.jpg" class="work-thumb-1"
                        alt="">
                    <img src="https://i.postimg.cc/pVBjgDP9/photo-5226705699080367475-y.jpg" class="work-thumb-2"
                        alt="">
                    <img src="https://i.postimg.cc/d3Jyh0jt/photo-5226705699080367476-y.jpg" class="work-thumb-1"
                        alt="">
                    <img src="https://i.postimg.cc/5NNz16ts/photo-5226705699080367477-y.jpg" class="work-thumb-2"
                        alt="">
                    <img src="https://i.postimg.cc/J0KBZWp3/photo-5226705699080367478-y.jpg" class="work-thumb-2"
                        alt="">
                    <img src="https://i.postimg.cc/13bVpBrd/photo-5226705699080367485-y.jpg" class="work-thumb-2"
                        alt="">
                    <img src="https://i.postimg.cc/K81gkwBL/photo-5226705699080367487-x.jpg" class="work-thumb-2"
                        alt="">
                </div>
                <button class="works-control prev" onclick="prevWork('artist1Works')">&#10094;</button>
                <button class="works-control next" onclick="nextWork('artist1Works')">&#10095;</button>
            </div>
            <button class="show-works-btn" onclick="openModal('modal1')">–û–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å–æ –≤—Å–µ–º–∏ —Ä–∞–±–æ—Ç–∞–º–∏</button>

            <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ —Ö—É–¥–æ–∂–Ω–∏–∫–∞ -->
            <div id="modal1" class="modal">
                <span class="close-btn" onclick="closeModal('modal1')">&times;</span>
                <div class="modal-header">
                    <h2>–ì–∞–ª–µ—Ä–µ—è —Ä–∞–±–æ—Ç</h2>
                </div>
                <div class="modal-content">
                    <img src="https://i.postimg.cc/DwQtzWBf/photo-5244699232638725577-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/Pf9GVnCH/photo-5244699232638725578-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/NfH3WCXH/photo-5244699232638725579-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/Cxp3YCC6/photo-5244699232638725580-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/xTxzdnJn/photo-5226705699080367474-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/pVBjgDP9/photo-5226705699080367475-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/d3Jyh0jt/photo-5226705699080367476-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/5NNz16ts/photo-5226705699080367477-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/J0KBZWp3/photo-5226705699080367478-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/13bVpBrd/photo-5226705699080367485-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/K81gkwBL/photo-5226705699080367487-x.jpg" class="modal-img" alt="">

                </div>
            </div>
        </section>

        <!-- Rikoto -->
        <section id="3">
            <section class="profile-section" data-style="–î–∏–∑–∞–π–Ω">
                <img src="https://i.postimg.cc/6qvPXv17/photo-5305270117032127745-y.jpg" alt="–ê–≤–∞—Ç–∞—Ä" class="avatar">
                <div class="profile-info">
                    <h1>Rikoto </h1>
                    <a href="https://t.me/riikoto" class="profile-link">
                        <img src="https://i.postimg.cc/cJXCqTTc/icons8-48.png" alt="Telegram" class="profile-link-icon">
                        @riikoto
                    </a>
                    <p>–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å: –î–∏–∑–∞–π–Ω </p>
                    <div class="social-links">
                        <a href="https://t.me/portriikoto" class="social-link" target="_blank" title="Telegram">
                            <img src="https://i.postimg.cc/cJXCqTTc/icons8-48.png" alt="Telegram" class="social-icon">
                        </a>
                        <a href="https://pin.it/12X1xzRJa" class="social-link" target="_blank" rel="noopener noreferrer"
                            aria-label="Pin">
                            <img src="https://i.postimg.cc/T3B57t75/icons8-pinterest-48.png" alt="Pin" width="32"
                                height="32" loading="lazy" class="social-icon">
                        </a>

                        <!-- –¢–¢ -->
                        <a href="https://www.tiktok.com/@riikoto?_t=ZS-8wekeUsZwAr&_r=1" class="social-link"
                            target="_blank" rel="noopener noreferrer" aria-label="YouTube">
                            <img src="https://i.postimg.cc/sD6hSj5c/free-icon-video-13670382.png" alt="TT" width="32"
                                height="32" loading="lazy" class="social-icon">
                        </a>

                    </div>
                </div>
            </section>

            <h2 class="favorite-works">–ü—É–±–ª–∏–∫–∞—Ü–∏–∏ –∞–≤—Ç–æ—Ä–∞</h2>
            <div class="works-carousel" id="artist3Carousel">
                <div class="works-inner" id="artist3Works">
                    <img src="https://i.postimg.cc/XYcTq9Nd/photo-5305270117032127729-y.jpg" class="work-thumb-1"
                        alt="">
                    <img src="https://i.postimg.cc/SKSHMjj5/photo-5305270117032127730-y.jpg" class="work-thumb-1"
                        alt="">
                    <img src="https://i.postimg.cc/xd6hyYzd/photo-5305270117032127731-y.jpg" class="work-thumb-1"
                        alt="">
                    <img src="https://i.postimg.cc/hGvpnmXS/photo-5305270117032127748-y.jpg" class="work-thumb-2"
                        alt="">
                    <img src="https://i.postimg.cc/dV44g6tH/photo-5305270117032127749-y.jpg" class="work-thumb-1"
                        alt="">
                    <img src="https://i.postimg.cc/6p9MHgw4/photo-5305270117032127751-y.jpg" class="work-thumb-2"
                        alt="">
                    <img src="https://i.postimg.cc/8PdymN8V/photo-5305270117032127752-y.jpg" class="work-thumb-1"
                        alt="">
                    <img src="https://i.postimg.cc/rpHgwp45/photo-5305270117032127758-y.jpg" class="work-thumb-1"
                        alt="">
                    <img src="https://i.postimg.cc/C1dtctGs/photo-5330442873109346267-y.jpg" class="work-thumb-1"
                        alt="">

                </div>
                <button class="works-control prev" onclick="prevWork('artist3Works')">&#10094;</button>
                <button class="works-control next" onclick="nextWork('artist3Works')">&#10095;</button>
            </div>
            <button class="show-works-btn" onclick="openModal('modal3')">–û–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å–æ –≤—Å–µ–º–∏ —Ä–∞–±–æ—Ç–∞–º–∏</button>

            <!-- Modal -->
            <div id="modal3" class="modal">
                <span class="close-btn" onclick="closeModal('modal3')">&times;</span>
                <div class="modal-header">
                    <h2>–ì–∞–ª–µ—Ä–µ—è —Ä–∞–±–æ—Ç</h2>
                </div>
                <div class="modal-content">
                    <img src="https://i.postimg.cc/XYcTq9Nd/photo-5305270117032127729-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/SKSHMjj5/photo-5305270117032127730-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/xd6hyYzd/photo-5305270117032127731-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/hGvpnmXS/photo-5305270117032127748-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/dV44g6tH/photo-5305270117032127749-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/6p9MHgw4/photo-5305270117032127751-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/8PdymN8V/photo-5305270117032127752-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/rpHgwp45/photo-5305270117032127758-y.jpg" class="modal-img" alt="">
                    <img src="https://i.postimg.cc/C1dtctGs/photo-5330442873109346267-y.jpg" class="modal-img" alt="">


                </div>
            </div>
        </section>



    </section>

    <!-- Image Modal -->
    <div id="imageModal" class="image-modal">
        <span class="image-close-btn" onclick="closeImageModal()">&times;</span>
        <div class="image-modal-content" id="imageModalContent">
            <!-- –°–¢–†–ï–õ–ö–ò –°–ö–†–´–¢–´ –ù–ê –ú–û–ë–ò–õ–¨–ù–´–• –ß–ï–†–ï–ó CSS -->
            <button class="modal-nav-btn modal-prev" onclick="navigateImage(-1)">&#10094;</button>
            <img id="expandedImg" class="image-modal-img" src="" alt="Expanded Image">
            <button class="modal-nav-btn modal-next" onclick="navigateImage(1)">&#10095;</button>
            <div class="image-counter" id="imageCounter"></div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer-container">
        <section class="footer-main-section">
            <a href="../index.html" class="footer-brand-link">
                <img src="https://i.postimg.cc/hjBzgfqS/1.png" alt="Artemisia" class="footer-brand-logo">
            </a>

            <nav class="footer-navigation">
                <a href="AboutUs.html#about-site" class="footer-nav-item">–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –æ —Å–∞–π—Ç–µ</a>
                <a href="https://t.me/Artemisia_publicationBot" class="footer-nav-item">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É</a>
                <a href="https://t.me/Gg00Se" class="footer-nav-item">–°–≤—è–∑—å —Å –≥–∞—Ä–∞–Ω—Ç–æ–º</a>
            </nav>
        </section>

        <section class="footer-secondary-section">
            <p class="footer-copyright">
                –°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏
                <a href="https://t.me/Artemisia_website" class="footer-nav-item" target="_blank">@Artemisia_website</a>
            </p>

            <div class="footer-social-links">
                <!-- Telegram -->
                <a href="https://t.me/Artemisia_website" class="social-media-icon" target="_blank">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM15.53 8.23C15.73 8.13 15.93 8.15 16.09 8.28C16.25 8.41 16.31 8.62 16.25 8.82L14.81 15.44C14.66 16.03 14.3 16.19 13.81 15.93L11.05 13.85L9.8 15.08C9.66 15.22 9.54 15.34 9.28 15.34L9.53 12.54L14.44 8.34C14.66 8.15 14.8 8.24 14.63 8.41L10.63 11.93L7.83 10.91C7.26 10.71 7.25 10.31 7.94 10.01L15.03 7.17C15.5 6.99 15.9 7.21 15.53 8.23Z" />
                    </svg>
                </a>

                <!-- VK -->
                <a href="https://vk.com/artemisia_website" class="social-media-icon" target="_blank">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M15.07 2H8.93C3.33 2 2 3.33 2 8.93V15.07C2 20.67 3.33 22 8.93 22H15.07C20.67 22 22 20.67 22 15.07V8.93C22 3.33 20.67 2 15.07 2M18.15 16.27H16.69C16.14 16.27 15.97 15.82 15 14.83C14.12 14 13.74 13.88 13.53 13.88C13.24 13.88 13.15 13.96 13.15 14.38V15.69C13.15 16.04 13.04 16.26 12.11 16.26C10.57 16.26 8.86 15.32 7.66 13.59C5.85 11.05 5.36 9.13 5.36 8.75C5.36 8.54 5.43 8.34 5.85 8.34H7.32C7.69 8.34 7.83 8.5 7.97 8.9C8.69 11 9.89 12.8 10.38 12.8C10.57 12.8 10.65 12.71 10.65 12.25V10.1C10.6 9.12 10.07 9.03 10.07 8.68C10.07 8.5 10.21 8.34 10.44 8.34H12.73C13.04 8.34 13.15 8.5 13.15 8.88V11.77C13.15 12.08 13.28 12.19 13.38 12.19C13.56 12.19 13.72 12.08 14.05 11.74C15.1 10.57 15.85 8.76 15.85 8.76C15.95 8.55 16.11 8.34 16.48 8.34H17.93C18.37 8.34 18.47 8.58 18.37 8.89C18.19 9.74 16.41 12.25 16.43 12.25C16.27 12.5 16.21 12.61 16.43 12.9C16.58 13.13 17.09 13.55 17.43 13.94C18.05 14.65 18.53 15.24 18.66 15.65C18.77 16.06 18.57 16.27 18.15 16.27Z" />
                    </svg>
                </a>

                <!-- YouTube -->
                <a href="https://youtube.com/@artemisia_website?si=gOfyLPoGY8a4QrFF" class="social-media-icon"
                    target="_blank">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z" />
                    </svg>
                </a>

                <!-- TikTok -->
                <a href="https://www.tiktok.com/@artemisia_web_tt?_t=ZS-8xgqwBPHwfJ&_r=1" class="social-media-icon"
                    target="_blank">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z" />
                    </svg>
                </a>
            </div>
        </section>
    </footer>

    <!-- –°—Ç—Ä–ª–µ–∫–∞ –≤–≤–µ—Ä—Ö -->
    <div id="backToTopBtn" class="back-to-top-btn" onclick="scrollToTop()">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" width="24px" height="24px">
            <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" />
        </svg>
    </div>

    <script>
        // ========== –£–ü–†–ê–í–õ–ï–ù–ò–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø–ú–ò –ò –ü–†–û–§–ò–õ–Ø–ú–ò ==========

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–º
        let socialLinksCount = 0;
        let uploadedWorksCount = 0;
        const MAX_SOCIAL_LINKS = 3;
        const MAX_WORKS = 20;

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–∞–±–æ—Ç –≤ –ø—Ä–æ—Ñ–∏–ª–µ
        let profileWorks = [];
        let currentProfileWorkIndex = 0;

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
        let currentImages = [];
        let currentImageIndex = 0;

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–∞–±–æ—Ç –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
        let cabinetWorks = [];
        let currentCabinetWorkIndex = 0;

        // –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
        let currentUser = null;

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        function checkAuthStatus() {
            const userData = localStorage.getItem('currentUser');
            if (userData) {
                try {
                    currentUser = JSON.parse(userData);
                    updateAuthUI();
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', e);
                    currentUser = null;
                }
            } else {
                currentUser = null;
                updateAuthUI(); // –í–∞–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –¥–∞–∂–µ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç
            }

            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–≤—Ö–æ–¥–∞
            updateRegistrationButton();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç–∞—Ç—É—Å–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        function updateAuthUI() {
            const headerAuth = document.querySelector('.header-auth');
            const mobileAuth = document.querySelector('.mobile-auth');
            const mobileUserProfile = document.querySelector('.mobile-user-profile');
            const drawer = document.getElementById('drawer');

            if (currentUser) {
                // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
                const userProfile = localStorage.getItem('userProfile_' + currentUser.username);
                let profileData = {};

                if (userProfile) {
                    profileData = JSON.parse(userProfile);
                }

                const avatarSrc = profileData.avatar || 'https://i.postimg.cc/Rhz86Z09/photo_5337314107818374848_c.jpg';
                const displayName = profileData.profileName || currentUser.username;
                const telegramNickname = profileData.profileNickname || '@username';

                // Header –¥–ª—è –ü–ö
                headerAuth.innerHTML = `
            <div class="user-profile-container" style="position: relative;">
                <button class="user-profile-btn" onclick="toggleProfileDropdown()">
                    <img src="${avatarSrc}" alt="–ê–≤–∞—Ç–∞—Ä" class="user-avatar">
                    <span class="user-name">${displayName}</span>
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor" style="margin-left: 5px;">
                        <path d="M7 10l5 5 5-5z" />
                    </svg>
                </button>
                <div class="user-profile-dropdown" id="userProfileDropdown">
                    <button class="user-profile-dropdown-item" onclick="openPersonalCabinetModal()">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                        </svg>
                        –õ–∏—á–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å
                    </button>
                    <button class="user-profile-dropdown-item" onclick="editProfile()">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                        </svg>
                        –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                    </button>
                    <div class="user-profile-dropdown-divider"></div>
                    <button class="user-profile-dropdown-item" onclick="logout()">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                        </svg>
                        –í—ã–π—Ç–∏
                    </button>
                </div>
            </div>
        `;

                // –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                if (mobileUserProfile) {
                    mobileUserProfile.style.display = 'flex';
                    mobileUserProfile.querySelector('#mobileUserAvatar').src = avatarSrc;
                    mobileUserProfile.querySelector('#mobileUserName').textContent = displayName;
                    mobileUserProfile.querySelector('#mobileUserTelegram').textContent = telegramNickname;
                }

                if (mobileAuth) {
                    mobileAuth.style.display = 'none';
                }
            } else {
                // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ù–ï –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
                headerAuth.innerHTML = `
            <button class="auth-btn login-btn" onclick="openLoginModal()">–í–æ–π—Ç–∏</button>
            <button class="auth-btn register-btn" onclick="openRegistrationModal()">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
        `;

                // –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ –≤—Ö–æ–¥–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
                if (mobileUserProfile) {
                    mobileUserProfile.style.display = 'none';
                }

                if (mobileAuth) {
                    mobileAuth.style.display = 'flex';
                    mobileAuth.innerHTML = `
                <button class="auth-btn login-btn" onclick="openLoginModal()">–í–æ–π—Ç–∏</button>
                <button class="auth-btn register-btn" onclick="openRegistrationModal()">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
            `;
                }
            }

            // –¢–∞–∫–∂–µ –æ–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
            updateRegistrationButton();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
        function updateCabinetActionsForMobile() {
            const actionsContainer = document.querySelector('.cabinet-actions');
            if (!actionsContainer) return;

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Prem Artist
            if (currentUser) {
                const userFromDB = findUserInDatabase(currentUser.username);
                const isPremArtist = userFromDB && userFromDB.publishedOn === 'prem_artist';

                if (window.innerWidth <= 768) {
                    // –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
                    if (isPremArtist) {
                        actionsContainer.innerHTML = `
                    <button class="cabinet-action-btn" onclick="editProfile()" disabled 
                            style="opacity: 0.6; cursor: not-allowed; background: linear-gradient(45deg, #666, #777);">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10z"/>
                        </svg>
                        –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ
                    </button>
                    <div class="cabinet-bottom-actions">
                        <button class="cabinet-action-btn secondary" onclick="closePersonalCabinetModal()">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                            </svg>
                            –ó–∞–∫—Ä—ã—Ç—å
                        </button>
                        <button class="cabinet-action-btn secondary" onclick="logout()">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                            </svg>
                            –í—ã–π—Ç–∏
                        </button>
                    </div>
                `;
                    } else {
                        // –û–±—ã—á–Ω–∞—è –º–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
                        actionsContainer.innerHTML = `
                    <button class="cabinet-action-btn" onclick="editProfile()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                        </svg>
                        –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
                    </button>
                    <div class="cabinet-bottom-actions">
                        <button class="cabinet-action-btn secondary" onclick="closePersonalCabinetModal()">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                            </svg>
                            –ó–∞–∫—Ä—ã—Ç—å
                        </button>
                        <button class="cabinet-action-btn secondary" onclick="logout()">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                            </svg>
                            –í—ã–π—Ç–∏
                        </button>
                    </div>
                `;
                    }
                }
            }
        }

        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
        window.addEventListener('resize', function () {
            if (document.getElementById('personalCabinetModal').style.display === 'block') {
                updateCabinetActionsForMobile();
            }
        });

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ –º–µ–Ω—é –ø—Ä–æ—Ñ–∏–ª—è
        function toggleProfileDropdown() {
            const dropdown = document.getElementById('userProfileDropdown');
            dropdown.classList.toggle('active');

            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –¥—Ä—É–≥–∏–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –≤—ã–ø–∞–¥–∞—é—â–∏–µ –º–µ–Ω—é
            document.querySelectorAll('.user-profile-dropdown').forEach(menu => {
                if (menu !== dropdown) {
                    menu.classList.remove('active');
                }
            });

            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
            if (dropdown.classList.contains('active')) {
                document.addEventListener('click', closeProfileDropdownOnClickOutside);
            } else {
                document.removeEventListener('click', closeProfileDropdownOnClickOutside);
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
        function closeProfileDropdownOnClickOutside(event) {
            const profileContainer = document.querySelector('.user-profile-container');
            if (!profileContainer.contains(event.target)) {
                document.getElementById('userProfileDropdown').classList.remove('active');
                document.removeEventListener('click', closeProfileDropdownOnClickOutside);
            }
        }

        // –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
        function logout() {
            // –ù–µ —É–¥–∞–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Ç–æ–ª—å–∫–æ –≤—ã—Ö–æ–¥–∏–º –∏–∑ —Å–∏—Å—Ç–µ–º—ã
            currentUser = null;
            localStorage.removeItem('currentUser');
            updateAuthUI();
            closePersonalCabinetModal();
            showProfileSuccess('–í—ã —É—Å–ø–µ—à–Ω–æ –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã');

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –≤—Ö–æ–¥–∞ –≤–º–µ—Å—Ç–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
            updateRegistrationButton();
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
        function updateRegistrationButton() {
            const registerButtons = document.querySelectorAll('.register-btn, .auth-btn.register-btn');
            const loginButtons = document.querySelectorAll('.login-btn, .auth-btn.login-btn');

            if (checkRegistrationStatus()) {
                // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω, –º–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
                registerButtons.forEach(btn => {
                    btn.textContent = '–í–æ–π—Ç–∏';
                    btn.onclick = openLoginModal;
                    btn.style.background = 'linear-gradient(45deg, #4CAF50, #45a049)';
                });

                loginButtons.forEach(btn => {
                    btn.style.display = 'none'; // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –≤—Ö–æ–¥–∞, —Ç.–∫. —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ç–µ–ø–µ—Ä—å –≤–µ–¥–µ—Ç –Ω–∞ –≤—Ö–æ–¥
                });
            } else {
                // –û–±—ã—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
                registerButtons.forEach(btn => {
                    btn.textContent = '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è';
                    btn.onclick = openRegistrationModal;
                    btn.style.background = 'linear-gradient(45deg, #ffcc00, #ffdd33)';
                });

                loginButtons.forEach(btn => {
                    btn.style.display = 'block';
                });
            }
        }

        // ========== –§–£–ù–ö–¶–ò–ò –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò –ò –í–•–û–î–ê ==========

        function openRegistrationModal() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ
            if (checkRegistrationStatus()) {
                // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –≤—Ö–æ–¥
                showRegistrationStatusMessage();
                setTimeout(() => {
                    closeRegistrationModal();
                    openLoginModal();
                }, 2000);
                return;
            }

            const modal = document.getElementById('registrationModal');
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
            document.body.style.position = 'fixed';
            document.body.style.width = '100%';

            // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
            document.getElementById('message').style.display = 'none';
            document.getElementById('registrationCode').value = '';

            // –§–æ–∫—É—Å–∏—Ä—É–µ–º—Å—è –Ω–∞ –ø–æ–ª–µ –≤–≤–æ–¥–∞ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
            setTimeout(() => {
                const input = document.getElementById('registrationCode');
                input.focus();

                // –î–ª—è iOS - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ–∫—É—Å–∞
                if (document.activeElement !== input) {
                    input.setAttribute('style', 'font-size: 16px;');
                    setTimeout(() => input.focus(), 100);
                }
            }, 350);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —Å—Ç–∞—Ç—É—Å–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
        function showRegistrationStatusMessage() {
            const registeredUsers = getRegisteredUsers();

            if (registeredUsers.length > 0) {
                if (registeredUsers.length === 1) {
                    const user = registeredUsers[0];
                    showMessage(`–í—ã —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –∫–∞–∫ "${user.profileName}"! –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ –≤—Ö–æ–¥...`, 'success');
                } else {
                    showMessage(`–ù–∞ —ç—Ç–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ ${registeredUsers.length} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ –≤—Ö–æ–¥...`, 'success');
                }
            } else if (currentUser) {
                showMessage(`–í—ã —É–∂–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã –∫–∞–∫ "${currentUser.profileName}"!`, 'success');
            }
        }

        function closeRegistrationModal() {
            const modal = document.getElementById('registrationModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
            document.body.style.position = 'static';
            document.body.style.width = 'auto';
        }

        function openLoginModal() {
            const modal = document.getElementById('loginModal');
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
            document.body.style.position = 'fixed';
            document.body.style.width = '100%';

            // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
            document.getElementById('loginMessage').style.display = '';
            document.getElementById('loginEmail').value = '';
            document.getElementById('loginPassword').value = '';

            // –§–æ–∫—É—Å–∏—Ä—É–µ–º—Å—è –Ω–∞ –ø–æ–ª–µ –≤–≤–æ–¥–∞
            setTimeout(() => {
                const input = document.getElementById('loginEmail');
                input.focus();

                if (document.activeElement !== input) {
                    input.setAttribute('style', 'font-size: 16px;');
                    setTimeout(() => input.focus(), 100);
                }
            }, 350);
        }

        function closeLoginModal() {
            const modal = document.getElementById('loginModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
            document.body.style.position = 'static';
            document.body.style.width = 'auto';
        }

        function showMessage(text, type) {
            const messageDiv = document.getElementById('message');
            messageDiv.textContent = text;
            messageDiv.className = `message ${type}`;
            messageDiv.style.display = 'block';

            // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ —Å–æ–æ–±—â–µ–Ω–∏—é –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
            if (window.innerWidth <= 768) {
                setTimeout(() => {
                    messageDiv.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center',
                        inline: 'nearest'
                    });
                }, 100);
            }

            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥ (–∫—Ä–æ–º–µ —É—Å–ø–µ—à–Ω—ã—Ö)
            if (type !== 'success') {
                setTimeout(() => {
                    if (messageDiv.style.display === 'block') {
                        messageDiv.style.display = 'none';
                    }
                }, 5000);
            }
        }

        function showLoginMessage(text, type) {
            const messageDiv = document.getElementById('loginMessage');
            messageDiv.textContent = text;
            messageDiv.className = `message ${type}`;
            messageDiv.style.display = 'block';

            // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ —Å–æ–æ–±—â–µ–Ω–∏—é –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
            if (window.innerWidth <= 768) {
                setTimeout(() => {
                    messageDiv.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center',
                        inline: 'nearest'
                    });
                }, 100);
            }

            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥ (–∫—Ä–æ–º–µ —É—Å–ø–µ—à–Ω—ã—Ö)
            if (type !== 'success') {
                setTimeout(() => {
                    if (messageDiv.style.display === 'block') {
                        messageDiv.style.display = 'none';
                    }
                }, 5000);
            }
        }

        function showWelcomeNotification() {
            // –°–æ–∑–¥–∞–µ–º –∫—Ä–∞—Å–∏–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(45deg, #4CAF50, #45a049);
                color: white;
                padding: 15px 20px;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                z-index: 10000;
                max-width: 300px;
                font-family: "Comfortaa", sans-serif;
                animation: slideInRight 0.5s ease-out;
            `;

            notification.innerHTML = `
                <div style="font-weight: bold; margin-bottom: 5px;">üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</div>
                <div style="font-size: 0.9em;">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Artemisia –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!</div>
            `;

            document.body.appendChild(notification);

            // –£–¥–∞–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.5s ease-in';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 500);
            }, 5000);
        }

        // –î–æ–±–∞–≤–ª—è–µ–º CSS –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideInRight {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
            @keyframes slideOutRight {
                from {
                    transform: translateX(0);
                    opacity: 1;
                }
                to {
                    transform: translateX(100%);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);


        // ========== –û–ë–†–ê–ë–û–¢–ö–ê URL-–ü–ê–†–ê–ú–ï–¢–†–û–í –î–õ–Ø –û–¢–ö–†–´–¢–ò–Ø –ú–û–î–ê–õ–¨–ù–´–• –û–ö–û–ù ==========

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ URL
        function getUrlParameter(name) {
            name = name.replace(/[\[\]]/g, '\\$&');
            const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');
            const results = regex.exec(window.location.href);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º URL
        function openModalFromUrl() {
            const modalParam = getUrlParameter('modal');

            if (modalParam === 'login') {
                openLoginModal();
            } else if (modalParam === 'register') {
                openRegistrationModal();
            } else if (modalParam === 'profile') {
                openProfileSetupModal();
            } else if (modalParam === 'cabinet') {
                openPersonalCabinetModal();
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è URL –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function updateUrl(parameters) {
            const url = new URL(window.location);

            // –£–¥–∞–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
            const paramsToRemove = ['modal', 'action', 'tab'];
            paramsToRemove.forEach(param => {
                url.searchParams.delete(param);
            });

            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
            Object.keys(parameters).forEach(key => {
                if (parameters[key]) {
                    url.searchParams.set(key, parameters[key]);
                }
            });

            window.history.replaceState({}, '', url);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Å—ã–ª–æ–∫ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
        function generateModalLink(modalType) {
            const url = new URL(window.location);
            url.searchParams.set('modal', modalType);
            return url.toString();
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
        function openRegistrationModalWithUrl() {
            openRegistrationModal();
            updateUrl({ modal: 'register' });
        }

        function openLoginModalWithUrl() {
            openLoginModal();
            updateUrl({ modal: 'login' });
        }

        function openProfileSetupModalWithUrl() {
            openProfileSetupModal();
            updateUrl({ modal: 'profile' });
        }

        function openPersonalCabinetModalWithUrl() {
            openPersonalCabinetModal();
            updateUrl({ modal: 'cabinet' });
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
        function closeRegistrationModalWithUrl() {
            closeRegistrationModal();
            updateUrl({});
        }

        function closeLoginModalWithUrl() {
            closeLoginModal();
            updateUrl({});
        }

        function closeProfileSetupModalWithUrl() {
            closeProfileSetupModal();
            updateUrl({});
        }

        function closePersonalCabinetModalWithUrl() {
            closePersonalCabinetModal();
            updateUrl({});
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function () {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
            initImageModal();

            // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã URL –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            setTimeout(openModalFromUrl, 100);

            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
            updateModalLinks();
        });

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫ –Ω–∞ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
        function updateModalLinks() {
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Å—ã–ª–∫–∏ –≤ header
            const headerLoginBtn = document.querySelector('.header-auth .login-btn');
            const headerRegisterBtn = document.querySelector('.header-auth .register-btn');

            if (headerLoginBtn) {
                headerLoginBtn.onclick = openLoginModalWithUrl;
            }
            if (headerRegisterBtn) {
                headerRegisterBtn.onclick = openRegistrationModalWithUrl;
            }

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Å—ã–ª–∫–∏ –≤ –º–æ–±–∏–ª—å–Ω–æ–º –º–µ–Ω—é
            const mobileLoginBtn = document.querySelector('.mobile-auth .login-btn');
            const mobileRegisterBtn = document.querySelector('.mobile-auth .register-btn');

            if (mobileLoginBtn) {
                mobileLoginBtn.onclick = openLoginModalWithUrl;
            }
            if (mobileRegisterBtn) {
                mobileRegisterBtn.onclick = openRegistrationModalWithUrl;
            }

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Å—ã–ª–∫–∏ –≤ –¥—Ä—É–≥–∏—Ö –º–µ—Å—Ç–∞—Ö (–µ—Å–ª–∏ –µ—Å—Ç—å)
            const profileSetupLinks = document.querySelectorAll('[onclick*="openProfileSetupModal"]');
            profileSetupLinks.forEach(link => {
                link.onclick = openProfileSetupModalWithUrl;
            });

            const cabinetLinks = document.querySelectorAll('[onclick*="openPersonalCabinetModal"]');
            cabinetLinks.forEach(link => {
                link.onclick = openPersonalCabinetModal; // –£–±—Ä–∞–ª–∏ WithUrl
            });
        }

        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∑–∞–∫—Ä—ã—Ç–∏—è
        document.addEventListener('DOMContentLoaded', function () {
            // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
            const closeRegistrationBtn = document.querySelector('#registrationModal .close-modal');
            const closeLoginBtn = document.querySelector('#loginModal .close-modal');
            const closeProfileSetupBtn = document.querySelector('#profileSetupModal .close-modal');
            const closeCabinetBtn = document.querySelector('#personalCabinetModal .close-modal');

            if (closeRegistrationBtn) {
                closeRegistrationBtn.onclick = closeRegistrationModalWithUrl;
            }
            if (closeLoginBtn) {
                closeLoginBtn.onclick = closeLoginModalWithUrl;
            }
            if (closeProfileSetupBtn) {
                closeProfileSetupBtn.onclick = closeProfileSetupModalWithUrl;
            }
            if (closeCabinetBtn) {
                closeCabinetBtn.onclick = closePersonalCabinetModalWithUrl;
            }
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥" –≤ –±—Ä–∞—É–∑–µ—Ä–µ
        window.addEventListener('popstate', function (event) {
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ù–∞–∑–∞–¥"
            closeAllModals();
            // –°–Ω–æ–≤–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º URL –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
            setTimeout(openModalFromUrl, 50);
        });

        function closeAllModals() {
            closeRegistrationModal();
            closeLoginModal();
            closeProfileSetupModal();
            closePersonalCabinetModal();
            updateUrl({});
        }

        // –û–°–ù–û–í–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò
        function submitRegistration(event) {
            event.preventDefault();

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ
            if (currentUser) {
                showMessage('–í—ã —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã!', 'success');
                closeRegistrationModal();
                return;
            }

            const code = document.getElementById('registrationCode').value.trim();
            const submitBtn = document.getElementById('submitBtn');

            if (!code) {
                showMessage('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è', 'error');
                document.getElementById('registrationCode').focus();
                return;
            }

            submitBtn.disabled = true;
            submitBtn.textContent = '–ü—Ä–æ–≤–µ—Ä–∫–∞...';

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ - –¢–û–õ–¨–ö–û 888666
            setTimeout(() => {
                if (code === '888666') {
                    showMessage('–ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –∞–Ω–∫–µ—Ç—É.', 'success');

                    // –ß–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã –∑–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫—É –ø—Ä–æ—Ñ–∏–ª—è
                    setTimeout(() => {
                        closeRegistrationModal();
                        openProfileSetupModal();
                    }, 2000);
                } else {
                    showMessage('–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è. –í–≤–µ–¥–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–¥: 888666', 'error');
                    submitBtn.disabled = false;
                    submitBtn.textContent = '–ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∞–Ω–∫–µ—Ç–µ';
                    document.getElementById('registrationCode').focus();
                    document.getElementById('registrationCode').select();
                }
            }, 1500);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
        function checkRegistrationStatus() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤ localStorage
            const registeredUsers = Object.keys(localStorage).filter(key =>
                key.startsWith('user_') && key !== 'currentUser'
            );

            return registeredUsers.length > 0 || currentUser !== null;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        function getRegisteredUsers() {
            const users = [];
            Object.keys(localStorage).forEach(key => {
                if (key.startsWith('user_') && key !== 'currentUser') {
                    try {
                        const userData = JSON.parse(localStorage.getItem(key));
                        users.push({
                            id: key.replace('user_', ''),
                            username: userData.username,
                            profileName: userData.profileName
                        });
                    } catch (e) {
                        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', key, e);
                    }
                }
            });
            return users;
        }

        // –§–£–ù–ö–¶–ò–Ø –í–•–û–î–ê
        function submitLogin(event) {
            event.preventDefault();

            const username = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;
            const loginBtn = document.getElementById('loginBtn');

            if (!username || !password) {
                showLoginMessage('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', 'error');
                return;
            }

            loginBtn.disabled = true;
            loginBtn.textContent = '–ü—Ä–æ–≤–µ—Ä–∫–∞...';

            setTimeout(() => {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
                const user = findUserInDatabase(username);

                if (user) {
                    // –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ä–æ–ª—è
                    let isPasswordValid = false;

                    // –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–æ–≤–µ—Ä—è–µ–º encryptedPassword
                    if (user.encryptedPassword) {
                        isPasswordValid = verifyEncryptedPassword(user.encryptedPassword, password);
                    }
                    // –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–æ–≤–µ—Ä—è–µ–º userPassword (–µ—Å–ª–∏ –µ—Å—Ç—å)
                    else if (user.userPassword) {
                        // –†–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ–º –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º
                        const decrypted = decryptPassword(user.userPassword);
                        if (decrypted && decrypted === password) {
                            isPasswordValid = true;
                        }
                    }

                    if (isPasswordValid) {
                        // –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥
                        const userData = {
                            username: username,
                            registrationDate: user.registrationDate || new Date().toISOString(),
                            profileComplete: true,
                            profileName: user.profileName,
                            profileNickname: user.profileNickname,
                            hasPassword: true
                        };

                        localStorage.setItem('currentUser', JSON.stringify(userData));

                        // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ —Å localStorage –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã
                        syncUserDataToLocalStorage(user);

                        currentUser = userData;
                        updateAuthUI();

                        showLoginMessage('–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ!', 'success');

                        setTimeout(() => {
                            closeLoginModal();
                            openPersonalCabinetModal();
                        }, 1500);
                    } else {
                        showLoginMessage('–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å', 'error');
                        loginBtn.disabled = false;
                        loginBtn.textContent = '–í–æ–π—Ç–∏';
                    }
                } else {
                    showLoginMessage('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
                    loginBtn.disabled = false;
                    loginBtn.textContent = '–í–æ–π—Ç–∏';
                }
            }, 1000);
        }

        function syncUserDataToLocalStorage(userData) {
            if (!userData || !userData.username) return false;

            try {
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å –≤ localStorage
                localStorage.setItem('userProfile_' + userData.username, JSON.stringify(userData));

                // –°–æ–∑–¥–∞–µ–º —É–ø—Ä–æ—â–µ–Ω–Ω—É—é –∑–∞–ø–∏—Å—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                const userInfo = {
                    username: userData.username,
                    registrationDate: userData.registrationDate || new Date().toISOString(),
                    profileComplete: true,
                    profileName: userData.profileName,
                    profileNickname: userData.profileNickname,
                    hasPassword: true,
                    isFromDatabase: true
                };

                localStorage.setItem('user_' + userData.username, JSON.stringify(userInfo));

                console.log(`‚úÖ –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${userData.username} —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö`);
                return true;
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:', error);
                return false;
            }
        }

        // –§–£–ù–ö–¶–ò–ò –î–õ–Ø –ú–û–î–ï–†–ê–¢–û–†–û–í (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö)

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (–¥–ª—è –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤)
        function addEncryptedUserPassword(username, encryptedPassword) {
            if (!username || !encryptedPassword) {
                console.error('–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è');
                return false;
            }

            // –ò—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
            const user = findUserInDatabase(username);

            if (user) {
                // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å —Å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º
                user.encryptedPassword = encryptedPassword;
                user.hasPassword = true;

                // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –∑–¥–µ—Å—å –±—ã–ª –±—ã –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä)
                userDatabase[username] = user;

                console.log(`‚úÖ –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å –¥–æ–±–∞–≤–ª–µ–Ω –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ${username}`);

                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                updateUserPasswordStatus(username, true);

                return true;
            } else {
                console.error(`–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ${username} –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö`);
                return false;
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –ø–∞—Ä–æ–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function updateUserPasswordStatus(username, hasPassword) {
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ localStorage –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
            const userProfile = localStorage.getItem('userProfile_' + username);
            if (userProfile) {
                const profileData = JSON.parse(userProfile);
                profileData.hasPassword = hasPassword;
                localStorage.setItem('userProfile_' + username, JSON.stringify(profileData));
            }

            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å–ª–∏ –æ–Ω –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
            if (currentUser && currentUser.username === username) {
                currentUser.hasPassword = hasPassword;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –ø–∞—Ä–æ–ª—è
        function checkPasswordStatus(username) {
            const user = findUserInDatabase(username);
            if (user) {
                return {
                    hasPassword: !!user.encryptedPassword,
                    isEncrypted: true
                };
            }
            return { hasPassword: false, isEncrypted: false };
        }


        // ========== –ò–ù–°–¢–†–£–ö–¶–ò–ò –î–õ–Ø –ú–û–î–ï–†–ê–¢–û–†–û–í ==========

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞–º
        function showModeratorInstructions() {
            const usersWithoutPasswords = getUsersWithoutPasswords();

            console.log(`
=== –ò–ù–°–¢–†–£–ö–¶–ò–Ø –î–õ–Ø –ú–û–î–ï–†–ê–¢–û–†–ê ===

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±–µ–∑ –ø–∞—Ä–æ–ª–µ–π (${usersWithoutPasswords.length}):
${usersWithoutPasswords.map(user => `- ${user}`).join('\n')}

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
addUserPassword("user_id", "password")

–ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª—è:
publishUserProfile("user_id")

–ü—Ä–∏–º–µ—Ä:
addUserPassword("user_abc123", "mypassword123")
publishUserProfile("user_abc123")
    `);
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ (–≤ –∫–æ–Ω—Å–æ–ª–∏)
        document.addEventListener('DOMContentLoaded', function () {
            setTimeout(showModeratorInstructions, 2000);
        });

        // ========== –§–£–ù–ö–¶–ò–ò –õ–ò–ß–ù–û–ì–û –ö–ê–ë–ò–ù–ï–¢–ê ==========

        function openPersonalCabinetModal() {
            if (!currentUser) {
                openLoginModal();
                return;
            }

            const modal = document.getElementById('personalCabinetModal');
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';

            // –î–æ–±–∞–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç —Å—Ç–∞—Ç—É—Å–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
            updatePersonalCabinetHTML();

            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è
            loadPersonalCabinetData();
        }

        function closePersonalCabinetModal() {
            const modal = document.getElementById('personalCabinetModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function loadCabinetSocialLinks(socialLinks) {
            const container = document.getElementById('cabinetSocialLinks');
            container.innerHTML = '';

            if (socialLinks && socialLinks.length > 0) {
                socialLinks.forEach(link => {
                    const socialLink = document.createElement('a');
                    socialLink.href = getSocialPrefix(link.platform) + link.username;
                    socialLink.target = '_blank';
                    socialLink.className = 'cabinet-social-link';

                    const iconSrc = getSocialIconSrc(link.platform);
                    socialLink.innerHTML = `
                <img src="${iconSrc}" alt="${link.platform}" class="cabinet-social-icon">
                <span>${link.username}</span>
            `;

                    container.appendChild(socialLink);
                });
            } else {
                container.innerHTML = '<p style="color: #aaa; text-align: center;">–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã</p>';
            }
        }

        function getSocialIconSrc(platform) {
            const icons = {
                'telegram': 'https://i.postimg.cc/cJXCqTTc/icons8-48.png',
                'instagram': 'https://i.postimg.cc/yNzgZcft/–∏–Ω—Å—Ç.png',
                'pinterest': 'https://i.postimg.cc/T3B57t75/icons8-pinterest-48.png',
                'youtube': 'https://i.postimg.cc/fW5tnzqN/youtube_(1).png',
                'vk': 'https://i.postimg.cc/cHhQbQ8q/–≤–∫.png',
                
            };

            return icons[platform] || 'https://i.postimg.cc/cJXCqTTc/icons8-48.png';
        }


        function loadCabinetDescription(description) {
            const container = document.getElementById('cabinetDescription');

            if (description && description.trim() !== '') {
                // –î–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –Ω–∞—á–∞–ª–æ —Ç–µ–∫—Å—Ç–∞
                container.textContent = description.length > 200 ?
                    description.substring(0, 200) + '...' : description;
                container.classList.remove('premium-locked');
                container.classList.add('free-tier'); // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
            } else {
                container.innerHTML = `
            <div class="premium-locked">
                <div class="premium-icon">üîí</div>
                <p class="premium-text">–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–µ–º–∏—É–º-–≤–µ—Ä—Å–∏–∏</p>
            </div>
        `;
            }
        }

        function loadCabinetWorks(works) {
            const container = document.getElementById('cabinetWorksGrid');
            container.innerHTML = '';

            if (works && works.length > 0) {
                works.forEach(work => {
                    const workItem = document.createElement('div');
                    workItem.className = 'cabinet-work-item';
                    workItem.innerHTML = `<img src="${work}" alt="–†–∞–±–æ—Ç–∞" onclick="openCabinetFullscreenModal('${work}')">`;
                    container.appendChild(workItem);
                });
            } else {
                container.innerHTML = '<p style="color: #aaa; text-align: center; grid-column: 1 / -1;">–†–∞–±–æ—Ç—ã –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã</p>';
            }
        }

        function openCabinetWorksModal() {
            const modal = document.getElementById('cabinetWorksModal');
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeCabinetWorksModal() {
            const modal = document.getElementById('cabinetWorksModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // ========== –§–£–ù–ö–¶–ò–ò –î–õ–Ø –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–û–ì–û –ü–†–û–°–ú–û–¢–†–ê –†–ê–ë–û–¢ –í –õ–ò–ß–ù–û–ú –ö–ê–ë–ò–ù–ï–¢–ï ==========

        function openCabinetFullscreenModal(workSrc) {
            // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ —Ä–∞–±–æ—Ç—ã –∏–∑ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞
            const worksContainer = document.getElementById('cabinetWorksGrid');
            const workItems = worksContainer.querySelectorAll('.cabinet-work-item img');

            // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
            cabinetWorks = Array.from(workItems).map(img => img.src);

            // –ù–∞—Ö–æ–¥–∏–º –∏–Ω–¥–µ–∫—Å —Ç–µ–∫—É—â–µ–π —Ä–∞–±–æ—Ç—ã
            currentCabinetWorkIndex = cabinetWorks.indexOf(workSrc);

            if (currentCabinetWorkIndex === -1) {
                currentCabinetWorkIndex = 0;
            }

            // –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            const modal = document.getElementById('cabinetFullscreenModal');
            const modalImg = document.getElementById('cabinetFullscreenImg');

            modalImg.src = cabinetWorks[currentCabinetWorkIndex];
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫
            updateCabinetFullscreenCounter();

            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            setupCabinetFullscreenModalEvents();
        }


        function closeCabinetFullscreenModal() {
            const modal = document.getElementById('cabinetFullscreenModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';

            // –£–¥–∞–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            removeCabinetFullscreenModalEvents();
        }

        function navigateCabinetWork(direction) {
            if (cabinetWorks.length === 0 || cabinetWorks.length === 1) return;

            currentCabinetWorkIndex += direction;

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥—Ä–∞–Ω–∏—Ü—ã
            if (currentCabinetWorkIndex < 0) {
                currentCabinetWorkIndex = cabinetWorks.length - 1;
            } else if (currentCabinetWorkIndex >= cabinetWorks.length) {
                currentCabinetWorkIndex = 0;
            }

            const modalImg = document.getElementById('cabinetFullscreenImg');

            // –ü–ª–∞–≤–Ω–∞—è —Å–º–µ–Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            modalImg.style.opacity = '0';

            setTimeout(() => {
                modalImg.src = cabinetWorks[currentCabinetWorkIndex];
                modalImg.style.opacity = '1';

                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫
                updateCabinetFullscreenCounter();
            }, 200);
        }


        function updateCabinetFullscreenCounter() {
            const counter = document.getElementById('cabinetFullscreenCounter');
            if (cabinetWorks.length > 1) {
                counter.textContent = `${currentCabinetWorkIndex + 1} / ${cabinetWorks.length}`;
                counter.style.display = 'block';

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç—Ä–µ–ª–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
                document.querySelectorAll('.cabinet-fullscreen-nav').forEach(btn => {
                    btn.style.display = 'flex';
                });
            } else {
                counter.style.display = 'none';

                // –°–∫—Ä—ã–≤–∞–µ–º —Å—Ç—Ä–µ–ª–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
                document.querySelectorAll('.cabinet-fullscreen-nav').forEach(btn => {
                    btn.style.display = 'none';
                });
            }
        }

        // ========== –î–û–ë–ê–í–ò–¢–¨ –í CSS –î–õ–Ø –ö–û–†–†–ï–ö–¢–ù–û–ì–û –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø –°–¢–†–ï–õ–û–ö ==========

        // –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–∏ —Å—Ç–∏–ª–∏ –≤ –≤–∞—à CSS
        const navigationFixStyles = `
@media (min-width: 769px) {
    .modal-nav-btn,
    .profile-works-modal-nav,
    .cabinet-fullscreen-nav {
        display: flex !important;
        align-items: center;
        justify-content: center;
    }
}

@media (max-width: 768px) {
    .modal-nav-btn,
    .profile-works-modal-nav,
    .cabinet-fullscreen-nav {
        display: none !important;
    }
}

/* –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π */
.image-modal-img,
.profile-works-modal-img,
.cabinet-fullscreen-img {
    transition: opacity 0.3s ease-in-out;
}
`;

        // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç
        const styleElement = document.createElement('style');
        styleElement.textContent = navigationFixStyles;
        document.head.appendChild(styleElement);

        function setupCabinetFullscreenModalEvents() {
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (—Ç–æ–ª—å–∫–æ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–æ–≤)
            if (window.innerWidth > 768) {
                document.addEventListener('keydown', handleCabinetFullscreenKeydown);
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Å–≤–∞–π–ø–∞ (—Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö)
            const modalContent = document.querySelector('.cabinet-fullscreen-content');
            modalContent.addEventListener('touchstart', handleCabinetFullscreenTouchStart, { passive: false });
            modalContent.addEventListener('touchmove', handleCabinetFullscreenTouchMove, { passive: false });
            modalContent.addEventListener('touchend', handleCabinetFullscreenTouchEnd);
        }

        function removeCabinetFullscreenModalEvents() {
            document.removeEventListener('keydown', handleCabinetFullscreenKeydown);

            const modalContent = document.querySelector('.cabinet-fullscreen-content');
            modalContent.removeEventListener('touchstart', handleCabinetFullscreenTouchStart);
            modalContent.removeEventListener('touchmove', handleCabinetFullscreenTouchMove);
            modalContent.removeEventListener('touchend', handleCabinetFullscreenTouchEnd);
        }

        function handleCabinetFullscreenKeydown(e) {
            if (e.key === 'Escape') {
                closeCabinetFullscreenModal();
            } else if (e.key === 'ArrowLeft') {
                navigateCabinetWork(-1);
            } else if (e.key === 'ArrowRight') {
                navigateCabinetWork(1);
            }
        }

        let cabinetFullscreenTouchStartX = 0;
        let cabinetFullscreenTouchEndX = 0;

        function handleCabinetFullscreenTouchStart(e) {
            cabinetFullscreenTouchStartX = e.touches[0].clientX;
            e.preventDefault();
        }

        function handleCabinetFullscreenTouchMove(e) {
            if (!cabinetFullscreenTouchStartX) return;
            cabinetFullscreenTouchEndX = e.touches[0].clientX;
            const diff = cabinetFullscreenTouchStartX - cabinetFullscreenTouchEndX;

            if (Math.abs(diff) > 10) {
                e.preventDefault();
            }
        }

        function handleCabinetFullscreenTouchEnd() {
            if (!cabinetFullscreenTouchStartX || !cabinetFullscreenTouchEndX) return;

            const diff = cabinetFullscreenTouchStartX - cabinetFullscreenTouchEndX;
            const threshold = 50;

            if (diff > threshold) {
                navigateCabinetWork(1);
            } else if (diff < -threshold) {
                navigateCabinetWork(-1);
            }

            cabinetFullscreenTouchStartX = 0;
            cabinetFullscreenTouchEndX = 0;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
        function editProfile() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Prem Artist
            if (currentUser) {
                const userFromDB = findUserInDatabase(currentUser.username);
                const isPremArtist = userFromDB && userFromDB.publishedOn === 'prem_artist';

                if (isPremArtist) {
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤–º–µ—Å—Ç–æ –æ—Ç–∫—Ä—ã—Ç–∏—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                    alert('–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Prem Artist.');
                    return;
                }
            }

            closePersonalCabinetModal();
            openProfileSetupModal();

            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
            setTimeout(() => {
                loadExistingProfile();
            }, 300);
        }

        // ========== –§–£–ù–ö–¶–ò–ò –ù–ê–°–¢–†–û–ô–ö–ò –ü–†–û–§–ò–õ–Ø ==========

        function openProfileSetupModal() {
            const modal = document.getElementById('profileSetupModal');
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
            initializeProfileSetup();

            // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –∑–∞–≥—Ä—É–∂–∞–µ–º –µ–≥–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ—Ñ–∏–ª—å
            if (currentUser) {
                setTimeout(() => {
                    loadExistingProfile();
                }, 100);
            }

            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è
            const passwordToggle = document.querySelector('#passwordSection .password-toggle');
            if (passwordToggle) {
                passwordToggle.classList.remove('show');
                passwordToggle.classList.add('hide');
                passwordToggle.setAttribute('title', '–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä–æ–ª—å');

                const passwordInput = document.getElementById('profilePassword');
                if (passwordInput) {
                    passwordInput.type = 'password';
                }
            }
        }

        // ========== –°–ò–°–¢–ï–ú–ê –®–ò–§–†–û–í–ê–ù–ò–Ø –ü–ê–†–û–õ–ï–ô ==========

        // –ö–ª—é—á –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–º –∏ —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
        const ENCRYPTION_KEY = 'artemisia_secure_key_2024';

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª—è
        function encryptPassword(password) {
            try {
                // –ü—Ä–æ—Å—Ç–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ Base64 —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º —Å–æ–ª–∏
                const salt = Math.random().toString(36).substring(2, 15);
                const encrypted = btoa(password + '::' + salt + '::' + ENCRYPTION_KEY);
                return encrypted;
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª—è:', error);
                return null;
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –ø–∞—Ä–æ–ª—è
        function decryptPassword(encryptedPassword) {
            try {
                const decrypted = atob(encryptedPassword);
                const parts = decrypted.split('::');

                if (parts.length === 3 && parts[2] === ENCRYPTION_KEY) {
                    return parts[0]; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–æ–ª—å–∫–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å
                }
                return null;
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –¥–µ—à–∏—Ñ—Ä–æ–≤–∫–∏ –ø–∞—Ä–æ–ª—è:', error);
                return null;
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ä–æ–ª—è –±–µ–∑ –µ–≥–æ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏
        function verifyEncryptedPassword(encryptedPassword, inputPassword) {
            try {
                const decrypted = atob(encryptedPassword);
                const parts = decrypted.split('::');

                if (parts.length === 3 && parts[2] === ENCRYPTION_KEY) {
                    const originalPassword = parts[0];
                    return originalPassword === inputPassword;
                }
                return false;
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ä–æ–ª—è:', error);
                return false;
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
        function createEncryptedProfile(profileData, username, userPassword) {
            // –®–∏—Ñ—Ä—É–µ–º –ø–∞—Ä–æ–ª—å
            const encryptedPassword = encryptPassword(userPassword);

            // –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å —Å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º
            const profileId = profileData.profileName.toLowerCase().replace(/\s+/g, '');

            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ–¥ –ø—Ä–æ—Ñ–∏–ª—è —Å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º
            const profileCode = generateProfileCodeWithEncryption(profileData, username, encryptedPassword);

            return {
                username: username,
                profileData: profileData,
                encryptedPassword: encryptedPassword,
                profileCode: profileCode
            };
        }


        // ========== –ü–ê–ù–ï–õ–¨ –ú–û–î–ï–†–ê–¢–û–†–ê –° –ò–ù–§–û–†–ú–ê–¶–ò–ï–ô –û –ü–û–°–¢–û–Ø–ù–ù–´–• ID ==========

        function showModeratorPanel() {
            const pendingUsers = getPendingUsers();

            console.log(`
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë           –ü–ê–ù–ï–õ–¨ –ú–û–î–ï–†–ê–¢–û–†–ê                   ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–∂–∏–¥–∞–µ—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏–∏: ${pendingUsers.length}
‚ïë –°–∏—Å—Ç–µ–º–∞: –ü–û–°–¢–û–Ø–ù–ù–´–ï ID (–Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∏–∫–Ω–µ–π–º–∞)
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
    `);

            pendingUsers.forEach((user, index) => {
                const nickname = user.id.split('_')[1]; // –ò–∑–≤–ª–µ–∫–∞–µ–º –Ω–∏–∫–Ω–µ–π–º –∏–∑ ID

                console.log(`
${index + 1}. ${user.name}
   ‚îú‚îÄ User ID: ${user.id}
   ‚îú‚îÄ –ù–∏–∫–Ω–µ–π–º: ${nickname}
   ‚îú‚îÄ Telegram: ${user.telegram}
   ‚îú‚îÄ –ü–∞—Ä–æ–ª—å: ${user.password}
   ‚îú‚îÄ –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å: ${user.style}
   ‚îú‚îÄ –†–∞–±–æ—Ç: ${user.worksCount}
   ‚îú‚îÄ –°–æ—Ü. —Å–µ—Ç–µ–π: ${user.socialCount}
   ‚îî‚îÄ –°—Ç–∞—Ç—É—Å: ${user.hasPassword ? '‚úÖ –ü–∞—Ä–æ–ª—å –¥–æ–±–∞–≤–ª–µ–Ω' : '‚ùå –û–∂–∏–¥–∞–µ—Ç –ø–∞—Ä–æ–ª—å'}
   
   –ö–û–ú–ê–ù–î–´ –î–õ–Ø –ê–ö–¢–ò–í–ê–¶–ò–ò:
   addUserPassword("${user.id}", "${user.password}");
   publishUserProfile("${user.id}");
        `);
            });

            if (pendingUsers.length === 0) {
                console.log('‚úÖ –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã!');
            }


        }

        function unlockBasicInfoFields() {
            const nameInput = document.getElementById('profileName');
            const nicknameInput = document.getElementById('profileNickname');
            const styleSelect = document.getElementById('profileStyle');
            const customStyleInput = document.getElementById('profileCustomStyle');

            // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –ø–æ–ª—è
            nameInput.readOnly = false;
            nicknameInput.readOnly = false;
            styleSelect.disabled = false;

            // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å—Ç–∏–ª–∏
            nameInput.style.backgroundColor = '';
            nameInput.style.color = '';
            nameInput.style.cursor = '';

            nicknameInput.style.backgroundColor = '';
            nicknameInput.style.color = '';
            nicknameInput.style.cursor = '';

            styleSelect.style.backgroundColor = '';
            styleSelect.style.color = '';
            styleSelect.style.cursor = '';

            customStyleInput.style.backgroundColor = '';
            customStyleInput.style.color = '';
            customStyleInput.style.cursor = '';

            // –£–±–∏—Ä–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫–∏ –æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ
            removeLockedFieldHints();
        }

        function removeLockedFieldHints() {
            // –£–¥–∞–ª—è–µ–º –ø–æ–¥—Å–∫–∞–∑–∫–∏ —Å –ø–æ–ª–µ–π
            document.querySelectorAll('.locked-field-hint').forEach(hint => {
                hint.remove();
            });

            // –£–¥–∞–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            const infoMessage = document.querySelector('.locked-info-message');
            if (infoMessage) {
                infoMessage.remove();
            }

            // –£–¥–∞–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
            document.querySelectorAll('.locked-indicator').forEach(indicator => {
                indicator.remove();
            });
        }


        function closeProfileSetupModal() {
            const modal = document.getElementById('profileSetupModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function initializeProfileSetup() {
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫–∏
            socialLinksCount = 0;
            uploadedWorksCount = 0;

            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è
            const userProfile = localStorage.getItem('userProfile_' + (currentUser ? currentUser.username : 'guest'));
            if (userProfile) {
                const profileData = JSON.parse(userProfile);

                // –ó–∞–ø–æ–ª–Ω—è–µ–º –ø–æ–ª—è —Ñ–æ—Ä–º—ã
                document.getElementById('profileName').value = profileData.profileName || '';
                document.getElementById('profileNickname').value = profileData.profileNickname || '';
                document.getElementById('profileStyle').value = profileData.profileStyle || '';

                if (profileData.profileStyle === '–î—Ä—É–≥–æ–µ') {
                    document.getElementById('profileCustomStyle').value = profileData.profileCustomStyle || '';
                    document.getElementById('profileCustomStyle').disabled = false;
                }

                document.getElementById('profileDescription').value = profileData.profileDescription || '';
                document.getElementById('profilePassword').value = profileData.userPassword || '';

                // –í–ê–ñ–ù–û–ï –ò–ó–ú–ï–ù–ï–ù–ò–ï: –ë–ª–æ–∫–∏—Ä—É–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
                if (currentUser) {
                    lockBasicInfoFields();
                }

                // –ó–∞–≥—Ä—É–∂–∞–µ–º –∞–≤–∞—Ç–∞—Ä
                if (profileData.avatar) {
                    const preview = document.getElementById('avatarPreview');
                    preview.innerHTML = `<img src="${profileData.avatar}" alt="–ê–≤–∞—Ç–∞—Ä">`;
                }

                // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏
                if (profileData.socialLinks && profileData.socialLinks.length > 0) {
                    initializeSocialLinksWithData(profileData.socialLinks);
                }

                // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ä–∞–±–æ—Ç—ã
                if (profileData.works && profileData.works.length > 0) {
                    initializeWorksWithData(profileData.works);
                }
            } else {
                // –î–ª—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è - —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –≤—Å–µ –ø–æ–ª—è
                unlockBasicInfoFields();
                initializeSocialLinks();
                initializeWorks();
            }

            setupEventListeners();
            setupDynamicValidation();
            updateWorksCounter();

            // –ó–∞–ø—É—Å–∫–∞–µ–º –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é
            setTimeout(() => {
                validateName();
                validateNickname();
                validateStyle();
                validatePassword();
                validateSocialLinks();
                validateWorks();
                validateAvatar();
                updateOverallValidation();
            }, 200);
        }

        function initializeSocialLinksWithData(socialLinks) {
            const container = document.getElementById('socialLinksContainer');
            container.innerHTML = '';
            socialLinksCount = 0;

            socialLinks.forEach(link => {
                addSocialLinkWithData(link.platform, link.username);
            });

            updateSocialLimitWarning();
            updateAddSocialButton();
        }

        function addSocialLinkWithData(platform, username) {
            if (socialLinksCount >= MAX_SOCIAL_LINKS) return;

            const container = document.getElementById('socialLinksContainer');
            const socialId = 'social_' + Date.now();

            const socialHtml = `
                <div class="social-link-input" id="${socialId}">
                    <select class="social-platform-select" onchange="updateSocialLinkPrefix(this)">
                        <option value="telegram" ${platform === 'telegram' ? 'selected' : ''}>Telegram</option>
                        <option value="instagram" ${platform === 'instagram' ? 'selected' : ''}>Instagram</option>
                        <option value="pinterest" ${platform === 'pinterest' ? 'selected' : ''}>Pinterest</option>
                        <option value="youtube" ${platform === 'youtube' ? 'selected' : ''}>YouTube</option>
                        <option value="artstation" ${platform === 'artstation' ? 'selected' : ''}>ArtStation</option>
                        <option value="behance" ${platform === 'behance' ? 'selected' : ''}>Behance</option>
                    </select>
                    <div class="social-link-input-group">
                        <span class="social-link-prefix" id="${socialId}_prefix">${getSocialPrefix(platform)}</span>
                        <input type="text" class="form-input social-link-input-field" 
                               placeholder="username" value="${username || ''}"
                               oninput="validateSocialLink(this)">
                    </div>
                    <button type="button" class="remove-btn" onclick="removeSocialLink('${socialId}')">–£–¥–∞–ª–∏—Ç—å</button>
                </div>
            `;

            container.insertAdjacentHTML('beforeend', socialHtml);
            socialLinksCount++;
            updateSocialLimitWarning();
            updateAddSocialButton();
        }

        function getSocialPrefix(platform) {
            const prefixes = {
                'telegram': 'https://t.me/',
                'instagram': 'https://instagram.com/',
                'pinterest': 'https://pinterest.com/',
                'youtube': 'https://youtube.com/',
                'artstation': 'https://artstation.com/',
                'behance': 'https://behance.net/'
            };

            return prefixes[platform] || 'https://';
        }

        function initializeWorksWithData(works) {
            const container = document.getElementById('worksContainer');
            container.innerHTML = '';
            uploadedWorksCount = 0;

            works.forEach(workSrc => {
                addWorkWithData(workSrc);
            });

            updateWorksCounter();
            updateAddWorkButton();
        }

        function addWorkWithData(workSrc) {
            if (uploadedWorksCount >= MAX_WORKS) return;

            const container = document.getElementById('worksContainer');
            const workId = 'work_' + Date.now();

            const workHtml = `
                <div class="work-link-preview" id="${workId}">
                    <img src="${workSrc}" alt="–†–∞–±–æ—Ç–∞" onerror="handleImageError(this, 'work')" onclick="openProfileWorksModal('${workId}')">
                    <button type="button" class="remove-btn" onclick="removeWork('${workId}')" style="position: absolute; top: 5px; right: 5px; padding: 2px 6px;">√ó</button>
                </div>
            `;

            container.insertAdjacentHTML('beforeend', workHtml);
            uploadedWorksCount++;
            updateWorksCounter();
            updateAddWorkButton();
        }

        function initializeSocialLinks() {
            const container = document.getElementById('socialLinksContainer');
            container.innerHTML = '';
            socialLinksCount = 0;
            updateSocialLimitWarning();
            updateAddSocialButton();
        }

        function initializeWorks() {
            const container = document.getElementById('worksContainer');
            container.innerHTML = '';
            uploadedWorksCount = 0;
        }

        function setupEventListeners() {
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
            document.getElementById('profileStyle').addEventListener('change', function () {
                const customStyleInput = document.getElementById('profileCustomStyle');
                if (this.value === '–î—Ä—É–≥–æ–µ') {
                    customStyleInput.disabled = false;
                    customStyleInput.required = true;
                } else {
                    customStyleInput.disabled = true;
                    customStyleInput.required = false;
                    customStyleInput.value = '';
                }
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Ñ–æ—Ä–º—ã
            document.getElementById('profileSetupForm').addEventListener('submit', saveProfile);

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è Enter –≤ –ø–æ–ª–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ä–∞–±–æ—Ç—É
            document.getElementById('workLinkInput').addEventListener('keypress', function (event) {
                if (event.key === 'Enter') {
                    event.preventDefault();
                    addWorkFromLink();
                }
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è Enter –≤ –ø–æ–ª–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∞–≤–∞—Ç–∞—Ä
            document.getElementById('avatarLinkInput').addEventListener('keypress', function (event) {
                if (event.key === 'Enter') {
                    event.preventDefault();
                    loadAvatarFromLink();
                }
            });
        }

        function addSocialLink() {
            if (socialLinksCount >= MAX_SOCIAL_LINKS) {
                showSocialLimitWarning();
                return;
            }

            const container = document.getElementById('socialLinksContainer');
            const socialId = 'social_' + Date.now();

            const socialHtml = `
        <div class="social-link-input" id="${socialId}">
            <select class="social-platform-select" onchange="updateSocialLinkPrefix(this)">
                <option value="telegram">Telegram</option>
                <option value="instagram">Instagram</option>
                <option value="pinterest">Pinterest</option>
                <option value="youtube">YouTube</option>
                <option value="artstation">ArtStation</option>
                <option value="behance">Behance</option>
            </select>
            <div class="social-link-input-group">
                <span class="social-link-prefix" id="${socialId}_prefix">https://t.me/</span>
                <input type="text" class="form-input social-link-input-field" 
                       placeholder="username" 
                       oninput="validateSocialLink(this); validateSocialLinks(); updateOverallValidation();">
            </div>
            <button type="button" class="remove-btn" onclick="removeSocialLink('${socialId}')">–£–¥–∞–ª–∏—Ç—å</button>
        </div>
    `;

            container.insertAdjacentHTML('beforeend', socialHtml);
            socialLinksCount++;
            updateSocialLimitWarning();
            updateAddSocialButton();

            // –ó–∞–ø—É—Å–∫–∞–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
            setTimeout(() => {
                validateSocialLinks();
                updateOverallValidation();
            }, 100);
        }


        function updateSocialLinkPrefix(selectElement) {
            const platform = selectElement.value;
            const socialInput = selectElement.closest('.social-link-input');
            const prefixElement = socialInput.querySelector('.social-link-prefix');

            const prefixes = {
                'telegram': 'https://t.me/',
                'instagram': 'https://instagram.com/',
                'pinterest': 'https://pinterest.com/',
                'youtube': 'https://youtube.com/',
                'artstation': 'https://artstation.com/',
                'behance': 'https://behance.net/'
            };

            prefixElement.textContent = prefixes[platform] || 'https://';
        }

        function validateSocialLink(inputElement) {
            const socialInput = inputElement.closest('.social-link-input');
            const platformSelect = socialInput.querySelector('.social-platform-select');
            const platform = platformSelect.value;
            const value = inputElement.value.trim();

            if (!value) {
                inputElement.style.borderColor = '#444';
                return;
            }

            const patterns = {
                'telegram': /^[a-zA-Z0-9_]{5,32}$/,
                'instagram': /^[a-zA-Z0-9._]{1,30}$/,
                'pinterest': /^[a-zA-Z0-9._-]{3,30}$/,
                'youtube': /^@[a-zA-Z0-9._-]{3,30}$/,
                'artstation': /^[a-zA-Z0-9_-]{3,30}$/,
                'behance': /^[a-zA-Z0-9_-]{3,30}$/
            };

            const pattern = patterns[platform];
            if (pattern && pattern.test(value)) {
                inputElement.style.borderColor = '#4CAF50';
            } else {
                inputElement.style.borderColor = '#f44336';
            }
        }

        function removeSocialLink(socialId) {
            const element = document.getElementById(socialId);
            if (element) {
                element.remove();
                socialLinksCount--;
                updateSocialLimitWarning();
                updateAddSocialButton();

                // –ó–∞–ø—É—Å–∫–∞–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è
                setTimeout(() => {
                    validateSocialLinks();
                    updateOverallValidation();
                }, 100);
            }
        }

        function updateSocialLimitWarning() {
            const warning = document.getElementById('socialLimitWarning');
            const socialCounter = document.getElementById('socialCounter');

            if (socialLinksCount === 0) {
                warning.classList.add('show');
                warning.innerHTML = '‚ùå <strong>–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:</strong> –î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Å–æ—Ü–∏–∞–ª—å–Ω—É—é —Å–µ—Ç—å';
                warning.style.color = '#ff6b6b';
            } else if (socialLinksCount >= MAX_SOCIAL_LINKS) {
                warning.classList.add('show');
                warning.innerHTML = `–ú–∞–∫—Å–∏–º—É–º ${MAX_SOCIAL_LINKS} —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π –≤ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º –ø—Ä–æ—Ñ–∏–ª–µ`;
                warning.style.color = '#ffcc00';
            } else {
                warning.classList.remove('show');
            }

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫
            if (socialCounter) {
                socialCounter.innerHTML = socialLinksCount === 0
                    ? `<span style="color: #ff6b6b;">–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ: –º–∏–Ω–∏–º—É–º 1 —Å–æ—Ü—Å–µ—Ç—å | –î–æ–±–∞–≤–ª–µ–Ω–æ: 0/${MAX_SOCIAL_LINKS}</span>`
                    : `–î–æ–±–∞–≤–ª–µ–Ω–æ: ${socialLinksCount}/${MAX_SOCIAL_LINKS} —Å–æ—Ü—Å–µ—Ç–µ–π`;
            }
        }

        function updateAddSocialButton() {
            const button = document.getElementById('addSocialBtn');
            if (socialLinksCount >= MAX_SOCIAL_LINKS) {
                button.classList.add('disabled');
                button.disabled = true;
            } else {
                button.classList.remove('disabled');
                button.disabled = false;
            }
        }

        function showSocialLimitWarning() {
            const warning = document.getElementById('socialLimitWarning');
            warning.classList.add('show');

            // –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
            warning.style.animation = 'none';
            setTimeout(() => {
                warning.style.animation = 'shake 0.5s ease-in-out';
            }, 10);

            setTimeout(() => {
                warning.classList.remove('show');
            }, 3000);
        }

        function loadAvatarFromLink() {
            const linkInput = document.getElementById('avatarLinkInput');
            const link = linkInput.value.trim();

            if (!link) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ');
                return;
            }

            if (!isValidImageUrl(link)) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—Å—ã–ª–∫—É –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ');
                return;
            }

            const preview = document.getElementById('avatarPreview');
            preview.innerHTML = `<img src="${link}" alt="–ê–≤–∞—Ç–∞—Ä" onerror="handleImageError(this, 'avatar')">`;

            // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
            linkInput.value = '';

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
            showAvatarSuccess();

            // –ó–∞–ø—É—Å–∫–∞–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏—é
            setTimeout(() => {
                validateAvatar();
                updateOverallValidation();
            }, 100);
        }

        function addWorkFromLink() {
            if (uploadedWorksCount >= MAX_WORKS) {
                showWorksLimitWarning();
                return;
            }

            const linkInput = document.getElementById('workLinkInput');
            const link = linkInput.value.trim();

            if (!link) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ');
                return;
            }

            if (!isValidImageUrl(link)) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—Å—ã–ª–∫—É –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ');
                return;
            }

            const container = document.getElementById('worksContainer');
            const workId = 'work_' + Date.now();

            const workHtml = `
        <div class="work-link-preview" id="${workId}">
            <img src="${link}" alt="–†–∞–±–æ—Ç–∞" onerror="handleImageError(this, 'work')" onclick="openProfileWorksModal('${workId}')">
            <button type="button" class="remove-btn" onclick="removeWork('${workId}')" style="position: absolute; top: 5px; right: 5px; padding: 2px 6px;">√ó</button>
        </div>
    `;

            container.insertAdjacentHTML('beforeend', workHtml);
            uploadedWorksCount++;
            updateWorksCounter();

            // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
            linkInput.value = '';

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–∫–∏
            updateAddWorkButton();

            // –ó–∞–ø—É—Å–∫–∞–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏—é
            setTimeout(() => {
                validateWorks();
                updateOverallValidation();
            }, 100);
        }

        function isValidImageUrl(url) {
            // –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            const imageExtensions = ['.jpg', '.jpeg', '.png', '.gif', '.webp', '.bmp'];
            const urlLower = url.toLowerCase();

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏ URL —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            const hasImageExtension = imageExtensions.some(ext => urlLower.includes(ext));

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ URL –≤–∞–ª–∏–¥–Ω—ã–º
            try {
                new URL(url);
                return hasImageExtension;
            } catch {
                return false;
            }
        }

        function handleImageError(imgElement, type) {
            if (type === 'work') {
                // –£–¥–∞–ª—è–µ–º —Ä–∞–±–æ—Ç—É –ø—Ä–∏ –æ—à–∏–±–∫–µ –∑–∞–≥—Ä—É–∑–∫–∏
                const workId = imgElement.closest('.work-link-preview').id;
                removeWork(workId);
                alert('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Å—ã–ª–∫—É –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.');
            } else if (type === 'avatar') {
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∞–≤–∞—Ç–∞—Ä –ø—Ä–∏ –æ—à–∏–±–∫–µ –∑–∞–≥—Ä—É–∑–∫–∏
                const preview = document.getElementById('avatarPreview');
                preview.innerHTML = '<div class="avatar-placeholder">–ê–≤–∞—Ç–∞—Ä –Ω–µ –≤—ã–±—Ä–∞–Ω</div>';
                alert('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∞–≤–∞—Ç–∞—Ä. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Å—ã–ª–∫—É –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.');
            }
        }

        function removeWork(workId) {
            const preview = document.getElementById(workId);
            if (preview) {
                preview.remove();
                uploadedWorksCount--;
                updateWorksCounter();
                updateAddWorkButton();

                // –ó–∞–ø—É—Å–∫–∞–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è
                setTimeout(() => {
                    validateWorks();
                    updateOverallValidation();
                }, 100);
            }
        }

        function updateWorksCounter() {
            const counter = document.getElementById('worksCounter');
            counter.textContent = `–î–æ–±–∞–≤–ª–µ–Ω–æ: ${uploadedWorksCount}/${MAX_WORKS} —Ä–∞–±–æ—Ç`;

            if (uploadedWorksCount >= MAX_WORKS) {
                counter.classList.add('error');
            } else if (uploadedWorksCount >= MAX_WORKS - 5) {
                counter.classList.add('warning');
                counter.classList.remove('error');
            } else {
                counter.classList.remove('warning', 'error');
            }
        }

        function updateAddWorkButton() {
            const button = document.getElementById('addWorkLinkBtn');
            if (uploadedWorksCount >= MAX_WORKS) {
                button.classList.add('disabled');
                button.disabled = true;
            } else {
                button.classList.remove('disabled');
                button.disabled = false;
            }
        }

        function showWorksLimitWarning() {
            alert(`–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–±–æ—Ç –≤ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º –ø—Ä–æ—Ñ–∏–ª–µ: ${MAX_WORKS}`);
        }

        function showAvatarSuccess() {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
            const preview = document.getElementById('avatarPreview');
            const originalBorder = preview.style.border;

            preview.style.border = '3px solid #4CAF50';
            setTimeout(() => {
                preview.style.border = originalBorder || '3px solid #ffcc00';
            }, 2000);
        }

        // –ù–û–í–ê–Ø –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –ü–†–û–í–ï–†–ö–ò –ü–ê–†–û–õ–Ø
        function validatePassword(password) {
            const lengthReq = document.getElementById('reqLength');
            const charsReq = document.getElementById('reqChars');

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª–∏–Ω—ã
            const isValidLength = password.length >= 6 && password.length <= 12;
            if (isValidLength) {
                lengthReq.classList.add('valid');
                lengthReq.classList.remove('invalid');
            } else {
                lengthReq.classList.remove('valid');
                lengthReq.classList.add('invalid');
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤ (—Ç–æ–ª—å–∫–æ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –±—É–∫–≤—ã –∏ —Ü–∏—Ñ—Ä—ã)
            const isValidChars = /^[a-zA-Z0-9]+$/.test(password);
            if (isValidChars) {
                charsReq.classList.add('valid');
                charsReq.classList.remove('invalid');
            } else {
                charsReq.classList.remove('valid');
                charsReq.classList.add('invalid');
            }

            return isValidLength && isValidChars;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è ID –ø—Ä–æ—Ñ–∏–ª—è –ø—Ä–∏ –∫–ª–∏–∫–µ
        function setupIdCopyFunctionality() {
            const cabinetUserId = document.getElementById('cabinetUserId');
            if (cabinetUserId) {
                cabinetUserId.style.cursor = 'pointer';
                cabinetUserId.title = '–ö–ª–∏–∫–Ω–∏—Ç–µ —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ID';
                cabinetUserId.addEventListener('click', copyUserId);
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è ID
        function copyUserId(event) {
            event.preventDefault();
            event.stopPropagation();

            const userIdText = this.textContent.replace('ID: ', '');

            // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π textarea –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
            const textArea = document.createElement('textarea');
            textArea.value = userIdText;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.select();
            textArea.setSelectionRange(0, 99999); // –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    // –í—Ä–µ–º–µ–Ω–Ω–æ –º–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
                    const originalText = this.textContent;
                    this.textContent = '‚úî ID —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!';
                    this.style.color = '#4CAF50';

                    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
                    setTimeout(() => {
                        this.textContent = originalText;
                        this.style.color = '';
                    }, 2000);

                    console.log('‚úÖ ID –ø—Ä–æ—Ñ–∏–ª—è —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞:', userIdText);
                }
            } catch (err) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ ID:', err);

                // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(userIdText).then(() => {
                        const originalText = this.textContent;
                        this.textContent = '‚úî ID —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!';
                        this.style.color = '#4CAF50';

                        setTimeout(() => {
                            this.textContent = originalText;
                            this.style.color = '';
                        }, 2000);
                    });
                }
            }

            document.body.removeChild(textArea);
        }

        // –ù–û–í–ê–Ø –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–Ø –í–ò–î–ò–ú–û–°–¢–ò –ü–ê–†–û–õ–Ø
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è –≤ —Ñ–æ—Ä–º–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è
        function togglePasswordVisibility() {
            const passwordInput = document.getElementById('profilePassword');
            const toggleButton = document.querySelector('#passwordSection .password-toggle');

            if (passwordInput.type === 'password') {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–∞—Ä–æ–ª—å
                passwordInput.type = 'text';
                toggleButton.classList.remove('hide');
                toggleButton.classList.add('show');
                toggleButton.setAttribute('title', '–°–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å');
            } else {
                // –°–∫—Ä—ã–≤–∞–µ–º –ø–∞—Ä–æ–ª—å
                passwordInput.type = 'password';
                toggleButton.classList.remove('show');
                toggleButton.classList.add('hide');
                toggleButton.setAttribute('title', '–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä–æ–ª—å');
            }

            // –§–æ–∫—É—Å–∏—Ä—É–µ–º—Å—è –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ –ø–æ–ª–µ –≤–≤–æ–¥–∞ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            passwordInput.focus();
        }

        // –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –°–û–•–†–ê–ù–ï–ù–ò–Ø –ü–†–û–§–ò–õ–Ø
        function saveProfile(event) {
            event.preventDefault();

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–∏–º–∏—Ç—ã –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
            if (socialLinksCount > MAX_SOCIAL_LINKS) {
                alert(`–ú–∞–∫—Å–∏–º—É–º ${MAX_SOCIAL_LINKS} —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π –≤ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º –ø—Ä–æ—Ñ–∏–ª–µ`);
                return;
            }

            if (uploadedWorksCount > MAX_WORKS) {
                alert(`–ú–∞–∫—Å–∏–º—É–º ${MAX_WORKS} —Ä–∞–±–æ—Ç –≤ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º –ø—Ä–æ—Ñ–∏–ª–µ`);
                return;
            }

            const saveBtn = document.getElementById('saveProfileBtn');
            saveBtn.disabled = true;
            saveBtn.textContent = '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...';

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–∞—Ä–æ–ª—å
            const password = document.getElementById('profilePassword').value;
            if (!validatePassword(password)) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø–∞—Ä–æ–ª—é:\n- –û—Ç 6 –¥–æ 12 —Å–∏–º–≤–æ–ª–æ–≤\n- –¢–æ–ª—å–∫–æ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –±—É–∫–≤—ã –∏ —Ü–∏—Ñ—Ä—ã');
                saveBtn.disabled = false;
                saveBtn.textContent = '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å';
                return;
            }

            // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è
            const profileData = {
                profileName: document.getElementById('profileName').value,
                profileNickname: document.getElementById('profileNickname').value,
                profileStyle: document.getElementById('profileStyle').value === '–î—Ä—É–≥–æ–µ'
                    ? document.getElementById('profileCustomStyle').value
                    : document.getElementById('profileStyle').value,
                profileCustomStyle: document.getElementById('profileStyle').value === '–î—Ä—É–≥–æ–µ'
                    ? document.getElementById('profileCustomStyle').value
                    : '',
                profileDescription: document.getElementById('profileDescription').value,
                profilePassword: password,
                avatar: getAvatarSrc(),
                socialLinks: collectSocialLinks(),
                works: collectWorks(),
                lastUpdated: new Date().toISOString()
            };

            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–π –Ω–∏–∫–Ω–µ–π–º –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const username = 'user_' + Math.random().toString(36).substring(2, 8);

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å –≤ localStorage
            localStorage.setItem('userProfile_' + username, JSON.stringify(profileData));

            // –°–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const userData = {
                username: username,
                password: profileData.profilePassword,
                registrationDate: new Date().toISOString(),
                profileComplete: true,
                profileName: profileData.profileName
            };

            localStorage.setItem('currentUser', JSON.stringify(userData));
            localStorage.setItem('user_' + username, JSON.stringify(userData));

            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            currentUser = userData;

            // –û–±–Ω–æ–≤–ª—è–µ–º UI
            updateAuthUI();

            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º HTML-–∫–æ–¥ –ø—Ä–æ—Ñ–∏–ª—è
            const profileCode = generateProfileCode(profileData);

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
            setTimeout(() => {
                showProfileSuccess('–ü—Ä–æ—Ñ–∏–ª—å —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω!');
                saveBtn.disabled = false;
                saveBtn.textContent = '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å';

                // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –æ–∫–Ω–æ —Å –∫–æ–¥–æ–º
                setTimeout(() => {
                    closeProfileSetupModal();
                    openCodeModal(profileCode);
                }, 1500);
            }, 1500);
        }

        // –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –ì–ï–ù–ï–†–ê–¶–ò–ò HTML-–ö–û–î–ê –ü–†–û–§–ò–õ–Ø
        function generateProfileCodeWithEncryption(profileData, username, encryptedPassword) {
            const profileId = profileData.profileName.toLowerCase().replace(/\s+/g, '');

            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º HTML –¥–ª—è —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π
            let socialLinksHtml = '';
            if (profileData.socialLinks && profileData.socialLinks.length > 0) {
                profileData.socialLinks.forEach(link => {
                    const socialIcon = getSocialIcon(link.platform);
                    socialLinksHtml += `
                <a href="${getSocialPrefix(link.platform)}${link.username}" class="social-link" target="_blank" title="${link.platform}">
                    ${socialIcon}
                </a>\n            `;
                });
            }

            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º HTML –¥–ª—è —Ä–∞–±–æ—Ç
            let worksHtml = '';
            if (profileData.works && profileData.works.length > 0) {
                profileData.works.forEach((work, index) => {
                    let workClass = 'work-thumb-3';
                    if (index % 3 === 0) workClass = 'work-thumb-1';
                    else if (index % 3 === 1) workClass = 'work-thumb-2';

                    worksHtml += `            <img src="${work}" class="${workClass}" alt="">\n`;
                });
            }

            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
            let publicationPage = 'artist';
            if (profileData.profileStyle && profileData.profileStyle.toLowerCase().includes('–¥–∏–∑–∞–π–Ω')) {
                publicationPage = 'design';
            }
            if (profileData.isPrem) {
                publicationPage = 'prem_artist';
            }

            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ–¥ —Å –ó–ê–®–ò–§–†–û–í–ê–ù–ù–´–ú –ø–∞—Ä–æ–ª–µ–º
            const profileCode = `<!-- 
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë             –ò–ù–§–û–†–ú–ê–¶–ò–Ø –î–õ–Ø –ú–û–î–ï–†–ê–¢–û–†–ê  888666       
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë User ID: ${username}
‚ïë **–ü–ê–†–û–õ–¨ –î–õ–Ø –í–•–û–î–ê: ${profileData.userPassword}** <-- –î–û–ë–ê–í–¨ –≠–¢–£ –°–¢–†–û–ö–£
‚ïë –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å: ${encryptedPassword}
‚ïë –ò–º—è: ${profileData.profileName}
‚ïë Telegram: @${profileData.profileNickname}
‚ïë –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å: ${profileData.profileStyle}
‚ïë –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: ${getPageDisplayName(publicationPage)}
‚ïë –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: ${new Date().toLocaleDateString()}
‚ïë –ö–æ–ª-–≤–æ —Ä–∞–±–æ—Ç: ${profileData.works ? profileData.works.length : 0}
‚ïë –ö–æ–ª-–≤–æ —Å–æ—Ü. —Å–µ—Ç–µ–π: ${profileData.socialLinks ? profileData.socialLinks.length : 0}
‚ïë –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π ID: –î–ê (–Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∏–∫–Ω–µ–π–º–∞)
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

–î–õ–Ø –ê–ö–¢–ò–í–ê–¶–ò–ò –í–•–û–î–ê –ò –ü–£–ë–õ–ò–ö–ê–¶–ò–ò:

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è –≤ —Å–∏—Å—Ç–µ–º—É (–ö–û–ú–ê–ù–î–ê –î–õ–Ø –ö–û–ù–°–û–õ–ò)
addEncryptedUserPassword("${username}", "${encryptedPassword}");

// –ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª—è
publishUserProfile("${username}");

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–º–æ–∂–µ—Ç –≤–æ–π—Ç–∏ —Å –ª–æ–≥–∏–Ω–æ–º: ${username}
-->

<!-- ${profileData.profileName} -->
<section id="${profileId}">
    <section class="profile-section" data-style="${profileData.profileStyle}">
        <img src="${profileData.avatar || 'https://i.postimg.cc/Rhz86Z09/photo_5337314107818374848_c.jpg'}" alt="–ê–≤–∞—Ç–∞—Ä" class="avatar">
        <div class="profile-info">
            <h1>${profileData.profileName}</h1>
            <a href="https://t.me/${profileData.profileNickname.replace('@', '')}" class="profile-link">
                <img src="https://i.postimg.cc/cJXCqTTc/icons8-48.png" alt="Telegram" class="profile-link-icon"> 
                @${profileData.profileNickname}
            </a>
            <p>–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å: ${profileData.profileStyle}</p>
            <div class="social-links">
${socialLinksHtml}            </div>
        </div>
    </section>

    <h2 class="favorite-works">–ü—É–±–ª–∏–∫–∞—Ü–∏–∏ –∞–≤—Ç–æ—Ä–∞</h2>
    <div class="works-carousel" id="artist${profileId}Carousel">
        <div class="works-inner" id="artist${profileId}Works">
${worksHtml}        </div>
        <button class="works-control prev" onclick="prevWork('artist${profileId}Works')">&#10094;</button>
        <button class="works-control next" onclick="nextWork('artist${profileId}Works')">&#10095;</button>
    </div>
    <button class="show-works-btn" onclick="openModal('modal${profileId}')">–û–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å–æ –≤—Å–µ–º–∏ —Ä–∞–±–æ—Ç–∞–º–∏</button>

    <!-- Modal -->
    <div id="modal${profileId}" class="modal">
        <span class="close-btn" onclick="closeModal('modal${profileId}')">&times;</span>
        <div class="modal-header">
            <h2>–ì–∞–ª–µ—Ä–µ—è —Ä–∞–±–æ—Ç</h2>
        </div>
        <div class="modal-content">
${profileData.works ? profileData.works.map(work => `            <img src="${work}" class="modal-img" alt="">`).join('\n') : ''}
        </div>
    </div>
</section>     

// JSON –î–õ–Ø –ë–ê–ó–´ –î–ê–ù–ù–´–• //
{
    "${username}": {
        username: "${username}",
        profileName: "${profileData.profileName}",
        profileNickname: "${profileData.profileNickname.replace('@', '')}",
        profileStyle: "${profileData.profileStyle}",
        avatar: "${profileData.avatar || 'https://i.postimg.cc/Rhz86Z09/photo_5337314107818374848_c.jpg'}",
        socialLinks: [
            ${profileData.socialLinks ? profileData.socialLinks.map(link =>
                `{ platform: "${link.platform}", username: "${link.username}" }`
            ).join(',\n        ') : '{ platform: "telegram", username: "' + profileData.profileNickname.replace('@', '') + '" }'}
        ],
        works: [
            ${profileData.works ? profileData.works.map(work =>
                `"${work}"`
            ).join(',\n        ') : '""'}
        ],
        publishedOn: "${publicationPage}",
        encryptedPassword: "${encryptedPassword}",
        profileDescription: "${profileData.profileDescription || ''}",
        registrationDate: "${new Date().toISOString()}"
    }
}
`;

            return profileCode;
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–∫–æ–Ω–∫–∏ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏
        function getSocialIcon(platform) {
            const icons = {
                'telegram': '<img src="https://i.postimg.cc/cJXCqTTc/icons8-48.png" alt="Telegram" class="social-icon">',
                'instagram': '<img src="https://i.postimg.cc/yNzgZcft/–∏–Ω—Å—Ç.png" alt="Instagram" class="social-icon">',
                'pinterest': '<img src="https://i.postimg.cc/T3B57t75/icons8-pinterest-48.png" alt="Pinterest" class="social-icon">',
                'youtube': '<img src="https://i.postimg.cc/fW5tnzqN/youtube_(1).png" alt="YouTube" class="social-icon">',
                'vk': '<img src="https://i.postimg.cc/cHhQbQ8q/–≤–∫.png" alt="VK" class="social-icon">',
                
            };

            return icons[platform] || '<img src="https://i.postimg.cc/cJXCqTTc/icons8-48.png" alt="Social" class="social-icon">';
        }

        // –§–£–ù–ö–¶–ò–ò –î–õ–Ø –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê –° –ö–û–î–û–ú
        function openCodeModal(profileCode, username, userPassword, isExistingUser = false) {
            const modal = document.getElementById('codeModal');
            const codeText = document.getElementById('profileCodeText');

            codeText.textContent = profileCode;
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';

            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –Ω–æ–≤—ã–π —ç—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
            const instructionsBox = modal.querySelector('.instructions-box');
            if (instructionsBox) {
                if (isExistingUser) {
                    instructionsBox.innerHTML = `
                <h4 class="instructions-title">–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è</h4>
                <div style="background: rgba(33, 150, 243, 0.1); padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 3px solid #2196F3;">
                    <div style="text-align: center; color: #2196F3; font-weight: bold; margin-bottom: 10px;">
                        ‚úÖ –ü—Ä–æ—Ñ–∏–ª—å —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω!
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.9em;">
                        <div><strong>User ID:</strong> ${username}</div>
                        <div><strong>–ü–∞—Ä–æ–ª—å:</strong> ${userPassword}</div>
                        <div><strong>–°—Ç–∞—Ç—É—Å:</strong> –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π ID</div>
                        <div><strong>–ù–∏–∫–Ω–µ–π–º:</strong> ${username.split('_')[1]}</div>
                    </div>
                </div>
                
                <div style="background: rgba(76, 175, 80, 0.1); padding: 12px; border-radius: 8px; margin-top: 15px; border-left: 3px solid #4CAF50;">
                    <p style="color: #e0e0e0; font-size: 0.9em; margin: 0; text-align: center;">
                        –í–∞—à ID –æ—Å—Ç–∞–ª—Å—è –ø—Ä–µ–∂–Ω–∏–º. –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞.
                    </p>
                </div>
            `;
                } else {
                    instructionsBox.innerHTML = `
                <h4 class="instructions-title">üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞</h4>
                <div style="background: rgba(255, 152, 0, 0.1); padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 3px solid #ff9800;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.9em;">
                        <div><strong>User ID:</strong> ${username}</div>
                        <div><strong>–ü–∞—Ä–æ–ª—å:</strong> ${userPassword}</div>
                        <div><strong>–õ–æ–≥–∏–Ω –¥–ª—è –≤—Ö–æ–¥–∞:</strong> ${username}</div>
                        <div><strong>–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π ID:</strong> –î–∞</div>
                    </div>
                </div>
                
                <h4 class="instructions-title">üöÄ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ:</h4>
                <ol class="instructions-list">
                    <li>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥" –≤—ã—à–µ</li>
                    <li>–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–¥ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞–º –≤ Telegram</li>
                    <li>–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä –¥–æ–±–∞–≤–∏—Ç –ø–∞—Ä–æ–ª—å –≤ —Å–∏—Å—Ç–µ–º—É –∫–æ–º–∞–Ω–¥–æ–π: 
                        <code style="background: #333; padding: 2px 6px; border-radius: 4px; font-family: monospace;">
                            addUserPassword("${username}", "${userPassword}")
                        </code>
                    </li>
                    <li>–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è –ø—Ä–æ—Ñ–∏–ª—å –±—É–¥–µ—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω</li>
                    <li>–í—ã —Å–º–æ–∂–µ—Ç–µ –≤–æ–π—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É—è:<br>
                        <strong>–õ–æ–≥–∏–Ω:</strong> ${username}<br>
                        <strong>–ü–∞—Ä–æ–ª—å:</strong> ${userPassword}
                    </li>
                </ol>
                
                <div style="background: rgba(76, 175, 80, 0.1); padding: 12px; border-radius: 8px; margin-top: 15px; border-left: 3px solid #4CAF50;">
                    <div style="display: flex; align-items: center; gap: 8px; color: #4CAF50; font-weight: bold; margin-bottom: 5px;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="#4CAF50">
                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                        </svg>
                        –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π ID –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!
                    </div>
                    <p style="color: #e0e0e0; font-size: 0.9em; margin: 0;">
                        –í–∞—à ID –∑–∞–∫—Ä–µ–ø–ª–µ–Ω –∑–∞ –Ω–∏–∫–Ω–µ–π–º–æ–º. –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–∏—Ö —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è—Ö ID –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –ø—Ä–µ–∂–Ω–∏–º.
                    </p>
                </div>
            `;
                }
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        function publishUserProfileOnPage(username, page) {
            savePublicationPage(username, page);
            localStorage.setItem('profilePublished_' + username, 'true');

            console.log(`‚úÖ –ü—Ä–æ—Ñ–∏–ª—å ${username} –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ: ${getPageDisplayName(page)}`);
            return page;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π –Ω–∞ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        function getPublishedProfilesOnCurrentPage() {
            const currentPage = getCurrentPage();
            const publishedProfiles = [];

            // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –ø—Ä–æ—Ñ–∏–ª–∏ –∏–∑ localStorage
            Object.keys(localStorage).forEach(key => {
                if (key.startsWith('profile_page_')) {
                    const username = key.replace('profile_page_', '');
                    const publicationInfo = getPublicationPage(username);

                    if (publicationInfo && publicationInfo.page === currentPage) {
                        const userProfile = localStorage.getItem('userProfile_' + username);
                        if (userProfile) {
                            publishedProfiles.push({
                                username: username,
                                profileData: JSON.parse(userProfile),
                                publicationInfo: publicationInfo
                            });
                        }
                    }
                }
            });

            return publishedProfiles;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ (–¥–ª—è –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤)
        function showPublicationInfo() {
            const currentPage = getCurrentPage();
            const publishedProfiles = getPublishedProfilesOnCurrentPage();

            console.log(`üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ: ${getPageDisplayName(currentPage)}`);
            console.log(`üìà –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ –ø—Ä–æ—Ñ–∏–ª–µ–π: ${publishedProfiles.length}`);

            publishedProfiles.forEach((profile, index) => {
                console.log(`
${index + 1}. ${profile.profileData.profileName}
   ‚îú‚îÄ User ID: ${profile.username}
   ‚îú‚îÄ Telegram: @${profile.profileData.profileNickname}
   ‚îú‚îÄ –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å: ${profile.profileData.profileStyle}
   ‚îú‚îÄ –î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏: ${new Date(profile.publicationInfo.timestamp).toLocaleDateString('ru-RU')}
   ‚îî‚îÄ –°—Ç–∞—Ç—É—Å: ‚úÖ –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω
        `);
            });
        }



        // ========== –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –ó–ê–ì–†–£–ó–ö–ò –°–£–©–ï–°–¢–í–£–Æ–©–ï–ì–û –ü–†–û–§–ò–õ–Ø ==========
        function loadExistingProfile() {
            if (!currentUser) return;

            // –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
            const userFromDB = findUserInDatabase(currentUser.username);

            if (userFromDB) {
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
                loadProfileFromDatabase(userFromDB);
                console.log(`üìÅ –ó–∞–≥—Ä—É–∂–µ–Ω –ø—Ä–æ—Ñ–∏–ª—å –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: ${currentUser.username}`);
            } else {
                // –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ localStorage
                const userProfile = localStorage.getItem('userProfile_' + currentUser.username);
                if (userProfile) {
                    const profileData = JSON.parse(userProfile);
                    loadProfileForm(profileData);
                    console.log(`üìÅ –ó–∞–≥—Ä—É–∂–µ–Ω –ø—Ä–æ—Ñ–∏–ª—å –∏–∑ localStorage: ${currentUser.username}`);
                } else {
                    console.warn('‚ùå –ü—Ä–æ—Ñ–∏–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω –Ω–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –Ω–∏ –≤ localStorage');
                }
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–æ—Ä–º—É
        function loadProfileFromDatabase(userData) {
            if (!userData) return;

            // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É –¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–æ—Ñ–∏–ª—è
            document.getElementById('profileName').value = userData.profileName || '';
            document.getElementById('profileNickname').value = userData.profileNickname || '';
            document.getElementById('profileStyle').value = userData.profileStyle || '';

            if (userData.profileStyle === '–î—Ä—É–≥–æ–µ') {
                document.getElementById('profileCustomStyle').value = userData.profileCustomStyle || '';
                document.getElementById('profileCustomStyle').disabled = false;
            }

            document.getElementById('profileDescription').value = userData.profileDescription || '';

            // –ü–∞—Ä–æ–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ–º –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
            document.getElementById('profilePassword').value = '';
            document.getElementById('profilePassword').placeholder = '–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º —á—Ç–æ–±—ã –Ω–µ –º–µ–Ω—è—Ç—å)';

            // –û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù–ê –¥–ª—è –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π
            if (userData.publishedOn) {
                lockBasicInfoFields();
            } else {
                unlockBasicInfoFields();
            }

            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∞–≤–∞—Ç–∞—Ä
            if (userData.avatar) {
                const preview = document.getElementById('avatarPreview');
                preview.innerHTML = `<img src="${userData.avatar}" alt="–ê–≤–∞—Ç–∞—Ä" onerror="handleImageError(this, 'avatar')">`;
            } else {
                const preview = document.getElementById('avatarPreview');
                preview.innerHTML = '<div class="avatar-placeholder">–ê–≤–∞—Ç–∞—Ä –Ω–µ –≤—ã–±—Ä–∞–Ω</div>';
            }

            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏
            if (userData.socialLinks && userData.socialLinks.length > 0) {
                initializeSocialLinksWithData(userData.socialLinks);
            } else {
                initializeSocialLinks();
            }

            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ä–∞–±–æ—Ç—ã
            if (userData.works && userData.works.length > 0) {
                initializeWorksWithData(userData.works);
            } else {
                initializeWorks();
            }

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫–∏
            updateWorksCounter();
            updateSocialLimitWarning();
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
        function refreshCabinetData() {
            if (currentUser && document.getElementById('personalCabinetModal').style.display === 'block') {
                loadPersonalCabinetData();
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function isUserFromDatabase(username) {
            const user = findUserInDatabase(username);
            return !!user;
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∫–∞–±–∏–Ω–µ—Ç–∞
        function openPersonalCabinetModal() {
            if (!currentUser) {
                openLoginModal();
                return;
            }

            const modal = document.getElementById('personalCabinetModal');
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';

            // –î–æ–±–∞–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç —Å—Ç–∞—Ç—É—Å–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
            updatePersonalCabinetHTML();

            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
            setTimeout(() => {
                loadPersonalCabinetData();
            }, 100);
        }

        function lockBasicInfoFields() {
            // –ë–ª–æ–∫–∏—Ä—É–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è
            const nameInput = document.getElementById('profileName');
            const nicknameInput = document.getElementById('profileNickname');
            const styleSelect = document.getElementById('profileStyle');
            const customStyleInput = document.getElementById('profileCustomStyle');

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞—Ç—Ä–∏–±—É—Ç readonly –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª–µ–π
            nameInput.readOnly = true;
            nicknameInput.readOnly = true;

            // –ë–ª–æ–∫–∏—Ä—É–µ–º –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫
            styleSelect.disabled = true;
            customStyleInput.disabled = true;

            // –î–æ–±–∞–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª–µ–π
            nameInput.style.backgroundColor = '#2a2a2a';
            nameInput.style.color = '#888';
            nameInput.style.cursor = 'not-allowed';

            nicknameInput.style.backgroundColor = '#2a2a2a';
            nicknameInput.style.color = '#888';
            nicknameInput.style.cursor = 'not-allowed';

            styleSelect.style.backgroundColor = '#2a2a2a';
            styleSelect.style.color = '#888';
            styleSelect.style.cursor = 'not-allowed';

            customStyleInput.style.backgroundColor = '#2a2a2a';
            customStyleInput.style.color = '#888';
            customStyleInput.style.cursor = 'not-allowed';

            // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            addLockedFieldHints();
        }

        function addLockedFieldHints() {
            // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∫ –ø–æ–ª—è–º
            const nameLabel = document.querySelector('label[for="profileName"]');
            const nicknameLabel = document.querySelector('label[for="profileNickname"]');
            const styleLabel = document.querySelector('label[for="profileStyle"]');
            const customStyleLabel = document.querySelector('label[for="profileCustomStyle"]');

            if (nameLabel && !nameLabel.querySelector('.locked-hint')) {
                const nameHint = document.createElement('span');
                nameHint.className = 'locked-hint';
                nameHint.innerHTML = ' üîí';
                nameHint.style.color = '#ffcc00';
                nameHint.style.fontSize = '0.8em';
                nameHint.style.marginLeft = '5px';
                nameLabel.appendChild(nameHint);
            }

            if (nicknameLabel && !nicknameLabel.querySelector('.locked-hint')) {
                const nicknameHint = document.createElement('span');
                nicknameHint.className = 'locked-hint';
                nicknameHint.innerHTML = ' üîí';
                nicknameHint.style.color = '#ffcc00';
                nicknameHint.style.fontSize = '0.8em';
                nicknameHint.style.marginLeft = '5px';
                nicknameLabel.appendChild(nicknameHint);
            }

            if (styleLabel && !styleLabel.querySelector('.locked-hint')) {
                const styleHint = document.createElement('span');
                styleHint.className = 'locked-hint';
                styleHint.innerHTML = ' üîí ';
                styleHint.style.color = '#ffcc00';
                styleHint.style.fontSize = '0.8em';
                styleHint.style.marginLeft = '5px';
                styleLabel.appendChild(styleHint);
            }

            if (customStyleLabel && !customStyleLabel.querySelector('.locked-hint')) {
                const customStyleHint = document.createElement('span');
                customStyleHint.className = 'locked-hint';
                customStyleHint.innerHTML = ' üîí';
                customStyleHint.style.color = '#ffcc00';
                customStyleHint.style.fontSize = '0.8em';
                customStyleHint.style.marginLeft = '5px';
                customStyleLabel.appendChild(customStyleHint);
            }

            // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            const mainInfoSection = document.getElementById('mainInfoSection');
            if (mainInfoSection && !mainInfoSection.querySelector('.locked-info-message')) {
                const infoMessage = document.createElement('div');
                infoMessage.className = 'locked-info-message';
                infoMessage.innerHTML = `
            <div style="background: rgba(255, 204, 0, 0.1); padding: 10px; border-radius: 8px; margin: 10px 0; border-left: 3px solid #ffcc00;">
                <div style="display: flex; align-items: center; gap: 8px; color: #ffcc00; font-weight: bold;">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="#ffcc00">
                        <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM12 17c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM15.1 8H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
                    </svg>
                    –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞
                </div>
                <p style="color: #e0e0e0; font-size: 0.85em; margin: 5px 0 0 0;">
                    –ò–º—è, –Ω–∏–∫–Ω–µ–π–º –∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è. 
                    –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –≤–∞—à–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ.
                </p>
            </div>
        `;
                mainInfoSection.insertBefore(infoMessage, mainInfoSection.firstChild);
            }
        }



        // –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –ó–ê–ö–†–´–¢–ò–Ø –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê
        function closeCodeModal() {
            const modal = document.getElementById('codeModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';

            // –û—á–∏—â–∞–µ–º –∫–æ–¥ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
            currentProfileCode = '';
        }

        function copyProfileCode() {
            const copyBtn = document.getElementById('copyCodeBtn');
            const successMessage = document.getElementById('successMessage');

            // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π textarea –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
            const textArea = document.createElement('textarea');
            textArea.value = currentProfileCode;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.select();
            textArea.setSelectionRange(0, 99999); // –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    // –£—Å–ø–µ—à–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
                    copyBtn.innerHTML = `
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                    –ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!
                `;
                    copyBtn.classList.add('copied');

                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
                    successMessage.classList.add('show');

                    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
                    setTimeout(() => {
                        successMessage.classList.remove('show');
                    }, 3000);

                    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
                    setTimeout(() => {
                        copyBtn.innerHTML = `
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                        –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
                    `;
                        copyBtn.classList.remove('copied');
                    }, 5000);

                    console.log('‚úÖ –ö–æ–¥ –ø—Ä–æ—Ñ–∏–ª—è —É—Å–ø–µ—à–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞');
                }
            } catch (err) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏: ', err);

                // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(currentProfileCode).then(() => {
                        copyBtn.innerHTML = `
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                        </svg>
                        –ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!
                    `;
                        copyBtn.classList.add('copied');
                        successMessage.classList.add('show');

                        setTimeout(() => {
                            successMessage.classList.remove('show');
                        }, 3000);

                        setTimeout(() => {
                            copyBtn.innerHTML = `
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                            </svg>
                            –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
                        `;
                            copyBtn.classList.remove('copied');
                        }, 5000);
                    }).catch(err => {
                        console.error('‚ùå –û—à–∏–±–∫–∞ clipboard API: ', err);
                        alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ –≤—Ä—É—á–Ω—É—é –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (F12).');
                    });
                } else {
                    alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ –≤—Ä—É—á–Ω—É—é –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (F12).');
                }
            }

            document.body.removeChild(textArea);
        }

        function getAvatarSrc() {
            const avatarImg = document.querySelector('#avatarPreview img');
            return avatarImg && avatarImg.src && !avatarImg.src.includes('data:image/svg+xml')
                ? avatarImg.src
                : '';
        }

        function collectSocialLinks() {
            const socialLinks = [];
            document.querySelectorAll('.social-link-input').forEach(socialInput => {
                const platform = socialInput.querySelector('.social-platform-select').value;
                const username = socialInput.querySelector('.social-link-input-field').value.trim();

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–æ–ª–µ username –Ω–µ –ø—É—Å—Ç–æ–µ
                if (username && platform) {
                    socialLinks.push({
                        platform,
                        username,
                        fullUrl: getSocialPrefix(platform) + username
                    });
                }
            });
            return socialLinks;
        }

        function collectWorks() {
            const works = [];
            document.querySelectorAll('.work-link-preview img').forEach(img => {
                if (img.src) {
                    works.push(img.src);
                }
            });
            return works;
        }

        function skipProfileSetup() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É –ø—Ä–æ—Ñ–∏–ª—è?')) {
                closeProfileSetupModal();
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å
        function copyProfileLink() {
            if (!currentUser) return;

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ª–æ–∞–¥–µ—Ä/—Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
            const shareBtn = document.querySelector('.share-link-btn');
            if (shareBtn) {
                const originalHTML = shareBtn.innerHTML;
                shareBtn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="white"><path d="M19 8l-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z"/></svg>';
                shareBtn.style.transform = 'scale(0.9)';

                setTimeout(() => {
                    shareBtn.innerHTML = originalHTML;
                    shareBtn.style.transform = '';
                }, 300);
            }

            // –ü–æ–ª—É—á–∞–µ–º ID –ø—Ä–æ—Ñ–∏–ª—è —Ö—É–¥–æ–∂–Ω–∏–∫–∞ (—Ñ–æ—Ä–º–∏—Ä—É–µ–º –∏–∑ –∏–º–µ–Ω–∏)
            const profileName = document.getElementById('cabinetUsername').textContent;
            const profileId = profileName.toLowerCase().replace(/\s+/g, '');

            // –§–æ—Ä–º–∏—Ä—É–µ–º –ø–æ–ª–Ω—É—é —Å—Å—ã–ª–∫—É –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å
            const baseUrl = window.location.origin + window.location.pathname;
            const profileUrl = `${baseUrl}#${profileId}`;

            // –ò—Å–ø–æ–ª—å–∑—É–µ–º modern Clipboard API
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(profileUrl).then(() => {
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
                    showLinkCopiedNotification();
                    console.log('‚úÖ –°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞:', profileUrl);
                }).catch(err => {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å—Å—ã–ª–∫–∏:', err);
                    showErrorNotification('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É');
                });
            } else {
                // Fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
                const textArea = document.createElement('textarea');
                textArea.value = profileUrl;
                textArea.style.position = 'fixed';
                textArea.style.opacity = '0';
                document.body.appendChild(textArea);
                textArea.select();

                try {
                    const successful = document.execCommand('copy');
                    if (successful) {
                        showLinkCopiedNotification();
                        console.log('‚úÖ –°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ (fallback):', profileUrl);
                    } else {
                        showErrorNotification('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É');
                    }
                } catch (err) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ fallback –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:', err);
                    showErrorNotification('–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è');
                } finally {
                    document.body.removeChild(textArea);
                }
            }
        }

        function showErrorNotification(message) {
            const notification = document.createElement('div');
            notification.id = 'errorNotification';
            notification.className = 'link-copied-notification show';
            notification.style.background = 'linear-gradient(45deg, #f44336, #d32f2f)';
            notification.innerHTML = `
        <svg width="18" height="18" viewBox="0 0 24 24" fill="white">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-12S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
        </svg>
        <span>${message}</span>
    `;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.classList.remove('show');
                notification.style.animation = 'slideOutLeft 0.3s ease-in';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± —É—Å–ø–µ—à–Ω–æ–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏
        function showLinkCopiedNotification() {
            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –µ—Å–ª–∏ –µ—Å—Ç—å
            const oldNotification = document.getElementById('linkCopiedNotification');
            if (oldNotification) {
                oldNotification.remove();
            }

            // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            const notification = document.createElement('div');
            notification.id = 'linkCopiedNotification';
            notification.className = 'link-copied-notification show';
            notification.innerHTML = `
        <svg width="18" height="18" viewBox="0 0 24 24" fill="white">
            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
        </svg>
        <span>–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!</span>
    `;

            document.body.appendChild(notification);

            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                notification.classList.remove('show');
                notification.style.animation = 'slideOutLeft 0.3s ease-in';

                // –£–¥–∞–ª—è–µ–º –∏–∑ DOM –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        function showProfileSuccess(message) {
            // –°–æ–∑–¥–∞–µ–º –∫—Ä–∞—Å–∏–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(45deg, #4CAF50, #45a049);
                color: white;
                padding: 15px 20px;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                z-index: 10000;
                max-width: 300px;
                font-family: "Comfortaa", sans-serif;
                animation: slideInRight 0.5s ease-out;
            `;

            notification.innerHTML = `
                <div style="font-weight: bold; margin-bottom: 5px;">‚úÖ –£—Å–ø–µ—à–Ω–æ!</div>
                <div style="font-size: 0.9em;">${message}</div>
            `;

            document.body.appendChild(notification);

            // –£–¥–∞–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.5s ease-in';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 500);
            }, 5000);
        }

        // ========== –û–ë–ù–û–í–õ–ï–ù–ù–´–ï –§–£–ù–ö–¶–ò–ò –î–õ–Ø –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô ==========

        function initImageModal() {
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –≤—Å–µ—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –≥–∞–ª–µ—Ä–µ—è—Ö
            document.querySelectorAll('.work-thumb, .work-thumb-1, .work-thumb-2, .work-thumb-3, .modal-img').forEach(img => {
                img.addEventListener('click', function (e) {
                    e.stopPropagation();

                    // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ —Ç–µ–∫—É—â–µ–π –≥–∞–ª–µ—Ä–µ–∏
                    const gallery = this.closest('.works-inner') || this.closest('.modal-content');
                    if (gallery) {
                        currentImages = Array.from(gallery.querySelectorAll('img')).map(img => img.src);
                        currentImageIndex = currentImages.indexOf(this.src);

                        if (currentImageIndex === -1) {
                            currentImageIndex = 0;
                        }

                        openImageModal(currentImages[currentImageIndex]);
                    }
                });
            });
        }

        function openImageModal(imgSrc) {
            const imageModal = document.getElementById('imageModal');
            const expandedImg = document.getElementById('expandedImg');

            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
            expandedImg.style.opacity = '1';
            expandedImg.src = imgSrc;
            imageModal.style.display = 'block';
            document.body.style.overflow = 'hidden';

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫
            updateImageCounter();

            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            setupImageModalEvents();
        }

        function closeImageModal() {
            const modal = document.getElementById('imageModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';

            // –£–¥–∞–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            removeImageModalEvents();
        }

        function navigateImage(direction) {
            if (currentImages.length === 0 || currentImages.length === 1) return;

            currentImageIndex += direction;

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥—Ä–∞–Ω–∏—Ü—ã
            if (currentImageIndex < 0) {
                currentImageIndex = currentImages.length - 1;
            } else if (currentImageIndex >= currentImages.length) {
                currentImageIndex = 0;
            }

            const expandedImg = document.getElementById('expandedImg');

            // –ü–ª–∞–≤–Ω–∞—è —Å–º–µ–Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            expandedImg.style.opacity = '0';

            setTimeout(() => {
                expandedImg.src = currentImages[currentImageIndex];
                expandedImg.style.opacity = '1';

                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫
                updateImageCounter();
            }, 200);
        }


        function updateImageCounter() {
            const counter = document.getElementById('imageCounter');
            if (currentImages.length > 1) {
                counter.textContent = `${currentImageIndex + 1} / ${currentImages.length}`;
                counter.style.display = 'block';

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç—Ä–µ–ª–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –±–æ–ª—å—à–µ 1 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                document.querySelectorAll('.modal-nav-btn').forEach(btn => {
                    btn.style.display = 'flex';
                });
            } else {
                counter.style.display = 'none';

                // –°–∫—Ä—ã–≤–∞–µ–º —Å—Ç—Ä–µ–ª–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –µ—Å–ª–∏ —Ç–æ–ª—å–∫–æ 1 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                document.querySelectorAll('.modal-nav-btn').forEach(btn => {
                    btn.style.display = 'none';
                });
            }
        }

        function setupImageModalEvents() {
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (—Ç–æ–ª—å–∫–æ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–æ–≤)
            if (window.innerWidth > 768) {
                document.addEventListener('keydown', handleImageKeydown);
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Å–≤–∞–π–ø–∞ (—Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö)
            const modalContent = document.querySelector('.image-modal-content');
            modalContent.addEventListener('touchstart', handleImageTouchStart, { passive: false });
            modalContent.addEventListener('touchmove', handleImageTouchMove, { passive: false });
            modalContent.addEventListener('touchend', handleImageTouchEnd);
        }

        function removeImageModalEvents() {
            document.removeEventListener('keydown', handleImageKeydown);

            const modalContent = document.querySelector('.image-modal-content');
            modalContent.removeEventListener('touchstart', handleImageTouchStart);
            modalContent.removeEventListener('touchmove', handleImageTouchMove);
            modalContent.removeEventListener('touchend', handleImageTouchEnd);
        }

        function handleImageKeydown(e) {
            if (e.key === 'Escape') {
                closeImageModal();
            } else if (e.key === 'ArrowLeft') {
                navigateImage(-1);
            } else if (e.key === 'ArrowRight') {
                navigateImage(1);
            }
        }

        let imageTouchStartX = 0;
        let imageTouchEndX = 0;

        function handleImageTouchStart(e) {
            imageTouchStartX = e.touches[0].clientX;
            e.preventDefault();
        }

        function handleImageTouchMove(e) {
            if (!imageTouchStartX) return;
            imageTouchEndX = e.touches[0].clientX;
            const diff = imageTouchStartX - imageTouchEndX;

            if (Math.abs(diff) > 10) {
                e.preventDefault();
            }
        }

        function handleImageTouchEnd() {
            if (!imageTouchStartX || !imageTouchEndX) return;

            const diff = imageTouchStartX - imageTouchEndX;
            const threshold = 50;

            if (diff > threshold) {
                navigateImage(1);
            } else if (diff < -threshold) {
                navigateImage(-1);
            }

            imageTouchStartX = 0;
            imageTouchEndX = 0;
        }

        // ========== –û–°–¢–ê–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò –°–ê–ô–¢–ê ==========

        // Menu Functions
        function toggleMenu() {
            const drawer = document.getElementById('drawer');
            const overlay = document.getElementById('overlay');
            const menuIcon = document.getElementById('menuIcon');
            const body = document.body;
            const searchInput = document.getElementById('searchInput');

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–∑–∏—Ü–∏—é –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º
            if (!body.classList.contains('menu-open')) {
                body.style.top = `-${window.scrollY}px`;
            }

            drawer.classList.toggle('open');
            overlay.classList.toggle('active');
            menuIcon.classList.toggle('active');
            body.classList.toggle('menu-open');
            searchInput.disabled = body.classList.contains('menu-open');

            // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
            if (!body.classList.contains('menu-open')) {
                const scrollY = parseInt(body.style.top || '0');
                body.style.top = '';
                window.scrollTo(0, -scrollY);
            }
        }

        function closeMenu() {
            const drawer = document.getElementById('drawer');
            const overlay = document.getElementById('overlay');
            const menuIcon = document.getElementById('menuIcon');
            const body = document.body;

            drawer.classList.remove('open');
            overlay.classList.remove('active');
            menuIcon.classList.remove('active');
            body.classList.remove('menu-open');
        }

        // Toggle submenus
        function toggleSubmenu(event) {
            event.preventDefault();
            const link = event.currentTarget;
            const submenu = link.nextElementSibling;

            // Close all other submenus first
            document.querySelectorAll('.submenu').forEach(menu => {
                if (menu !== submenu) {
                    menu.classList.remove('active');
                    menu.previousElementSibling.classList.remove('active');
                }
            });

            // Toggle current submenu
            link.classList.toggle('active');
            submenu.classList.toggle('active');
        }

        // Close menu when clicking on overlay
        document.getElementById('overlay').addEventListener('click', closeMenu);

        // New Search Functionality
        function toggleSearch() {
            const searchContainer = document.getElementById('searchContainer');
            const searchBackdrop = document.getElementById('searchBackdrop');
            const isActive = searchContainer.classList.contains('active');

            if (isActive) {
                searchContainer.classList.remove('active');
                searchBackdrop.classList.remove('active');
                document.getElementById('searchResults').classList.remove('active');
                document.getElementById('searchInput').value = '';
                document.body.style.overflow = 'auto';
            } else {
                searchContainer.classList.add('active');
                searchBackdrop.classList.add('active');
                document.getElementById('searchInput').focus();
                document.body.style.overflow = 'hidden';
            }

            // Close menu if open
            if (document.getElementById('drawer').classList.contains('open')) {
                toggleMenu();
            }
        }

        function searchArtists() {
            const searchText = document.getElementById('searchInput').value.trim().toLowerCase();
            const resultsContainer = document.getElementById('searchResults');

            if (!searchText) {
                resultsContainer.innerHTML = '<div class="no-results">–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞</div>';
                resultsContainer.classList.add('active');
                return;
            }

            const artists = document.querySelectorAll('.profile-section');
            let found = false;
            resultsContainer.innerHTML = '';

            artists.forEach(artist => {
                const artistName = artist.querySelector('h1').textContent.toLowerCase();
                const artistStyle = artist.querySelector('p').textContent.toLowerCase();
                const artistLink = artist.querySelector('.profile-link').textContent.toLowerCase();
                const artistAvatar = artist.querySelector('.avatar').src;

                if (artistName.includes(searchText) || artistStyle.includes(searchText) || artistLink.includes(searchText)) {
                    found = true;
                    const resultItem = document.createElement('div');
                    resultItem.className = 'search-result-item';

                    resultItem.innerHTML = `
                        <img src="${artistAvatar}" alt="${artistName}">
                        <div class="info">
                            <div class="name">${artist.querySelector('h1').textContent}</div>
                            <div class="style">${artist.querySelector('p').textContent}</div>
                        </div>
                    `;

                    resultItem.onclick = () => {
                        document.getElementById('searchInput').value = '';
                        scrollToArtist(artist);
                        toggleSearch();
                    };
                    resultsContainer.appendChild(resultItem);
                }
            });

            if (!found) {
                resultsContainer.innerHTML = '<div class="no-results">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
            }
            resultsContainer.classList.add('active');
        }

        // Highlight text
        function highlightText(element, searchText) {
            const text = element.textContent;
            const regex = new RegExp(`(${searchText})`, 'gi');
            element.innerHTML = text.replace(regex, match =>
                `<span class="highlight">${match}</span>`
            );
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –∫ —Ö—É–¥–æ–∂–Ω–∏–∫—É
        function scrollToArtist(artist) {
            // –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –ø–æ–¥—Å–≤–µ—Ç–∫–∏
            document.querySelectorAll('.artist-highlight').forEach(el => {
                el.classList.remove('artist-highlight');
            });

            // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É
            artist.classList.add('artist-highlight');

            // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –ø–ª–∞–≤–Ω–æ –∫ —ç–ª–µ–º–µ–Ω—Ç—É —Å —É—á–µ—Ç–æ–º —Ö–µ–¥–µ—Ä–∞
            const yOffset = -80;
            const y = artist.getBoundingClientRect().top + window.pageYOffset + yOffset;

            window.scrollTo({
                top: y,
                behavior: 'smooth'
            });

            // –£–±–∏—Ä–∞–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                artist.classList.remove('artist-highlight');
            }, 3000);

            // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
            const handleInterrupt = () => {
                artist.classList.remove('artist-highlight');
            };

            // –î–æ–±–∞–≤–ª—è–µ–º –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
            window.addEventListener('scroll', handleInterrupt, {
                once: true,
                passive: true // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –ø–ª–∞–≤–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
            });

            // –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∫—Ä–æ–ª–ª–∞
            setTimeout(() => {
                document.body.style.overflow = 'auto';
                document.body.style.position = 'static';
            }, 500);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø–æ–∏—Å–∫–∞
        function setupSearchResults() {
            document.querySelectorAll('.search-result-item').forEach(item => {
                item.onclick = (e) => {
                    e.preventDefault();
                    const artist = document.querySelector(
                        `.profile-section:has([alt="${item.querySelector('img').alt}"])`
                    );

                    document.getElementById('searchInput').value = '';
                    toggleSearch();

                    setTimeout(() => {
                        if (artist) {
                            scrollToArtist(artist);

                            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
                            const handleInterrupt = () => {
                                artist.classList.remove('artist-highlight');
                                window.removeEventListener('scroll', handleInterrupt);
                            };
                            window.addEventListener('scroll', handleInterrupt, { once: true });
                        }
                    }, 100);
                };
            });
        }

        // Search on Enter key
        document.getElementById('searchInput').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                searchArtists();
            }
        });

        // Real-time search on input
        document.getElementById('searchInput').addEventListener('input', function () {
            if (this.value.length > 0) {
                searchArtists();
            } else {
                document.getElementById('searchResults').classList.remove('active');
            }
        });

        // Close search when clicking outside (desktop)
        document.addEventListener('click', function (e) {
            const searchContainer = document.getElementById('searchContainer');
            const searchResults = document.getElementById('searchResults');
            const searchInput = document.getElementById('searchInput');
            const mobileSearchBtn = document.getElementById('mobileSearchBtn');

            if (!searchContainer.contains(e.target) &&
                e.target !== mobileSearchBtn &&
                !searchResults.contains(e.target)) {
                searchResults.classList.remove('active');
            }
        });

        // Close search when scrolling on mobile
        window.addEventListener('scroll', function () {
            if (window.innerWidth <= 768 &&
                document.getElementById('searchContainer').classList.contains('active')) {
                toggleSearch();
            }
        });

        // Filters Functionality
        function initFilters() {
            const styles = new Set();
            const filterDropdown = document.getElementById('filtersDropdown');

            // Collect all artist styles
            document.querySelectorAll('.profile-section').forEach(section => {
                const style = section.getAttribute('data-style');
                if (style) styles.add(style);
            });

            // Clear existing filters
            filterDropdown.innerHTML = '';

            // Add "All" button
            const allItem = document.createElement('a');
            allItem.href = '#';
            allItem.textContent = '–í—Å–µ —Å—Ç–∏–ª–∏';
            allItem.onclick = (e) => {
                applyFilter('all', e);
                updateActiveFilter(e.target);
            };
            filterDropdown.appendChild(allItem);

            // Add "Prem Artist" filter
            const premItem = document.createElement('a');
            premItem.href = '#';
            premItem.textContent = 'Prem Artist';
            premItem.onclick = (e) => {
                applyFilter('prem', e);
                updateActiveFilter(e.target);
            };
            filterDropdown.appendChild(premItem);

            // Add filters for each style
            styles.forEach(style => {
                const item = document.createElement('a');
                item.href = '#';
                item.textContent = style;
                item.onclick = (e) => {
                    applyFilter(style, e);
                    updateActiveFilter(e.target);
                };
                filterDropdown.appendChild(item);
            });
        }

        function updateActiveFilter(clickedElement) {
            document.querySelectorAll('.filters-dropdown a').forEach(a => {
                a.classList.remove('active-filter');
            });
            clickedElement.classList.add('active-filter');
        }

        function getNextElements(element) {
            const elements = [];
            let next = element.nextElementSibling;

            while (next) {
                if (next.classList.contains('favorite-works') ||
                    next.classList.contains('works-carousel') ||
                    next.classList.contains('show-works-btn')) {
                    elements.push(next);
                } else if (next.classList.contains('profile-section')) {
                    break;
                }
                next = next.nextElementSibling;
            }

            return elements;
        }

        function toggleFilters(event) {
            event.stopPropagation();
            const filtersDropdown = document.getElementById('filtersDropdown');
            filtersDropdown.classList.toggle('active');
            document.querySelector('.filters-button').classList.toggle('active');

            if (filtersDropdown.classList.contains('active')) {
                document.addEventListener('click', closeFiltersOnClickOutside);
            } else {
                document.removeEventListener('click', closeFiltersOnClickOutside);
            }
        }

        function closeFiltersOnClickOutside(event) {
            const filtersContainer = document.querySelector('.filters-container');
            if (!filtersContainer.contains(event.target)) {
                document.getElementById('filtersDropdown').classList.remove('active');
                document.querySelector('.filters-button').classList.remove('active');
                document.removeEventListener('click', closeFiltersOnClickOutside);
            }
        }

        // Carousel Functionality
        const carouselStates = {};

        function initCarousel(worksInnerId) {
            if (!carouselStates[worksInnerId]) {
                carouselStates[worksInnerId] = {
                    currentTranslate: 0,
                    prevTranslate: 0,
                    isDragging: false,
                    startPos: 0,
                    animationID: 0
                };
            }

            const worksInner = document.getElementById(worksInnerId);
            const works = worksInner.querySelectorAll('.work-thumb, .work-thumb-1, .work-thumb-2, .work-thumb-3');

            // Add event handlers
            worksInner.addEventListener('mousedown', (e) => {
                const state = carouselStates[worksInnerId];
                state.isDragging = true;
                state.startPos = e.clientX;
                state.prevTranslate = state.currentTranslate;
                state.animationID = requestAnimationFrame(() => animation(worksInnerId));
                worksInner.style.cursor = 'grabbing';
                worksInner.style.transition = 'none';
            });

            window.addEventListener('mousemove', (e) => {
                const state = carouselStates[worksInnerId];
                if (!state.isDragging) return;
                const currentPosition = e.clientX;
                state.currentTranslate = state.prevTranslate + currentPosition - state.startPos;
            });

            window.addEventListener('mouseup', () => {
                const state = carouselStates[worksInnerId];
                if (!state.isDragging) return;
                state.isDragging = false;
                cancelAnimationFrame(state.animationID);
                worksInner.style.cursor = 'grab';

                const movedBy = state.currentTranslate - state.prevTranslate;
                const visibleWorks = getVisibleWorksCount(worksInnerId);

                if (movedBy < -100) nextWork(worksInnerId, visibleWorks);
                else if (movedBy > 100) prevWork(worksInnerId, visibleWorks);
                else setPosition(worksInnerId);

                worksInner.style.transition = 'transform 0.5s ease';
            });

            // Touch events
            worksInner.addEventListener('touchstart', (e) => {
                const state = carouselStates[worksInnerId];
                state.isDragging = true;
                state.startPos = e.touches[0].clientX;
                state.prevTranslate = state.currentTranslate;
                state.animationID = requestAnimationFrame(() => animation(worksInnerId));
                worksInner.style.transition = 'none';
            });

            window.addEventListener('touchmove', (e) => {
                const state = carouselStates[worksInnerId];
                if (!state.isDragging) return;

                const currentPosition = e.touches[0].clientX;
                const newTranslate = state.prevTranslate + currentPosition - state.startPos;

                // –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ
                if (window.innerWidth <= 768) {
                    const totalWorksWidth = Array.from(works).reduce((sum, work) => sum + work.offsetWidth + 35, 0);
                    const containerWidth = worksInner.parentElement.offsetWidth;
                    const maxTranslate = -(totalWorksWidth - containerWidth);

                    // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ newTranslate –º–µ–∂–¥—É 0 –∏ maxTranslate
                    state.currentTranslate = Math.max(Math.min(newTranslate, 0), maxTranslate);
                } else {
                    state.currentTranslate = newTranslate;
                }
            });

            window.addEventListener('touchend', () => {
                const state = carouselStates[worksInnerId];
                if (!state.isDragging) return;
                state.isDragging = false;
                cancelAnimationFrame(state.animationID);

                const movedBy = state.currentTranslate - state.prevTranslate;
                const visibleWorks = getVisibleWorksCount(worksInnerId);

                if (movedBy < -100) nextWork(worksInnerId, visibleWorks);
                else if (movedBy > 100) prevWork(worksInnerId, visibleWorks);
                else setPosition(worksInnerId);

                worksInner.style.transition = 'transform 0.5s ease';
            });
        }

        function animation(worksInnerId) {
            setPosition(worksInnerId);
            const state = carouselStates[worksInnerId];
            if (state.isDragging) requestAnimationFrame(() => animation(worksInnerId));
        }

        function setPosition(worksInnerId) {
            const state = carouselStates[worksInnerId];
            const worksInner = document.getElementById(worksInnerId);
            worksInner.style.transform = `translateX(${state.currentTranslate}px)`;
        }

        function getVisibleWorksCount(worksInnerId) {
            const worksInner = document.getElementById(worksInnerId);
            const works = worksInner.querySelectorAll('.work-thumb, .work-thumb-1, .work-thumb-2, .work-thumb-3');
            if (works.length === 0) return 1;

            const containerWidth = worksInner.parentElement.offsetWidth;
            const workWidth = works[0].offsetWidth + 35; // Work width + gap
            return Math.floor(containerWidth / workWidth);
        }

        function nextWork(worksInnerId, step = null) {
            const worksInner = document.getElementById(worksInnerId);
            if (!worksInner) return;

            const works = worksInner.querySelectorAll('.work-thumb, .work-thumb-1, .work-thumb-2, .work-thumb-3');
            const state = carouselStates[worksInnerId];

            if (works.length === 0) return;

            if (step === null) step = getVisibleWorksCount(worksInnerId);

            const containerWidth = worksInner.parentElement.offsetWidth;
            const totalWorksWidth = Array.from(works).reduce((sum, work) => sum + work.offsetWidth + 35, 0);
            const maxPosition = Math.min(0, containerWidth - totalWorksWidth - 35);

            const newPosition = state.currentTranslate - (step * (works[0].offsetWidth + 35));

            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Å–º–µ—â–µ–Ω–∏–µ
            state.currentTranslate = Math.max(newPosition, maxPosition);

            worksInner.style.transition = 'transform 0.5s ease';
            setPosition(worksInnerId);
        }

        function prevWork(worksInnerId, step = null) {
            const worksInner = document.getElementById(worksInnerId);
            if (!worksInner) return;

            const works = worksInner.querySelectorAll('.work-thumb, .work-thumb-1, .work-thumb-2, .work-thumb-3');
            const state = carouselStates[worksInnerId];

            if (works.length === 0) return;

            if (step === null) step = getVisibleWorksCount(worksInnerId);

            const newPosition = state.currentTranslate + (step * (works[0].offsetWidth + 35));

            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Å–º–µ—â–µ–Ω–∏–µ (–Ω–µ –±–æ–ª—å—à–µ 0)
            state.currentTranslate = Math.min(newPosition, 0);

            worksInner.style.transition = 'transform 0.5s ease';
            setPosition(worksInnerId);
        }

        // Modal Functions
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Close modals when clicking outside
        window.onclick = function (event) {
            document.querySelectorAll('.modal').forEach(modal => {
                if (event.target == modal) {
                    closeModal(modal.id);
                }
            });

            if (event.target === document.getElementById('imageModal')) {
                closeImageModal();
            }
        }

        document.addEventListener('keydown', function (event) {
            if (event.key === 'Escape' && document.getElementById('codeModal').style.display === 'block') {
                closeCodeModal();
            }
        });


        // Close modals with ESC key
        document.addEventListener('keydown', function (event) {
            if (event.key === 'Escape') {
                document.querySelectorAll('.modal').forEach(modal => {
                    if (modal.style.display === 'block') {
                        closeModal(modal.id);
                    }
                });

                if (document.getElementById('imageModal').style.display === 'block') {
                    closeImageModal();
                }
            }
        });

        // Back to Top Function
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Show/hide back to top button on scroll
        window.addEventListener('scroll', function () {
            const backToTopBtn = document.getElementById('backToTopBtn');
            if (window.pageYOffset > 300) {
                backToTopBtn.classList.add('active');
            } else {
                backToTopBtn.classList.remove('active');
            }
        });

        // Function to open tab by link
        function openTabByLink(tabId) {
            // This function would be implemented in the Services.html page
            console.log('Opening tab:', tabId);
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—É–±–ª–∏–∫–∞—Ü–∏—è—Ö –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function () {
            setTimeout(showPublicationInfo, 3000);
        });

        // –î–æ–±–∞–≤—å—Ç–µ –≤ —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ DOMContentLoaded –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
        document.addEventListener('DOMContentLoaded', function () {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
            checkAuthStatus();

        });

        // –î–æ–±–∞–≤–∏–º —ç—Ç–æ—Ç –∫–æ–¥ –≤ —Ä–∞–∑–¥–µ–ª —Å–∫—Ä–∏–ø—Ç–æ–≤
        document.addEventListener('DOMContentLoaded', function () {
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Intersection Observer
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');

                        // –î–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
                        if (entry.target.classList.contains('modal-img')) {
                            setTimeout(() => {
                                entry.target.classList.add('visible');
                            }, 100 * index);
                        }
                    }
                });
            }, observerOptions);

            // –ù–∞–±–ª—é–¥–∞–µ–º –∑–∞ –≤—Å–µ–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏
            document.querySelectorAll('.profile-section, .favorite-works, .works-carousel, .show-works-btn').forEach(el => {
                observer.observe(el);
            });

            // –î–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –º–æ–¥–∞–ª–∫–∞—Ö
            document.querySelectorAll('.modal-img').forEach((img, index) => {
                observer.observe(img);
            });
        });

        // –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
        function applyFilter(selectedStyle, event) {
            event.preventDefault();

            // –ó–∞–∫—Ä—ã–≤–∞–µ–º —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞
            closeFilters();

            document.querySelectorAll('.profile-section').forEach(profile => {
                const style = profile.getAttribute('data-style');
                const isPrem = profile.getAttribute('data-prem') === 'true';
                const nextElements = getNextElements(profile);

                if (selectedStyle === 'all' ||
                    (selectedStyle === 'prem' && isPrem) ||
                    (selectedStyle !== 'prem' && style === selectedStyle)) {
                    profile.classList.remove('hidden');
                    nextElements.forEach(el => {
                        el.classList.remove('hidden');
                        el.style.transitionDelay = '0.2s';
                    });
                } else {
                    profile.classList.add('hidden');
                    nextElements.forEach(el => el.classList.add('hidden'));
                }
            });

            // Smooth scroll to top after applying filter
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        function closeFilters() {
            const filtersDropdown = document.getElementById('filtersDropdown');
            const filtersButton = document.querySelector('.filters-button');

            filtersDropdown.classList.remove('active');
            filtersButton.classList.remove('active');
            document.removeEventListener('click', closeFiltersOnClickOutside);
        }

        // –û–±–Ω–æ–≤–∏–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';

            // –ó–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
            setTimeout(() => {
                modal.querySelectorAll('.modal-img').forEach((img, index) => {
                    setTimeout(() => img.classList.add('visible'), 50 * index);
                });
            }, 100);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —è–∫–æ—Ä–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function handleAnchorLinks() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —è–∫–æ—Ä—å –≤ URL
            if (window.location.hash) {
                const artistId = window.location.hash.substring(1); // –£–±–∏—Ä–∞–µ–º # –∏–∑ –Ω–∞—á–∞–ª–∞
                const artistSection = document.getElementById(artistId);

                if (artistSection) {
                    // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ —Å–µ–∫—Ü–∏–∏ —Ö—É–¥–æ–∂–Ω–∏–∫–∞
                    setTimeout(() => {
                        artistSection.scrollIntoView({ behavior: 'smooth' });

                        // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å —Ö—É–¥–æ–∂–Ω–∏–∫–∞
                        const profile = artistSection.querySelector('.profile-section');
                        if (profile) {
                            profile.classList.add('artist-highlight');

                            // –£–±–∏—Ä–∞–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
                            setTimeout(() => {
                                profile.classList.remove('artist-highlight');
                            }, 3000);
                        }
                    }, 100);
                }
            }
        }

        // –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('load', handleAnchorLinks);

        // –¢–∞–∫–∂–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è hash (–µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–∞–µ—Ç –Ω–∞ —è–∫–æ—Ä–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ç–æ–π –∂–µ —Å—Ç—Ä–∞–Ω–∏—Ü–µ)
        window.addEventListener('hashchange', handleAnchorLinks);

        // –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ì–û –ò–ó–ú–ï–ù–ï–ù–ò–Ø –í–´–°–û–¢–´ –¢–ï–ö–°–¢–û–í–û–ì–û –ü–û–õ–Ø
        function autoResizeTextarea(textarea) {
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—ã—Å–æ—Ç—É –¥–æ auto –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞
            textarea.style.height = 'auto';

            // –í—ã—á–∏—Å–ª—è–µ–º –Ω–æ–≤—É—é –≤—ã—Å–æ—Ç—É –Ω–∞ –æ—Å–Ω–æ–≤–µ scrollHeight
            const newHeight = Math.min(textarea.scrollHeight, 300); // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –≤—ã—Å–æ—Ç—É 300px

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—É—é –≤—ã—Å–æ—Ç—É
            textarea.style.height = newHeight + 'px';

            // –î–æ–±–∞–≤–ª—è–µ–º –ø–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥
            textarea.style.transition = 'height 0.2s ease-out';
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–≤—Ç–æ—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª–µ–π –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function () {
            const textareas = document.querySelectorAll('.form-textarea');
            textareas.forEach(textarea => {
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é –≤—ã—Å–æ—Ç—É
                autoResizeTextarea(textarea);

                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞ –≤–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞
                textarea.addEventListener('input', function () {
                    autoResizeTextarea(this);
                });

                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞ (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
                textarea.addEventListener('focus', function () {
                    autoResizeTextarea(this);
                });
            });
        });

        // –§–£–ù–ö–¶–ò–ò –î–õ–Ø –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–û–ì–û –ü–†–û–°–ú–û–¢–†–ê –†–ê–ë–û–¢ –í –ü–†–û–§–ò–õ–ï
        function openProfileWorksModal(workId) {
            // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ —Ä–∞–±–æ—Ç—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
            const worksContainer = document.getElementById('worksContainer');
            const workPreviews = worksContainer.querySelectorAll('.work-link-preview img');

            // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
            profileWorks = Array.from(workPreviews).map(img => img.src);

            // –ù–∞—Ö–æ–¥–∏–º –∏–Ω–¥–µ–∫—Å —Ç–µ–∫—É—â–µ–π —Ä–∞–±–æ—Ç—ã
            currentProfileWorkIndex = Array.from(workPreviews).findIndex(img =>
                img.closest('.work-link-preview').id === workId
            );

            if (currentProfileWorkIndex === -1) {
                currentProfileWorkIndex = 0;
            }

            // –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            const modal = document.getElementById('profileWorksModal');
            const modalImg = document.getElementById('profileWorksModalImg');

            modalImg.src = profileWorks[currentProfileWorkIndex];
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫
            updateProfileWorksCounter();

            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            setupProfileWorksModalEvents();
        }

        function closeProfileWorksModal() {
            const modal = document.getElementById('profileWorksModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';

            // –£–¥–∞–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            removeProfileWorksModalEvents();
        }

        function navigateProfileWork(direction) {
            if (profileWorks.length === 0 || profileWorks.length === 1) return;

            currentProfileWorkIndex += direction;

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥—Ä–∞–Ω–∏—Ü—ã
            if (currentProfileWorkIndex < 0) {
                currentProfileWorkIndex = profileWorks.length - 1;
            } else if (currentProfileWorkIndex >= profileWorks.length) {
                currentProfileWorkIndex = 0;
            }

            const modalImg = document.getElementById('profileWorksModalImg');

            // –ü–ª–∞–≤–Ω–∞—è —Å–º–µ–Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            modalImg.style.opacity = '0';

            setTimeout(() => {
                modalImg.src = profileWorks[currentProfileWorkIndex];
                modalImg.style.opacity = '1';

                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫
                updateProfileWorksCounter();
            }, 200);
        }

        function updateProfileWorksCounter() {
            const counter = document.getElementById('profileWorksModalCounter');
            if (profileWorks.length > 1) {
                counter.textContent = `${currentProfileWorkIndex + 1} / ${profileWorks.length}`;
                counter.style.display = 'block';

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç—Ä–µ–ª–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
                document.querySelectorAll('.profile-works-modal-nav').forEach(btn => {
                    btn.style.display = 'flex';
                });
            } else {
                counter.style.display = 'none';

                // –°–∫—Ä—ã–≤–∞–µ–º —Å—Ç—Ä–µ–ª–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
                document.querySelectorAll('.profile-works-modal-nav').forEach(btn => {
                    btn.style.display = 'none';
                });
            }
        }

        function setupProfileWorksModalEvents() {
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (—Ç–æ–ª—å–∫–æ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–æ–≤)
            if (window.innerWidth > 768) {
                document.addEventListener('keydown', handleProfileWorksKeydown);
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Å–≤–∞–π–ø–∞ (—Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö)
            const modalContent = document.querySelector('.profile-works-modal-content');
            modalContent.addEventListener('touchstart', handleProfileWorksTouchStart, { passive: false });
            modalContent.addEventListener('touchmove', handleProfileWorksTouchMove, { passive: false });
            modalContent.addEventListener('touchend', handleProfileWorksTouchEnd);
        }

        function removeProfileWorksModalEvents() {
            document.removeEventListener('keydown', handleProfileWorksKeydown);

            const modalContent = document.querySelector('.profile-works-modal-content');
            modalContent.removeEventListener('touchstart', handleProfileWorksTouchStart);
            modalContent.removeEventListener('touchmove', handleProfileWorksTouchMove);
            modalContent.removeEventListener('touchend', handleProfileWorksTouchEnd);
        }

        function handleProfileWorksKeydown(e) {
            if (e.key === 'Escape') {
                closeProfileWorksModal();
            } else if (e.key === 'ArrowLeft') {
                navigateProfileWork(-1);
            } else if (e.key === 'ArrowRight') {
                navigateProfileWork(1);
            }
        }

        let profileWorksTouchStartX = 0;
        let profileWorksTouchEndX = 0;

        function handleProfileWorksTouchStart(e) {
            profileWorksTouchStartX = e.touches[0].clientX;
            e.preventDefault();
        }

        function handleProfileWorksTouchMove(e) {
            if (!profileWorksTouchStartX) return;
            profileWorksTouchEndX = e.touches[0].clientX;
            const diff = profileWorksTouchStartX - profileWorksTouchEndX;

            if (Math.abs(diff) > 10) {
                e.preventDefault();
            }
        }

        function handleProfileWorksTouchEnd() {
            if (!profileWorksTouchStartX || !profileWorksTouchEndX) return;

            const diff = profileWorksTouchStartX - profileWorksTouchEndX;
            const threshold = 50;

            if (diff > threshold) {
                navigateProfileWork(1);
            } else if (diff < -threshold) {
                navigateProfileWork(-1);
            }

            profileWorksTouchStartX = 0;
            profileWorksTouchEndX = 0;
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
        document.addEventListener('click', function (event) {
            if (event.target === document.getElementById('profileSetupModal')) {
                closeProfileSetupModal();
            }
            if (event.target === document.getElementById('profileWorksModal')) {
                closeProfileWorksModal();
            }
            if (event.target === document.getElementById('personalCabinetModal')) {
                closePersonalCabinetModal();
            }
            if (event.target === document.getElementById('registrationModal')) {
                closeRegistrationModal();
            }
            if (event.target === document.getElementById('loginModal')) {
                closeLoginModal();
            }
            if (event.target === document.getElementById('codeModal')) {
                closeCodeModal();
            }
            if (event.target === document.getElementById('cabinetWorksModal')) {
                closeCabinetWorksModal();
            }
            if (event.target === document.getElementById('cabinetFullscreenModal')) {
                closeCabinetFullscreenModal();
            }
        });

        document.addEventListener('keydown', function (event) {
            if (event.key === 'Escape') {
                if (document.getElementById('profileSetupModal').style.display === 'block') {
                    closeProfileSetupModal();
                }
                if (document.getElementById('profileWorksModal').style.display === 'block') {
                    closeProfileWorksModal();
                }
                if (document.getElementById('personalCabinetModal').style.display === 'block') {
                    closePersonalCabinetModal();
                }
                if (document.getElementById('registrationModal').style.display === 'block') {
                    closeRegistrationModal();
                }
                if (document.getElementById('loginModal').style.display === 'block') {
                    closeLoginModal();
                }
                if (document.getElementById('codeModal').style.display === 'block') {
                    closeCodeModal();
                }
                if (document.getElementById('cabinetWorksModal').style.display === 'block') {
                    closeCabinetWorksModal();
                }
                if (document.getElementById('cabinetFullscreenModal').style.display === 'block') {
                    closeCabinetFullscreenModal();
                }
            }
        });

        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
        document.querySelector('.profile-setup-content').addEventListener('click', function (event) {
            event.stopPropagation();
        });

        document.querySelector('.profile-works-modal-content').addEventListener('click', function (event) {
            event.stopPropagation();
        });

        document.querySelector('.personal-cabinet-content').addEventListener('click', function (event) {
            event.stopPropagation();
        });

        document.querySelector('.registration-modal-content').addEventListener('click', function (event) {
            event.stopPropagation();
        });

        document.querySelector('#loginModal .registration-modal-content').addEventListener('click', function (event) {
            event.stopPropagation();
        });

        document.querySelector('.code-modal-content').addEventListener('click', function (event) {
            event.stopPropagation();
        });


        document.querySelector('.cabinet-works-content').addEventListener('click', function (event) {
            event.stopPropagation();
        });

        document.querySelector('.cabinet-fullscreen-content').addEventListener('click', function (event) {
            event.stopPropagation();
        });

        // –î–æ–±–∞–≤–ª—è–µ–º CSS –∞–Ω–∏–º–∞—Ü–∏—é –¥–ª—è —Ç—Ä—è—Å–∫–∏
        const shakeStyle = document.createElement('style');
        shakeStyle.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                25% { transform: translateX(-5px); }
                75% { transform: translateX(5px); }
            }
        `;
        document.head.appendChild(shakeStyle);

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function () {
            console.log('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥ –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞–±–æ—Ç–µ');
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
        window.addEventListener('resize', function () {
            updateAuthUI();
        });
    
        // ========== –§–£–ù–ö–¶–ò–ò –î–õ–Ø –°–¢–ê–¢–£–°–ê –ü–£–ë–õ–ò–ö–ê–¶–ò–ò –ü–†–û–§–ò–õ–Ø ==========

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è
        function checkProfilePublicationStatus(username) {
            // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –ø—Ä–æ—Ñ–∏–ª–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
            const publishedProfiles = document.querySelectorAll('.profile-section');
            let isPublished = false;

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
            publishedProfiles.forEach(profile => {
                const profileName = profile.querySelector('h1')?.textContent?.trim();
                const profileData = localStorage.getItem('userProfile_' + username);

                if (profileData) {
                    const userProfile = JSON.parse(profileData);
                    if (userProfile.profileName === profileName) {
                        isPublished = true;
                    }
                }
            });

            return isPublished;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
        function updatePublicationStatus(publicationStatus, userData) {
            const statusElement = document.getElementById('publicationStatus');

            if (!statusElement) {
                // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
                updatePersonalCabinetHTML();
                return;
            }

            if (publicationStatus.isPublished && userData.publishedOn) {
                // –î–ª—è –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
                statusElement.innerHTML = `
            <div class="status-text">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="#4CAF50">
                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                </svg>
                –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –Ω–∞: ${getPageDisplayName(userData.publishedOn)}
            </div>
            <div class="publication-details">
                
            </div>
        `;
                statusElement.classList.add('published');
            } else if (publicationStatus.isPublished) {
                // –î–ª—è –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è –±–µ–∑ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
                statusElement.innerHTML = `
            <div class="status-text">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="#4CAF50">
                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                </svg>
                –ü—Ä–æ—Ñ–∏–ª—å –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω
            </div>
        `;
                statusElement.classList.add('published');
            } else {
                // –î–ª—è –ø—Ä–æ—Ñ–∏–ª—è –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ
                statusElement.innerHTML = `
            <div class="status-text">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="#ff9800">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-12S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
                –ü—Ä–æ—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É
            </div>
        `;
                statusElement.classList.remove('published');
            }
        }


        // –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞
        function loadPersonalCabinetData() {
            if (!currentUser) return;

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Ç–∫—É–¥–∞ –∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
            let userData = null;

            // 1. –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
            const userFromDB = findUserInDatabase(currentUser.username);

            if (userFromDB) {
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
                userData = userFromDB;
                console.log(`üìÅ –ó–∞–≥—Ä—É–∂–µ–Ω –ø—Ä–æ—Ñ–∏–ª—å –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: ${currentUser.username}`);
            }
            // 2. –ï—Å–ª–∏ –Ω–µ—Ç –≤ –±–∞–∑–µ, –ø—Ä–æ–±—É–µ–º localStorage
            else {
                const userProfile = localStorage.getItem('userProfile_' + currentUser.username);
                if (userProfile) {
                    try {
                        userData = JSON.parse(userProfile);
                        console.log(`üìÅ –ó–∞–≥—Ä—É–∂–µ–Ω –ø—Ä–æ—Ñ–∏–ª—å –∏–∑ localStorage: ${currentUser.username}`);
                    } catch (e) {
                        console.error('–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø—Ä–æ—Ñ–∏–ª—è:', e);
                    }
                }
            }

            if (userData) {
                loadCabinetFromDatabase(userData);
            } else {
                // –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç –Ω–∏–≥–¥–µ, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—É—Å—Ç–æ–π –∫–∞–±–∏–Ω–µ—Ç
                console.warn('‚ùå –î–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã');
                loadCabinetFromDatabase({
                    username: currentUser.username,
                    profileName: currentUser.username,
                    profileNickname: '@unknown',
                    avatar: 'https://i.postimg.cc/Rhz86Z09/photo_5337314107818374848_c.jpg',
                    socialLinks: [],
                    works: [],
                    profileDescription: ''
                });
            }

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è ID
            setTimeout(() => {
                setupIdCopyFunctionality();
            }, 100);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ —Å–∫—Ä—ã—Ç–∏—è –∫–Ω–æ–ø–∫–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è Prem Artist
        function checkAndHideEditButton(userData) {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Prem Artist
            const publicationStatus = getProfilePublicationStatus(userData.username);

            // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Prem Artist
            if (publicationStatus.page === 'prem_artist') {
                // –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ –∫–Ω–æ–ø–∫–∏ "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å"
                const editButtons = document.querySelectorAll('.cabinet-action-btn, .cabinet-actions button');

                editButtons.forEach(button => {
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ –∫–Ω–æ–ø–∫–æ–π —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                    if (button.textContent.includes('–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å') ||
                        button.textContent.includes('–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å')) {

                        // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
                        button.style.display = 'none';

                        // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ç–æ–º, –ø–æ—á–µ–º—É –∫–Ω–æ–ø–∫–∞ —Å–∫—Ä—ã—Ç–∞
                        const message = document.createElement('div');
                        message.className = 'prem-artist-notice';
                        message.innerHTML = `
                    <div style="background: rgba(255, 204, 0, 0.1); padding: 10px; border-radius: 8px; 
                                margin: 10px 0; border-left: 3px solid #ffcc00;">
                        <div style="display: flex; align-items: center; gap: 8px; color: #ffcc00;">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="#ffcc00">
                                <path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10z"/>
                            </svg>
                            –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Prem Artist
                        </div>
                    </div>
                `;

                        // –í—Å—Ç–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Ä—è–¥–æ–º —Å –∫–Ω–æ–ø–∫–∞–º–∏ –¥–µ–π—Å—Ç–≤–∏–π
                        const actionsContainer = document.querySelector('.cabinet-actions');
                        if (actionsContainer && actionsContainer.parentNode) {
                            actionsContainer.parentNode.insertBefore(message, actionsContainer);
                        }
                    }
                });
            }
        }

        // –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–∏ —Å—Ç–∏–ª–∏ –≤ –≤–∞—à CSS
        const premArtistStyles = document.createElement('style');
        premArtistStyles.textContent = `
.prem-artist-notice {
    animation: fadeIn 0.5s ease-out;
    margin: 15px 0;
}

.prem-artist-notice .notice-content {
    background: rgba(255, 204, 0, 0.1);
    padding: 12px 15px;
    border-radius: 10px;
    border-left: 3px solid #ffcc00;
}

.prem-artist-notice .notice-header {
    display: flex;
    align-items: center;
    gap: 10px;
    color: #ffcc00;
    font-weight: bold;
    margin-bottom: 5px;
}

.prem-artist-notice .notice-text {
    color: #e0e0e0;
    font-size: 0.9em;
    line-height: 1.4;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
`;
        document.head.appendChild(premArtistStyles);

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
        function loadCabinetFromDatabase(userData) {
            if (!userData) return;

            // –ó–∞–ø–æ–ª–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
            document.getElementById('cabinetAvatar').src = userData.avatar || 'https://i.postimg.cc/Rhz86Z09/photo_5337314107818374848_c.jpg';
            document.getElementById('cabinetUsername').textContent = userData.profileName || currentUser.username;
            document.getElementById('cabinetUserId').textContent = 'ID: ' + currentUser.username;
            document.getElementById('cabinetTelegramText').textContent = userData.profileNickname || '@username';
            document.getElementById('cabinetTelegramLink').href = 'https://t.me/' + (userData.profileNickname || 'username').replace('@', '');

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
            const publicationStatus = getProfilePublicationStatus(currentUser.username);
            updatePublicationStatus(publicationStatus, userData);

            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏
            loadCabinetSocialLinks(userData.socialLinks);

            // –ó–∞–≥—Ä—É–∂–∞–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ
            loadCabinetDescription(userData.profileDescription);

            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ä–∞–±–æ—Ç—ã
            loadCabinetWorks(userData.works);

            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
            updateCabinetActionsForMobile();

            // –ü–æ–º–µ—á–∞–µ–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
            if (userData.publishedOn) {
                markAsDatabaseUser();
            }

            console.log(`‚úÖ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –¥–ª—è: ${currentUser.username}`);
        }

        function markAsDatabaseUser() {
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∞—Ç—Ä–∏–±—É—Ç –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ –±–∞–∑—ã
            const cabinetModal = document.getElementById('personalCabinetModal');
            cabinetModal.setAttribute('data-from-database', 'true');
        }


        // –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π HTML –¥–ª—è –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ (–¥–æ–±–∞–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞)
        function updatePersonalCabinetHTML() {
            const cabinetContent = document.querySelector('.cabinet-content');
            if (cabinetContent && !document.getElementById('publicationStatus')) {
                const profileSection = cabinetContent.querySelector('.cabinet-profile-section');
                if (profileSection) {
                    const statusHTML = `
                <div class="publication-status" id="publicationStatus" style="margin-top: 15px; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 8px; text-align: center;">
                    <div style="display: flex; align-items: center; gap: 8px; color: #ff9800; font-weight: bold;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="#ff9800">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-12S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                        –ü—Ä–æ—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É
                    </div>
                </div>
            `;
                    profileSection.insertAdjacentHTML('beforeend', statusHTML);
                }
            }
        }

        // ========== –°–ò–°–¢–ï–ú–ê –û–¢–°–õ–ï–ñ–ò–í–ê–ù–ò–Ø –°–¢–†–ê–ù–ò–¶ –ü–£–ë–õ–ò–ö–ê–¶–ò–ò ==========

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function getCurrentPage() {
            const path = window.location.pathname;
            if (path.includes('Design.html')) return 'design';
            if (path.includes('Artist.html')) return 'artist';
            if (path.includes('Prem_Artist.html')) return 'prem_artist';
            if (path.includes('proba3.html')) return 'main';
            return 'unknown';
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —á–∏—Ç–∞–µ–º–æ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function getPageDisplayName(page) {
            const pageNames = {
                'design': '–î–∏–∑–∞–π–Ω–µ—Ä—ã',
                'artist': '–•—É–¥–æ–∂–Ω–∏–∫–∏',
                'prem_artist': 'Prem Artist',
                'main': '–ì–ª–∞–≤–Ω–∞—è',
                'unknown': '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'
            };
            return pageNames[page] || page;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
        function savePublicationPage(username, page) {
            const publicationInfo = {
                page: page,
                timestamp: new Date().toISOString(),
                pageDisplayName: getPageDisplayName(page)
            };
            localStorage.setItem(`publication_page_${username}`, JSON.stringify(publicationInfo));
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
        function getPublicationPage(username) {
            const publicationInfo = localStorage.getItem(`publication_page_${username}`);
            return publicationInfo ? JSON.parse(publicationInfo) : null;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è –Ω–∞ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        function publishUserProfileOnCurrentPage(username) {
            const currentPage = getCurrentPage();
            savePublicationPage(username, currentPage);

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
            localStorage.setItem('profilePublished_' + username, 'true');

            console.log(`‚úÖ –ü—Ä–æ—Ñ–∏–ª—å ${username} –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ: ${getPageDisplayName(currentPage)}`);
            return currentPage;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è
        function publishUserProfile(username) {
            const userProfile = localStorage.getItem('userProfile_' + username);
            if (!userProfile) {
                console.error('–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω');
                return false;
            }

            const profileData = JSON.parse(userProfile);
            const currentPage = getCurrentPage();

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
            savePublicationPage(username, currentPage);

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Ç–∞—Ç—É—Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
            localStorage.setItem('profilePublished_' + username, 'true');

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
            updatePublicationStatus();

            console.log(`‚úÖ –ü—Ä–æ—Ñ–∏–ª—å ${username} –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ: ${getPageDisplayName(currentPage)}`);
            return currentPage;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–Ω—è—Ç–∏—è –ø—Ä–æ—Ñ–∏–ª—è —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
        function unpublishUserProfile(username) {
            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
            localStorage.removeItem('profilePublished_' + username);

            // –ó–¥–µ—Å—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–æ–¥ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
            updatePublicationStatus();

            return true;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥)
        function getProfilePublicationStatus(username) {
            const isPublished = localStorage.getItem('profilePublished_' + username) === 'true';
            const publicationPage = getPublicationPage(username);

            return {
                isPublished: isPublished,
                page: publicationPage ? publicationPage.page : null,
                pageDisplayName: publicationPage ? publicationPage.pageDisplayName : null,
                timestamp: publicationPage ? publicationPage.timestamp : null
            };
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
        function openPersonalCabinetModal() {
            if (!currentUser) {
                openLoginModal();
                return;
            }

            const modal = document.getElementById('personalCabinetModal');
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';

            // –î–æ–±–∞–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç —Å—Ç–∞—Ç—É—Å–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
            updatePersonalCabinetHTML();

            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è
            loadPersonalCabinetData();
        }

        // ========== –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –°–û–•–†–ê–ù–ï–ù–ò–Ø –ü–†–û–§–ò–õ–Ø ==========

        // –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –°–û–•–†–ê–ù–ï–ù–ò–Ø –ü–†–û–§–ò–õ–Ø
        function saveProfile(event) {
            event.preventDefault();

            // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤–∞—Ç–∞—Ä–∫–∏
            const avatarSrc = getAvatarSrc();
            if (!avatarSrc) {
                alert('‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∞–≤–∞—Ç–∞—Ä–∫—É –ø—Ä–æ—Ñ–∏–ª—è');
                document.getElementById('avatarLinkInput').focus();
                return;
            }

            // 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–µ–Ω–∏/–ø—Å–µ–≤–¥–æ–Ω–∏–º–∞
            const profileName = document.getElementById('profileName').value.trim();
            if (!profileName) {
                alert('‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∏–º—è –∏–ª–∏ –ø—Å–µ–≤–¥–æ–Ω–∏–º');
                document.getElementById('profileName').focus();
                return;
            }

            if (profileName.length > 20) {
                alert('‚ùå –ò–º—è/–ø—Å–µ–≤–¥–æ–Ω–∏–º –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—à–∞—Ç—å 20 —Å–∏–º–≤–æ–ª–æ–≤');
                document.getElementById('profileName').focus();
                return;
            }

            // 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∏–∫–Ω–µ–π–º–∞ –≤ Telegram
            const profileNickname = document.getElementById('profileNickname').value.trim();
            if (!profileNickname) {
                alert('‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –≤–∞—à –Ω–∏–∫–Ω–µ–π–º –≤ Telegram');
                document.getElementById('profileNickname').focus();
                return;
            }

            // 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
            const profileStyle = document.getElementById('profileStyle').value;
            if (!profileStyle) {
                alert('‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å');
                document.getElementById('profileStyle').focus();
                return;
            }

            // 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ "–î—Ä—É–≥–æ–µ"
            if (profileStyle === '–î—Ä—É–≥–æ–µ') {
                const customStyle = document.getElementById('profileCustomStyle').value.trim();
                if (!customStyle) {
                    alert('‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –≤–∞—à—É —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –≤ –ø–æ–ª–µ "–î—Ä—É–≥–∞—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å"');
                    document.getElementById('profileCustomStyle').focus();
                    return;
                }
            }

            // 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π (–º–∏–Ω–∏–º—É–º 1)
            const socialLinks = collectSocialLinks();
            if (socialLinks.length === 0) {
                alert('‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –¥–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Å–æ—Ü–∏–∞–ª—å–Ω—É—é —Å–µ—Ç—å');
                return;
            }

            // 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç (–º–∏–Ω–∏–º—É–º 5)
            if (uploadedWorksCount < 5) {
                alert(`‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –¥–æ–±–∞–≤—å—Ç–µ –º–∏–Ω–∏–º—É–º 5 –ø—Ä–∏–º–µ—Ä–æ–≤ —Ä–∞–±–æ—Ç. –°–µ–π—á–∞—Å –¥–æ–±–∞–≤–ª–µ–Ω–æ: ${uploadedWorksCount}/5`);
                return;
            }

            // 8. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è
            const userPassword = document.getElementById('profilePassword').value;
            if (!userPassword) {
                alert('‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞ –Ω–∞ —Å–∞–π—Ç');
                document.getElementById('profilePassword').focus();
                return;
            }

            if (!validatePassword(userPassword)) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø–∞—Ä–æ–ª—é:\n- –û—Ç 6 –¥–æ 12 —Å–∏–º–≤–æ–ª–æ–≤\n- –¢–æ–ª—å–∫–æ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –±—É–∫–≤—ã –∏ —Ü–∏—Ñ—Ä—ã');
                document.getElementById('profilePassword').focus();
                return;
            }

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–∏–º–∏—Ç—ã
            if (socialLinksCount > MAX_SOCIAL_LINKS) {
                alert(`‚ùå –ú–∞–∫—Å–∏–º—É–º ${MAX_SOCIAL_LINKS} —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π –≤ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º –ø—Ä–æ—Ñ–∏–ª–µ`);
                return;
            }

            if (uploadedWorksCount > MAX_WORKS) {
                alert(`‚ùå –ú–∞–∫—Å–∏–º—É–º ${MAX_WORKS} —Ä–∞–±–æ—Ç –≤ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º –ø—Ä–æ—Ñ–∏–ª–µ`);
                return;
            }

            // === –°–û–•–†–ê–ù–ï–ù–ò–ï –ü–†–û–§–ò–õ–Ø –° –®–ò–§–†–û–í–ê–ù–ò–ï–ú ===

            const saveBtn = document.getElementById('saveProfileBtn');
            saveBtn.disabled = true;
            saveBtn.textContent = '–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...';

            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∏–ª–∏ –Ω–∞—Ö–æ–¥–∏–º ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            let username;
            let isExistingUser = false;

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ –Ω–∏–∫–Ω–µ–π–º—É
            const existingUser = findUserByNickname(profileNickname);

            if (existingUser) {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π ID –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
                username = existingUser.username;
                isExistingUser = true;
                console.log(`üîÑ –ù–∞–π–¥–µ–Ω —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ—Ñ–∏–ª—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö: ${username}`);
            } else if (currentUser) {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–∫—É—â–∏–π ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                username = currentUser.username;
                isExistingUser = true;
                console.log(`üîÑ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è: ${username}`);
            } else {
                // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π ID
                username = generateUserId(profileNickname);
                console.log(`üÜï –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å: ${username}`);
            }

            // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è –ë–ï–ó –ü–ê–†–û–õ–Ø
            const profileData = {
                username: username,
                profileName: profileName,
                profileNickname: profileNickname,
                profileStyle: profileStyle === '–î—Ä—É–≥–æ–µ'
                    ? document.getElementById('profileCustomStyle').value
                    : profileStyle,
                profileCustomStyle: profileStyle === '–î—Ä—É–≥–æ–µ'
                    ? document.getElementById('profileCustomStyle').value
                    : '',
                profileDescription: document.getElementById('profileDescription').value,
                avatar: avatarSrc,
                socialLinks: socialLinks,
                works: collectWorks(),
                lastUpdated: new Date().toISOString(),
                userPassword: userPassword,
                publicationStatus: 'pending',
                basicInfoLocked: true,
                registrationDate: new Date().toISOString()
            };

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å –≤ localStorage –ë–ï–ó –ü–ê–†–û–õ–Ø
            localStorage.setItem('userProfile_' + username, JSON.stringify(profileData));

            // –°–æ–∑–¥–∞–µ–º –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å
            const encryptedProfile = createEncryptedProfile(profileData, username, userPassword);

            // –°–æ–∑–¥–∞–µ–º/–æ–±–Ω–æ–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ localStorage –ë–ï–ó –ü–ê–†–û–õ–Ø
            const userData = {
                username: username,
                registrationDate: profileData.registrationDate,
                profileComplete: true,
                profileName: profileData.profileName,
                profileNickname: profileData.profileNickname,
                hasPassword: false, // –ü–∞—Ä–æ–ª—å –µ—â–µ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–º
                isNewProfile: !isExistingUser,
                // –ü–∞—Ä–æ–ª—å –ù–ï —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage!
            };

            localStorage.setItem('currentUser', JSON.stringify(userData));
            localStorage.setItem('user_' + username, JSON.stringify(userData));

            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            currentUser = userData;

            // –û–±–Ω–æ–≤–ª—è–µ–º UI
            updateAuthUI();

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
            setTimeout(() => {
                if (isExistingUser) {
                    showProfileSuccess('‚úÖ –ü—Ä–æ—Ñ–∏–ª—å —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω! –ü–∞—Ä–æ–ª—å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä—É.');
                } else {
                    showProfileSuccess('‚úÖ –ü—Ä–æ—Ñ–∏–ª—å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω! –ü–∞—Ä–æ–ª—å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä—É.');
                }

                saveBtn.disabled = false;
                saveBtn.textContent = '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å';

                // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –æ–∫–Ω–æ —Å –∫–æ–¥–æ–º (—Å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º)
                setTimeout(() => {
                    closeProfileSetupModal();
                    openCodeModal(encryptedProfile.profileCode, username, userPassword, isExistingUser, encryptedProfile.encryptedPassword);
                }, 1500);
            }, 1500);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –Ω–∏–∫–Ω–µ–π–º—É –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
        function findUserByNickname(nickname) {
            for (const username in userDatabase) {
                if (userDatabase[username].profileNickname === nickname) {
                    return userDatabase[username];
                }
            }
            return null;
        }

        // ========== –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –°–¢–ò–õ–ò –î–õ–Ø –ò–ù–§–û–†–ú–ê–¶–ò–û–ù–ù–û–ì–û –°–û–û–ë–©–ï–ù–ò–Ø ==========

        const infoMessageStyles = document.createElement('style');
        infoMessageStyles.textContent = `
.locked-info-message {
    background: rgba(255, 204, 0, 0.1);
    padding: 15px;
    border-radius: 10px;
    margin: 15px 0;
    border-left: 4px solid #ffcc00;
    animation: slideIn 0.5s ease-out;
}

.locked-info-message .info-header {
    display: flex;
    align-items: center;
    gap: 10px;
    color: #ffcc00;
    font-weight: bold;
    margin-bottom: 8px;
    font-size: 1.1em;
}

.locked-info-message .info-text {
    color: #e0e0e0;
    font-size: 0.9em;
    line-height: 1.5;
}

.locked-info-message .info-icon {
    width: 20px;
    height: 20px;
    flex-shrink: 0;
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ */
.locked-field-hint {
    color: #ffcc00;
    font-size: 0.8em;
    margin-left: 5px;
    font-weight: bold;
}

.locked-indicator {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(255, 204, 0, 0.2);
    color: #ffcc00;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 10px;
    font-weight: bold;
}

/* –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª–µ–π */
.form-input:read-only,
.form-select:disabled {
    background-color: #2a2a2a !important;
    color: #888 !important;
    cursor: not-allowed !important;
    border-color: #555 !important;
    opacity: 0.8;
}

.form-input:read-only:focus,
.form-select:disabled:focus {
    outline: none !important;
    box-shadow: none !important;
    border-color: #555 !important;
}
`;
        document.head.appendChild(infoMessageStyles);

        // –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥—Å–∫–∞–∑–æ–∫ –æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ
        function addLockedFieldHints() {

            removeLockedFieldHints();



            // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —ç—Ç–æ)
            const mainInfoSection = document.getElementById('mainInfoSection');
            if (mainInfoSection && !mainInfoSection.querySelector('.locked-info-message')) {
                const infoMessage = document.createElement('div');
                infoMessage.className = 'locked-info-message';
                infoMessage.innerHTML = `
            <div class="info-header">
                <svg class="info-icon" viewBox="0 0 24 24" fill="#ffcc00">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-12S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
                –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞—â–∏—â–µ–Ω–∞
            </div>
            <div class="info-text">
                –ò–º—è, –Ω–∏–∫–Ω–µ–π–º –∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è, 
                —á—Ç–æ–±—ã –≤–∞—à –ø—Ä–æ—Ñ–∏–ª—å –æ—Å—Ç–∞–≤–∞–ª—Å—è —É–∑–Ω–∞–≤–∞–µ–º—ã–º –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ. 
                –í—ã –º–æ–∂–µ—Ç–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è.
            </div>
        `;
                mainInfoSection.insertBefore(infoMessage, mainInfoSection.firstChild);
            }


        }

        // –î–æ–±–∞–≤–∏–º –∫–Ω–æ–ø–∫—É –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤
        function addTestAccountsButton() {
            // –°–æ–∑–¥–∞–µ–º —Å–∫—Ä—ã—Ç—É—é –∫–Ω–æ–ø–∫—É –≤ header
            const headerRight = document.querySelector('.header-right');
            if (headerRight) {
                const testBtn = document.createElement('button');
                testBtn.style.cssText = `
            position: absolute;
            right: -100px;
            opacity: 0;
            width: 1px;
            height: 1px;
        `;
                testBtn.onclick = function (e) {
                    e.preventDefault();
                    testCrossDeviceLogin();
                    alert('–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–∞—Ö –≤—ã–≤–µ–¥–µ–Ω–∞ –≤ –∫–æ–Ω—Å–æ–ª—å (F12)');
                };
                testBtn.textContent = 'Test Accounts';
                headerRight.appendChild(testBtn);
            }
        }

        // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        setTimeout(addTestAccountsButton, 1000);

        // ========== –û–ë–ù–û–í–õ–ï–ù–ù–û–ï –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –° –ö–û–î–û–ú ==========

        // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –ø—Ä–æ—Ñ–∏–ª—è
        let currentProfileCode = '';

        // –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –û–¢–ö–†–´–¢–ò–Ø –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê –° –ö–û–î–û–ú
        // –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –û–¢–ö–†–´–¢–ò–Ø –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê –° –ö–û–î–û–ú
        function openCodeModal(profileCode, username, originalPassword, isExistingUser = false, encryptedPassword = '') {
            currentProfileCode = profileCode;

            const modal = document.getElementById('codeModal');
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';

            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
            const instructionsBox = document.querySelector('.instructions-box');
            if (instructionsBox) {
                instructionsBox.innerHTML = `
            <h4 class="instructions-title">üöÄ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ:</h4>
            <div style="background: rgba(255, 152, 0, 0.1); padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 3px solid #ff9800;">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.9em;">
                    <div><strong>User ID:</strong> ${username}</div>
                    <div><strong>–°—Ç–∞—Ç—É—Å –ø–∞—Ä–æ–ª—è:</strong> üîí –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω</div>
                    <div><strong>–ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è:</strong> ${encryptedPassword.substring(0, 20)}...</div>
                </div>
            </div>
            
            <ol class="instructions-list">
                <li>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É <strong>"–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥"</strong></li>
                <li>–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–¥ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞–º –≤ Telegram</li>
                <li>–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä –¥–æ–±–∞–≤–∏—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å –≤ —Å–∏—Å—Ç–µ–º—É –∫–æ–º–∞–Ω–¥–æ–π:</li>
                <div style="background: #333; padding: 10px; border-radius: 6px; margin: 10px 0; font-family: monospace;">
                    addEncryptedUserPassword("${username}", "${encryptedPassword}")
                </div>
                <li>–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—ã —Å–º–æ–∂–µ—Ç–µ –≤–æ–π—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É—è:<br>
                    <strong>–õ–æ–≥–∏–Ω:</strong> ${username}<br>
                    <strong>–ü–∞—Ä–æ–ª—å:</strong> [–≤–∞—à –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å]
                </li>
            </ol>
            
            <div style="background: rgba(76, 175, 80, 0.1); padding: 12px; border-radius: 8px; margin-top: 15px; border-left: 3px solid #4CAF50;">
                <div style="display: flex; align-items: center; gap: 8px; color: #4CAF50; font-weight: bold; margin-bottom: 5px;">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="#4CAF50">
                        <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM12 17c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM15.1 8H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
                    </svg>
                    –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –ü–∞—Ä–æ–ª—å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω
                </div>
                <p style="color: #e0e0e0; font-size: 0.9em; margin: 0;">
                    –í–∞—à –ø–∞—Ä–æ–ª—å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω –∏ –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –≤–∏–¥–µ. 
                    –¢–æ–ª—å–∫–æ —Å–∏—Å—Ç–µ–º–∞ —Å–º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –µ–≥–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å.
                </p>
            </div>
        `;
            }
        }

        // ========== –°–ò–°–¢–ï–ú–ê –ü–û–°–¢–û–Ø–ù–ù–´–• ID ==========

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ ID –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∏–∫–Ω–µ–π–º–∞
        function generateUserId(nickname) {
            // –û—á–∏—â–∞–µ–º –Ω–∏–∫–Ω–µ–π–º –æ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
            const cleanNickname = nickname.replace(/[^a-zA-Z0-9_]/g, '').toLowerCase();

            // –î–æ–±–∞–≤–ª—è–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏
            const randomSuffix = Math.random().toString(36).substring(2, 6); // 4 —Å–ª—É—á–∞–π–Ω—ã—Ö —Å–∏–º–≤–æ–ª–∞

            return `user_${cleanNickname}_${randomSuffix}`;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –Ω–∏–∫–Ω–µ–π–º—É
        function findExistingUserId(nickname) {
            const allUsers = Object.keys(localStorage).filter(key => key.startsWith('userProfile_'));

            for (let userKey of allUsers) {
                const userId = userKey.replace('userProfile_', '');
                const userProfile = JSON.parse(localStorage.getItem(userKey));

                if (userProfile && userProfile.profileNickname === nickname) {
                    return userId;
                }
            }

            return null;
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function () {
            checkAuthStatus();

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
            const registeredUsers = getRegisteredUsers();
            if (registeredUsers.length > 0) {
                console.log('üìã –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–∞ —ç—Ç–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ:', registeredUsers);
            }



            // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –∫ –ø–µ—Ä–≤–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É "–í—Å–µ —Å—Ç–∏–ª–∏"
            const firstFilter = document.querySelector('.filters-dropdown a:first-child');
            if (firstFilter) firstFilter.classList.add('active-filter');

            // –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫–∞—Ä—É—Å–µ–ª–µ–π –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
            window.addEventListener('resize', () => {
                Object.keys(carouselStates).forEach(worksInnerId => {
                    carouselStates[worksInnerId].currentTranslate = 0;
                    setPosition(worksInnerId);
                });
            });

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
            initImageModal();
        });

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è –≤ —Ñ–æ—Ä–º–µ –≤—Ö–æ–¥–∞
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è –≤ —Ñ–æ—Ä–º–µ –≤—Ö–æ–¥–∞
        function toggleLoginPasswordVisibility() {
            const passwordInput = document.getElementById('loginPassword');
            const toggleButton = document.querySelector('#loginModal .password-toggle');

            if (passwordInput.type === 'password') {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–∞—Ä–æ–ª—å
                passwordInput.type = 'text';
                toggleButton.innerHTML = `
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"/>
            </svg>
        `;
                toggleButton.setAttribute('title', '–°–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å');
            } else {
                // –°–∫—Ä—ã–≤–∞–µ–º –ø–∞—Ä–æ–ª—å
                passwordInput.type = 'password';
                toggleButton.innerHTML = `
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
            </svg>
        `;
                toggleButton.setAttribute('title', '–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä–æ–ª—å');
            }

            // –§–æ–∫—É—Å–∏—Ä—É–µ–º—Å—è –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ –ø–æ–ª–µ –≤–≤–æ–¥–∞
            passwordInput.focus();
        }

        // ========== –î–ò–ù–ê–ú–ò–ß–ï–°–ö–ê–Ø –í–ê–õ–ò–î–ê–¶–ò–Ø –ü–û–õ–ï–ô ==========

        function setupDynamicValidation() {
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–æ–ª–µ–π
            document.getElementById('profileName').addEventListener('input', validateName);
            document.getElementById('profileNickname').addEventListener('input', validateNickname);
            document.getElementById('profileStyle').addEventListener('change', validateStyle);
            document.getElementById('profileCustomStyle').addEventListener('input', validateCustomStyle);
            document.getElementById('profilePassword').addEventListener('input', validatePassword);

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π –∏ —Ä–∞–±–æ—Ç
            document.addEventListener('input', function (e) {
                if (e.target.classList.contains('social-link-input-field')) {
                    validateSocialLinks();
                }
            });

            // –û–±—â–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –ª—é–±–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏
            document.addEventListener('input', updateOverallValidation);
        }

        // –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–º–µ–Ω–∏
        function validateName() {
            const nameInput = document.getElementById('profileName');
            const nameValue = nameInput.value.trim();
            const counter = document.getElementById('nameCharCounter');

            if (nameValue.length > 0 && nameValue.length <= 20) {
                nameInput.style.borderColor = '#4CAF50';
                nameInput.style.boxShadow = '0 0 0 2px rgba(76, 175, 80, 0.2)';
                if (counter) counter.style.color = '#4CAF50';
                return true;
            } else {
                nameInput.style.borderColor = '#f44336';
                nameInput.style.boxShadow = '0 0 0 2px rgba(244, 67, 54, 0.2)';
                if (counter) counter.style.color = '#f44336';
                return false;
            }
        }

        // –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∏–∫–Ω–µ–π–º–∞
        function validateNickname() {
            const nicknameInput = document.getElementById('profileNickname');
            const nicknameValue = nicknameInput.value.trim();

            if (nicknameValue.length > 0) {
                nicknameInput.style.borderColor = '#4CAF50';
                nicknameInput.style.boxShadow = '0 0 0 2px rgba(76, 175, 80, 0.2)';
                return true;
            } else {
                nicknameInput.style.borderColor = '#f44336';
                nicknameInput.style.boxShadow = '0 0 0 2px rgba(244, 67, 54, 0.2)';
                return false;
            }
        }

        // –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
        function validateStyle() {
            const styleSelect = document.getElementById('profileStyle');
            const customStyleInput = document.getElementById('profileCustomStyle');
            const styleValue = styleSelect.value;

            if (styleValue === '–î—Ä—É–≥–æ–µ') {
                customStyleInput.disabled = false;
                customStyleInput.required = true;
                // –í–∞–ª–∏–¥–∏—Ä—É–µ–º –∫–∞—Å—Ç–æ–º–Ω—É—é —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å
                validateCustomStyle();
                return validateCustomStyle();
            } else if (styleValue) {
                styleSelect.style.borderColor = '#4CAF50';
                styleSelect.style.boxShadow = '0 0 0 2px rgba(76, 175, 80, 0.2)';
                customStyleInput.disabled = true;
                customStyleInput.required = false;
                customStyleInput.style.borderColor = '#444';
                customStyleInput.style.boxShadow = 'none';
                return true;
            } else {
                styleSelect.style.borderColor = '#f44336';
                styleSelect.style.boxShadow = '0 0 0 2px rgba(244, 67, 54, 0.2)';
                return false;
            }
        }

        // –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–∞—Å—Ç–æ–º–Ω–æ–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
        function validateCustomStyle() {
            const customStyleInput = document.getElementById('profileCustomStyle');
            const customStyleValue = customStyleInput.value.trim();

            if (customStyleInput.disabled) {
                customStyleInput.style.borderColor = '#444';
                customStyleInput.style.boxShadow = 'none';
                return true;
            }

            if (customStyleValue.length > 0) {
                customStyleInput.style.borderColor = '#4CAF50';
                customStyleInput.style.boxShadow = '0 0 0 2px rgba(76, 175, 80, 0.2)';
                return true;
            } else {
                customStyleInput.style.borderColor = '#f44336';
                customStyleInput.style.boxShadow = '0 0 0 2px rgba(244, 67, 54, 0.2)';
                return false;
            }
        }

        // –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–æ–ª—è
        function validatePassword() {
            const passwordInput = document.getElementById('profilePassword');
            const passwordValue = passwordInput.value;
            const requirements = document.getElementById('passwordRequirements');

            const isValidLength = passwordValue.length >= 6 && passwordValue.length <= 12;
            const isValidChars = /^[a-zA-Z0-9]+$/.test(passwordValue);
            const isValid = isValidLength && isValidChars;

            // –û–±–Ω–æ–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
            const lengthReq = document.getElementById('reqLength');
            const charsReq = document.getElementById('reqChars');

            if (isValidLength) {
                lengthReq.classList.add('valid');
                lengthReq.classList.remove('invalid');
            } else {
                lengthReq.classList.remove('valid');
                lengthReq.classList.add('invalid');
            }

            if (isValidChars) {
                charsReq.classList.add('valid');
                charsReq.classList.remove('invalid');
            } else {
                charsReq.classList.remove('valid');
                charsReq.classList.add('invalid');
            }

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∏–ª—å –ø–æ–ª—è –≤–≤–æ–¥–∞
            if (isValid) {
                passwordInput.style.borderColor = '#4CAF50';
                passwordInput.style.boxShadow = '0 0 0 2px rgba(76, 175, 80, 0.2)';
            } else {
                passwordInput.style.borderColor = '#f44336';
                passwordInput.style.boxShadow = '0 0 0 2px rgba(244, 67, 54, 0.2)';
            }

            return isValid;
        }

        // –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π
        function validateSocialLinks() {
            const socialLinks = collectSocialLinks();
            const socialCounter = document.getElementById('socialCounter');
            const socialSection = document.querySelector('.form-section:nth-child(4)');

            if (socialLinks.length >= 1) {
                socialSection.style.borderLeftColor = '#4CAF50';
                socialCounter.style.color = '#4CAF50';
                socialCounter.innerHTML = `‚úÖ –ú–∏–Ω–∏–º—É–º –¥–æ—Å—Ç–∏–≥–Ω—É—Ç | –î–æ–±–∞–≤–ª–µ–Ω–æ: ${socialLinks.length}/${MAX_SOCIAL_LINKS}`;
                return true;
            } else {
                socialSection.style.borderLeftColor = '#f44336';
                socialCounter.style.color = '#f44336';
                socialCounter.innerHTML = `‚ùå –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ: –º–∏–Ω–∏–º—É–º 1 —Å–æ—Ü—Å–µ—Ç—å | –î–æ–±–∞–≤–ª–µ–Ω–æ: ${socialLinks.length}/${MAX_SOCIAL_LINKS}`;
                return false;
            }
        }

        // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç
        function validateWorks() {
            const works = collectWorks();
            const worksCounter = document.getElementById('worksCounter');
            const worksSection = document.querySelector('.form-section:nth-child(5)');

            if (works.length >= 5) {
                worksSection.style.borderLeftColor = '#4CAF50';
                worksCounter.style.color = '#4CAF50';
                worksCounter.textContent = `‚úÖ –ú–∏–Ω–∏–º—É–º –¥–æ—Å—Ç–∏–≥–Ω—É—Ç | –î–æ–±–∞–≤–ª–µ–Ω–æ: ${works.length}/${MAX_WORKS} —Ä–∞–±–æ—Ç`;
                return true;
            } else if (works.length > 0) {
                worksSection.style.borderLeftColor = '#ff9800';
                worksCounter.style.color = '#ff9800';
                worksCounter.textContent = `‚ö†Ô∏è –ù—É–∂–Ω–æ –µ—â–µ ${5 - works.length} —Ä–∞–±–æ—Ç | –î–æ–±–∞–≤–ª–µ–Ω–æ: ${works.length}/${MAX_WORKS}`;
                return false;
            } else {
                worksSection.style.borderLeftColor = '#f44336';
                worksCounter.style.color = '#f44336';
                worksCounter.textContent = `‚ùå –ú–∏–Ω–∏–º—É–º: 5 —Ä–∞–±–æ—Ç | –î–æ–±–∞–≤–ª–µ–Ω–æ: ${works.length}/${MAX_WORKS} —Ä–∞–±–æ—Ç`;
                return false;
            }
        }

        // –í–∞–ª–∏–¥–∞—Ü–∏—è –∞–≤–∞—Ç–∞—Ä–∫–∏
        function validateAvatar() {
            const avatarSrc = getAvatarSrc();
            const avatarSection = document.querySelector('.form-section:first-child');

            if (avatarSrc) {
                avatarSection.style.borderLeftColor = '#4CAF50';
                return true;
            } else {
                avatarSection.style.borderLeftColor = '#f44336';
                return false;
            }
        }

        // –û–±—â–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
        function updateOverallValidation() {
            const isNameValid = validateName();
            const isNicknameValid = validateNickname();
            const isStyleValid = validateStyle();
            const isPasswordValid = validatePassword();
            const isSocialValid = validateSocialLinks();
            const isWorksValid = validateWorks();
            const isAvatarValid = validateAvatar();

            const allValid = isNameValid && isNicknameValid && isStyleValid &&
                isPasswordValid && isSocialValid && isWorksValid && isAvatarValid;

            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
            const saveBtn = document.getElementById('saveProfileBtn');
            if (allValid) {
                saveBtn.style.background = 'linear-gradient(45deg, #4CAF50, #45a049)';
                saveBtn.style.cursor = 'pointer';
            } else {
                saveBtn.style.background = 'linear-gradient(45deg, #ffcc00, #ffdd33)';
                saveBtn.style.cursor = 'not-allowed';
            }

            return allValid;
        }

        // –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ —Ä–∞–∑–¥–µ–ª —Å –¥—Ä—É–≥–∏–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π
        function getAllPublishedProfiles() {
            const publishedProfiles = [];

            Object.keys(localStorage).forEach(key => {
                if (key.startsWith('profile_page_')) {
                    const username = key.replace('profile_page_', '');
                    const publicationInfo = getPublicationPage(username);
                    const userProfile = localStorage.getItem('userProfile_' + username);

                    if (userProfile) {
                        publishedProfiles.push({
                            username: username,
                            profileData: JSON.parse(userProfile),
                            publicationInfo: publicationInfo
                        });
                    }
                }
            });

            return publishedProfiles;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–ª–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–π
        function showFullPublicationStats() {
            const allProfiles = getAllPublishedProfiles();
            const statsByPage = {};

            allProfiles.forEach(profile => {
                const page = profile.publicationInfo.page;
                if (!statsByPage[page]) {
                    statsByPage[page] = [];
                }
                statsByPage[page].push(profile);
            });

            console.log('üìä –ü–û–õ–ù–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–£–ë–õ–ò–ö–ê–¶–ò–ô');
            console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');

            Object.keys(statsByPage).forEach(page => {
                console.log(`\nüìÅ ${getPageDisplayName(page)}: ${statsByPage[page].length} –ø—Ä–æ—Ñ–∏–ª–µ–π`);
                statsByPage[page].forEach((profile, index) => {
                    console.log(`   ${index + 1}. ${profile.profileData.profileName} (@${profile.profileData.profileNickname})`);
                });
            });

            console.log(`\nüìà –í–°–ï–ì–û: ${allProfiles.length} –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π`);
        }

        // –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ–ª–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function showModeratorStats() {
            showFullPublicationStats();
        }


        // ========== –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –°–¢–ò–õ–ò –î–õ–Ø –°–¢–ê–¢–£–°–û–í ==========

        const enhancedStatusStyles = document.createElement('style');
        enhancedStatusStyles.textContent = `
.publication-status {
    position: absolute;
    top: 0;
    right: 0;
    padding: 10px 15px;
    background: rgba(255, 152, 0, 0.1);
    border-radius: 8px;
    border-left: 3px solid #ff9800;
    max-width: 250px;
    text-align: right;
}

.publication-status.published {
    background: rgba(76, 175, 80, 0.1);
    border-left-color: #4CAF50;
}

.publication-status .status-text {
    display: flex;
    align-items: center;
    gap: 8px;
    color: #ff9800;
    font-weight: bold;
    font-size: 0.9em;
    justify-content: flex-end;
}

.publication-status.published .status-text {
    color: #4CAF50;
}

/* –ê–î–ê–ü–¢–ê–¶–ò–Ø –î–õ–Ø –ú–û–ë–ò–õ–¨–ù–´–• –£–°–¢–†–û–ô–°–¢–í */
@media (max-width: 768px) {
    .publication-status {
        position: static;
        margin-top: 15px;
        text-align: center;
        max-width: 100%;
    }
    
    .publication-status .status-text {
        justify-content: center;
    }
}

/* –°—Ç–∏–ª–∏ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ */
.publication-details {
    font-size: 0.8em;
    color: #aaa;
    margin-top: 5px;
    text-align: center;
}
`;
        document.head.appendChild(enhancedStatusStyles);

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª–∏–Ω—ã –∏–º–µ–Ω–∏
        document.getElementById('profileName').addEventListener('input', function () {
            const maxLength = 20;
            const currentLength = this.value.length;
            const counter = document.getElementById('nameCharCounter');

            if (counter) {
                counter.textContent = `${currentLength}/${maxLength} —Å–∏–º–≤–æ–ª–æ–≤`;

                // –û–±–Ω–æ–≤–ª—è–µ–º –∫–ª–∞—Å—Å—ã –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏
                counter.classList.remove('warning', 'error');
                if (currentLength >= maxLength - 5 && currentLength < maxLength) {
                    counter.classList.add('warning');
                } else if (currentLength >= maxLength) {
                    counter.classList.add('error');
                }

                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–µ–∑–∞–µ–º —Ç–µ–∫—Å—Ç –µ—Å–ª–∏ –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç
                if (currentLength > maxLength) {
                    this.value = this.value.substring(0, maxLength);
                }
            }
        });

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–º
        function addUserPassword(userId, password) {
            if (userId && password) {
                moderatorPasswords[userId] = password;
                console.log(`–ü–∞—Ä–æ–ª—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${userId} –¥–æ–±–∞–≤–ª–µ–Ω –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–º`);
                return true;
            }
            return false;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
        function findUserInDatabase(username) {
            return userDatabase[username] || null;
        }

        // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
        function findUserInDatabase(username) {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
            if (userDatabase[username]) {
                return userDatabase[username];
            }

            // –ò—â–µ–º –ø–æ –∏–º–µ–Ω–∏ –ø—Ä–æ—Ñ–∏–ª—è (–µ—Å–ª–∏ username —ç—Ç–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∏–º—è)
            for (const key in userDatabase) {
                if (userDatabase[key].profileName === username ||
                    userDatabase[key].profileNickname === username.replace('@', '')) {
                    return userDatabase[key];
                }
            }

            return null;
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∫–∞–±–∏–Ω–µ—Ç–∞
        const originalOpenCabinetModal = openPersonalCabinetModal;
        openPersonalCabinetModal = function () {
            originalOpenCabinetModal();

            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
            setTimeout(() => {
                if (currentUser) {
                    const userFromDB = findUserInDatabase(currentUser.username);
                    if (userFromDB) {
                        // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º —Å localStorage –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
                        syncUserDataToLocalStorage(userFromDB);
                    }
                }
            }, 500);
        };

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ä–æ–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function verifyUserPassword(username, password) {
            const user = findUserInDatabase(username);
            if (!user) return false;

            return user.userPassword === password;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ª–æ–∫–∞–ª—å–Ω—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º
        function syncUserDataFromDatabase(username) {
            const user = findUserInDatabase(username);
            if (!user) return false;

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å –≤ localStorage
            localStorage.setItem('userProfile_' + username, JSON.stringify(user));

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
            const userData = {
                username: user.username,
                registrationDate: user.registrationDate || new Date().toISOString(),
                profileComplete: true,
                profileName: user.profileName,
                profileNickname: user.profileNickname,
                hasPassword: true,
                isNewProfile: false
            };

            localStorage.setItem('user_' + username, JSON.stringify(userData));

            console.log(`‚úÖ –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${username} —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö`);
            return true;
        }


        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–µ–∑ –ø–∞—Ä–æ–ª–µ–π
        function getUsersWithoutPasswords() {
            const users = [];
            const allUsers = Object.keys(localStorage).filter(key => key.startsWith('userProfile_'));

            allUsers.forEach(userKey => {
                const userId = userKey.replace('userProfile_', '');
                if (!moderatorPasswords[userId]) {
                    users.push(userId);
                }
            });

            return users;
        }
    </script>

    <script>
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function () {
            checkAuthStatus();

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—É—Å–µ–ª–µ–π
            initCarousel('artist1Works');
            initCarousel('artist3Works');

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
            initFilters();

            // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –∫ –ø–µ—Ä–≤–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É "–í—Å–µ —Å—Ç–∏–ª–∏"
            const firstFilter = document.querySelector('.filters-dropdown a:first-child');
            if (firstFilter) firstFilter.classList.add('active-filter');

            // –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫–∞—Ä—É—Å–µ–ª–µ–π –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
            window.addEventListener('resize', () => {
                Object.keys(carouselStates).forEach(worksInnerId => {
                    carouselStates[worksInnerId].currentTranslate = 0;
                    setPosition(worksInnerId);
                });
            });

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
            initImageModal();
        });

        // ========== –°–ò–°–¢–ï–ú–ê –ü–ê–†–û–õ–ï–ô –î–õ–Ø –ú–û–î–ï–†–ê–¢–û–†–û–í ==========
        publishUserProfileOnPage("user_artist123", "artist");     // –•—É–¥–æ–∂–Ω–∏–∫–∏
        publishUserProfileOnPage("user_5sjr50", "artist");   // –î–∏–∑–∞–π–Ω–µ—Ä—ã  
        publishUserProfileOnPage("user_prem789", "prem_artist");  // Prem Artist
    </script>

    <script src="bd_d.js"></script>

</body>

</html>